<!doctype html><html lang="en">
 <head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
  <title>Secure Interface for Video Interactive Creative (SIVIC)</title>
  <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
<style data-fill-with="stylesheet">/******************************************************************************
 *                   Style sheet for the W3C specifications                   *
 *
 * Special classes handled by this style sheet include:
 *
 * Indices
 *   - .toc for the Table of Contents (<ol class="toc">)
 *     + <span class="secno"> for the section numbers
 *   - #toc for the Table of Contents (<nav id="toc">)
 *   - ul.index for Indices (<a href="#ref">term</a><span>, in §N.M</span>)
 *   - table.index for Index Tables (e.g. for properties or elements)
 *
 * Structural Markup
 *   - table.data for general data tables
 *     -> use 'scope' attribute, <colgroup>, <thead>, and <tbody> for best results !
 *     -> use <table class='complex data'> for extra-complex tables
 *     -> use <td class='long'> for paragraph-length cell content
 *     -> use <td class='pre'> when manual line breaks/indentation would help readability
 *   - dl.switch for switch statements
 *   - ol.algorithm for algorithms (helps to visualize nesting)
 *   - .figure and .caption (HTML4) and figure and figcaption (HTML5)
 *     -> .sidefigure for right-floated figures
 *   - ins/del
 *
 * Code
 *   - pre and code
 *
 * Special Sections
 *   - .note       for informative notes             (div, p, span, aside, details)
 *   - .example    for informative examples          (div, p, pre, span)
 *   - .issue      for issues                        (div, p, span)
 *   - .assertion  for assertions                    (div, p, span)
 *   - .advisement for loud normative statements     (div, p, strong)
 *   - .annoying-warning for spec obsoletion notices (div, aside, details)
 *
 * Definition Boxes
 *   - pre.def   for WebIDL definitions
 *   - table.def for tables that define other entities (e.g. CSS properties)
 *   - dl.def    for definition lists that define other entitles (e.g. HTML elements)
 *
 * Numbering
 *   - .secno for section numbers in .toc and headings (<span class='secno'>3.2</span>)
 *   - .marker for source-inserted example/figure/issue numbers (<span class='marker'>Issue 4</span>)
 *   - ::before styled for CSS-generated issue/example/figure numbers:
 *     -> Documents wishing to use this only need to add
 *        figcaption::before,
 *        .caption::before { content: "Figure "  counter(figure) " ";  }
 *        .example::before { content: "Example " counter(example) " "; }
 *        .issue::before   { content: "Issue "   counter(issue) " ";   }
 *
 * Header Stuff (ignore, just don't conflict with these classes)
 *   - .head for the header
 *   - .copyright for the copyright
 *
 * Miscellaneous
 *   - .overlarge for things that should be as wide as possible, even if
 *     that overflows the body text area. This can be used on an item or
 *     on its container, depending on the effect desired.
 *     Note that this styling basically doesn't help at all when printing,
 *     since A4 paper isn't much wider than the max-width here.
 *     It's better to design things to fit into a narrower measure if possible.
 *   - js-added ToC jump links (see fixup.js)
 *
 ******************************************************************************/

/******************************************************************************/
/*                                   Body                                     */
/******************************************************************************/

	body {
		counter-reset: example figure issue;

		/* Layout */
		max-width: 50em;               /* limit line length to 50em for readability   */
		margin: 0 auto;                /* center text within page                     */
		padding: 1.6em 1.5em 2em 50px; /* assume 16px font size for downlevel clients */
		padding: 1.6em 1.5em 2em calc(26px + 1.5em); /* leave space for status flag     */

		/* Typography */
		line-height: 1.5;
		font-family: sans-serif;
		widows: 2;
		orphans: 2;
		word-wrap: break-word;
		overflow-wrap: break-word;
		hyphens: auto;

		/* Colors */
		color: black;
		background: white top left fixed no-repeat;
		background-size: 25px auto;
	}


/******************************************************************************/
/*                         Front Matter & Navigation                          */
/******************************************************************************/

/** Header ********************************************************************/

	div.head { margin-bottom: 1em }
	div.head hr { border-style: solid; }

	div.head h1 {
		font-weight: bold;
		margin: 0 0 .1em;
		font-size: 220%;
	}

	div.head h2 { margin-bottom: 1.5em;}

/** W3C Logo ******************************************************************/

	.head .logo {
		float: right;
		margin: 0.4rem 0 0.2rem .4rem;
	}

	.head img[src*="logos/W3C"] {
		display: block;
		border: solid #1a5e9a;
		border-width: .65rem .7rem .6rem;
		border-radius: .4rem;
		background: #1a5e9a;
		color: white;
		font-weight: bold;
	}

	.head a:hover > img[src*="logos/W3C"],
	.head a:focus > img[src*="logos/W3C"] {
		opacity: .8;
	}

	.head a:active > img[src*="logos/W3C"] {
		background: #c00;
		border-color: #c00;
	}

	/* see also additional rules in Link Styling section */

/** Copyright *****************************************************************/

	p.copyright,
	p.copyright small { font-size: small }

/** Back to Top / ToC Toggle **************************************************/

	@media print {
		#toc-nav {
			display: none;
		}
	}
	@media not print {
		#toc-nav {
			position: fixed;
			z-index: 2;
			bottom: 0; left: 0;
			margin: 0;
			min-width: 1.33em;
			border-top-right-radius: 2rem;
			box-shadow: 0 0 2px;
			font-size: 1.5em;
			color: black;
		}
		#toc-nav > a {
			display: block;
			white-space: nowrap;

			height: 1.33em;
			padding: .1em 0.3em;
			margin: 0;

			background: white;
			box-shadow: 0 0 2px;
			border: none;
			border-top-right-radius: 1.33em;
			background: white;
		}
		#toc-nav > #toc-jump {
			padding-bottom: 2em;
			margin-bottom: -1.9em;
		}

		#toc-nav > a:hover,
		#toc-nav > a:focus {
			background: #f8f8f8;
		}
		#toc-nav > a:not(:hover):not(:focus) {
			color: #707070;
		}

		/* statusbar gets in the way on keyboard focus; remove once browsers fix */
		#toc-nav > a[href="#toc"]:not(:hover):focus:last-child {
			padding-bottom: 1.5rem;
		}

		#toc-nav:not(:hover) > a:not(:focus) > span + span {
			/* Ideally this uses :focus-within on #toc-nav */
			display: none;
		}
		#toc-nav > a > span + span {
			padding-right: 0.2em;
		}

		#toc-toggle-inline {
			vertical-align: 0.05em;
			font-size: 80%;
			color: gray;
			color: hsla(203,20%,40%,.7);
			border-style: none;
			background: transparent;
			position: relative;
		}
		#toc-toggle-inline:hover:not(:active),
		#toc-toggle-inline:focus:not(:active) {
			text-shadow: 1px 1px silver;
			top: -1px;
			left: -1px;
		}

		#toc-nav :active {
			color: #C00;
		}
	}

/** ToC Sidebar ***************************************************************/

	/* Floating sidebar */
	@media screen {
		body.toc-sidebar #toc {
			position: fixed;
			top: 0; bottom: 0;
			left: 0;
			width: 23.5em;
			max-width: 80%;
			max-width: calc(100% - 2em - 26px);
			overflow: auto;
			padding: 0 1em;
			padding-left: 42px;
			padding-left: calc(1em + 26px);
			background: inherit;
			background-color: #f7f8f9;
			z-index: 1;
			box-shadow: -.1em 0 .25em rgba(0,0,0,.1) inset;
		}
		body.toc-sidebar #toc h2 {
			margin-top: .8rem;
			font-variant: small-caps;
			font-variant: all-small-caps;
			text-transform: lowercase;
			font-weight: bold;
			color: gray;
			color: hsla(203,20%,40%,.7);
		}
		body.toc-sidebar #toc-jump:not(:focus) {
			width: 0;
			height: 0;
			padding: 0;
			position: absolute;
			overflow: hidden;
		}
	}
	/* Hide main scroller when only the ToC is visible anyway */
	@media screen and (max-width: 28em) {
		body.toc-sidebar {
			overflow: hidden;
		}
	}

	/* Sidebar with its own space */
	@media screen and (min-width: 78em) {
		body:not(.toc-inline) #toc {
			position: fixed;
			top: 0; bottom: 0;
			left: 0;
			width: 23.5em;
			overflow: auto;
			padding: 0 1em;
			padding-left: 42px;
			padding-left: calc(1em + 26px);
			background: inherit;
			background-color: #f7f8f9;
			z-index: 1;
			box-shadow: -.1em 0 .25em rgba(0,0,0,.1) inset;
		}
		body:not(.toc-inline) #toc h2 {
			margin-top: .8rem;
			font-variant: small-caps;
			font-variant: all-small-caps;
			text-transform: lowercase;
			font-weight: bold;
			color: gray;
			color: hsla(203,20%,40%,.7);
		}

		body:not(.toc-inline) {
			padding-left: 29em;
		}
		/* See also Overflow section at the bottom */

		body:not(.toc-inline) #toc-jump:not(:focus) {
			width: 0;
			height: 0;
			padding: 0;
			position: absolute;
			overflow: hidden;
		}
	}
	@media screen and (min-width: 90em) {
		body:not(.toc-inline) {
			margin: 0 4em;
		}
	}

/******************************************************************************/
/*                                Sectioning                                  */
/******************************************************************************/

/** Headings ******************************************************************/

	h1, h2, h3, h4, h5, h6, dt {
		page-break-after: avoid;
		page-break-inside: avoid;
		font: 100% sans-serif;   /* Reset all font styling to clear out UA styles */
		font-family: inherit;    /* Inherit the font family. */
		line-height: 1.2;        /* Keep wrapped headings compact */
		hyphens: manual;         /* Hyphenated headings look weird */
	}

	h2, h3, h4, h5, h6 {
		margin-top: 3rem;
	}

	h1, h2, h3 {
		color: #005A9C;
		background: transparent;
	}

	h1 { font-size: 170%; }
	h2 { font-size: 140%; }
	h3 { font-size: 120%; }
	h4 { font-weight: bold; }
	h5 { font-style: italic; }
	h6 { font-variant: small-caps; }
	dt { font-weight: bold; }

/** Subheadings ***************************************************************/

	h1 + h2,
	#subtitle {
		/* #subtitle is a subtitle in an H2 under the H1 */
		margin-top: 0;
	}
	h2 + h3,
	h3 + h4,
	h4 + h5,
	h5 + h6 {
		margin-top: 1.2em; /* = 1 x line-height */
	}

/** Section divider ***********************************************************/

	:not(.head) > hr {
		font-size: 1.5em;
		text-align: center;
		margin: 1em auto;
		height: auto;
		border: transparent solid 0;
		background: transparent;
	}
	:not(.head) > hr::before {
		content: "\2727\2003\2003\2727\2003\2003\2727";
	}

/******************************************************************************/
/*                            Paragraphs and Lists                            */
/******************************************************************************/

	p {
		margin: 1em 0;
	}

	dd > p:first-child,
	li > p:first-child {
		margin-top: 0;
	}

	ul, ol {
		margin-left: 0;
		padding-left: 2em;
	}

	li {
		margin: 0.25em 0 0.5em;
		padding: 0;
	}

	dl dd {
		margin: 0 0 .5em 2em;
	}

	.head dd + dd { /* compact for header */
		margin-top: -.5em;
	}

	/* Style for algorithms */
	ol.algorithm ol:not(.algorithm),
	.algorithm > ol ol:not(.algorithm) {
	 border-left: 0.5em solid #DEF;
	}

	/* Put nice boxes around each algorithm. */
	[data-algorithm]:not(.heading) {
	  padding: .5em;
	  border: thin solid #ddd; border-radius: .5em;
	  margin: .5em calc(-0.5em - 1px);
	}
	[data-algorithm]:not(.heading) > :first-child {
	  margin-top: 0;
	}
	[data-algorithm]:not(.heading) > :last-child {
	  margin-bottom: 0;
	}

	/* Style for switch/case <dl>s */
	dl.switch > dd > ol.only,
	dl.switch > dd > .only > ol {
	 margin-left: 0;
	}
	dl.switch > dd > ol.algorithm,
	dl.switch > dd > .algorithm > ol {
	 margin-left: -2em;
	}
	dl.switch {
	 padding-left: 2em;
	}
	dl.switch > dt {
	 text-indent: -1.5em;
	 margin-top: 1em;
	}
	dl.switch > dt + dt {
	 margin-top: 0;
	}
	dl.switch > dt::before {
	 content: '\21AA';
	 padding: 0 0.5em 0 0;
	 display: inline-block;
	 width: 1em;
	 text-align: right;
	 line-height: 0.5em;
	}

/** Terminology Markup ********************************************************/


/******************************************************************************/
/*                                 Inline Markup                              */
/******************************************************************************/

/** Terminology Markup ********************************************************/
	dfn   { /* Defining instance */
		font-weight: bolder;
	}
	a > i { /* Instance of term */
		font-style: normal;
	}
	dt dfn code, code.idl {
		font-size: medium;
	}
	dfn var {
		font-style: normal;
	}

/** Change Marking ************************************************************/

	del { color: red;  text-decoration: line-through; }
	ins { color: #080; text-decoration: underline;    }

/** Miscellaneous improvements to inline formatting ***************************/

	sup {
		vertical-align: super;
		font-size: 80%
	}

/******************************************************************************/
/*                                    Code                                    */
/******************************************************************************/

/** General monospace/pre rules ***********************************************/

	pre, code, samp {
		font-family: Menlo, Consolas, "DejaVu Sans Mono", Monaco, monospace;
		font-size: .9em;
		page-break-inside: avoid;
		hyphens: none;
		text-transform: none;
	}
	pre code,
	code code {
		font-size: 100%;
	}

	pre {
		margin-top: 1em;
		margin-bottom: 1em;
		overflow: auto;
	}

/** Inline Code fragments *****************************************************/

  /* Do something nice. */

/******************************************************************************/
/*                                    Links                                   */
/******************************************************************************/

/** General Hyperlinks ********************************************************/

	/* We hyperlink a lot, so make it less intrusive */
	a[href] {
		color: #034575;
		text-decoration: none;
		border-bottom: 1px solid #707070;
		/* Need a bit of extending for it to look okay */
		padding: 0 1px 0;
		margin: 0 -1px 0;
	}
	a:visited {
		border-bottom-color: #BBB;
	}

	/* Use distinguishing colors when user is interacting with the link */
	a[href]:focus,
	a[href]:hover {
		background: #f8f8f8;
		background: rgba(75%, 75%, 75%, .25);
		border-bottom-width: 3px;
		margin-bottom: -2px;
	}
	a[href]:active {
		color: #C00;
		border-color: #C00;
	}

	/* Backout above styling for W3C logo */
	.head .logo,
	.head .logo a {
		border: none;
		text-decoration: none;
		background: transparent;
	}

/******************************************************************************/
/*                                    Images                                  */
/******************************************************************************/

	img {
		border-style: none;
	}

	/* For autogen numbers, add
	   .caption::before, figcaption::before { content: "Figure " counter(figure) ". "; }
	*/

	figure, .figure, .sidefigure {
		page-break-inside: avoid;
		text-align: center;
		margin: 2.5em 0;
	}
	.figure img,    .sidefigure img,    figure img,
	.figure object, .sidefigure object, figure object {
		max-width: 100%;
		margin: auto;
	}
	.figure pre, .sidefigure pre, figure pre {
		text-align: left;
		display: table;
		margin: 1em auto;
	}
	.figure table, figure table {
		margin: auto;
	}
	@media screen and (min-width: 20em) {
		.sidefigure {
			float: right;
			width: 50%;
			margin: 0 0 0.5em 0.5em
		}
	}
	.caption, figcaption, caption {
		font-style: italic;
		font-size: 90%;
	}
	.caption::before, figcaption::before, figcaption > .marker {
		font-weight: bold;
	}
	.caption, figcaption {
		counter-increment: figure;
	}

	/* DL list is indented 2em, but figure inside it is not */
	dd > .figure, dd > figure { margin-left: -2em }

/******************************************************************************/
/*                             Colored Boxes                                  */
/******************************************************************************/

	.issue, .note, .example, .assertion, .advisement, blockquote {
		padding: .5em;
		border: .5em;
		border-left-style: solid;
		page-break-inside: avoid;
	}
	span.issue, span.note {
		padding: .1em .5em .15em;
		border-right-style: solid;
	}

	.issue,
	.note,
	.example,
	.advisement,
	.assertion,
	blockquote {
		margin: 1em auto;
	}
	.note  > p:first-child,
	.issue > p:first-child,
	blockquote > :first-child {
		margin-top: 0;
	}
	blockquote > :last-child {
		margin-bottom: 0;
	}

/** Blockquotes ***************************************************************/

	blockquote {
		border-color: silver;
	}

/** Open issue ****************************************************************/

	.issue {
		border-color: #E05252;
		background: #FBE9E9;
		counter-increment: issue;
		overflow: auto;
	}
	.issue::before, .issue > .marker {
		text-transform: uppercase;
		color: #AE1E1E;
		padding-right: 1em;
		text-transform: uppercase;
	}
	/* Add .issue::before { content: "Issue " counter(issue) " "; } for autogen numbers,
	   or use class="marker" to mark up the issue number in source. */

/** Example *******************************************************************/

	.example {
		border-color: #E0CB52;
		background: #FCFAEE;
		counter-increment: example;
		overflow: auto;
		clear: both;
	}
	.example::before, .example > .marker {
		text-transform: uppercase;
		color: #827017;
		min-width: 7.5em;
		display: block;
	}
	/* Add .example::before { content: "Example " counter(example) " "; } for autogen numbers,
	   or use class="marker" to mark up the example number in source. */

/** Non-normative Note ********************************************************/

	.note {
		border-color: #52E052;
		background: #E9FBE9;
		overflow: auto;
	}

	.note::before, .note > .marker,
	details.note > summary::before,
	details.note > summary > .marker {
		text-transform: uppercase;
		display: block;
		color: hsl(120, 70%, 30%);
	}
	/* Add .note::before { content: "Note"; } for autogen label,
	   or use class="marker" to mark up the label in source. */

	details.note > summary {
		display: block;
		color: hsl(120, 70%, 30%);
	}
	details.note[open] > summary {
		border-bottom: 1px silver solid;
	}

/** Assertion Box *************************************************************/
	/*  for assertions in algorithms */

	.assertion {
		border-color: #AAA;
		background: #EEE;
	}

/** Advisement Box ************************************************************/
	/*  for attention-grabbing normative statements */

	.advisement {
		border-color: orange;
		border-style: none solid;
		background: #FFEECC;
	}
	strong.advisement {
		display: block;
		text-align: center;
	}
	.advisement > .marker {
		color: #B35F00;
	}

/** Spec Obsoletion Notice ****************************************************/
	/* obnoxious obsoletion notice for older/abandoned specs. */

	details {
		display: block;
	}
	summary {
		font-weight: bolder;
	}

	.annoying-warning:not(details),
	details.annoying-warning:not([open]) > summary,
	details.annoying-warning[open] {
		background: #fdd;
		color: red;
		font-weight: bold;
		padding: .75em 1em;
		border: thick red;
		border-style: solid;
		border-radius: 1em;
	}
	.annoying-warning :last-child {
		margin-bottom: 0;
	}

@media not print {
	details.annoying-warning[open] {
		position: fixed;
		left: 1em;
		right: 1em;
		bottom: 1em;
		z-index: 1000;
	}
}

	details.annoying-warning:not([open]) > summary {
		text-align: center;
	}

/** Entity Definition Boxes ***************************************************/

	.def {
		padding: .5em 1em;
		background: #DEF;
		margin: 1.2em 0;
		border-left: 0.5em solid #8CCBF2;
	}

/******************************************************************************/
/*                                    Tables                                  */
/******************************************************************************/

	th, td {
		text-align: left;
		text-align: start;
	}

/** Property/Descriptor Definition Tables *************************************/

	table.def {
		/* inherits .def box styling, see above */
		width: 100%;
		border-spacing: 0;
	}

	table.def td,
	table.def th {
		padding: 0.5em;
		vertical-align: baseline;
		border-bottom: 1px solid #bbd7e9;
	}

	table.def > tbody > tr:last-child th,
	table.def > tbody > tr:last-child td {
		border-bottom: 0;
	}

	table.def th {
		font-style: italic;
		font-weight: normal;
		padding-left: 1em;
		width: 3em;
	}

	/* For when values are extra-complex and need formatting for readability */
	table td.pre {
		white-space: pre-wrap;
	}

	/* A footnote at the bottom of a def table */
	table.def           td.footnote {
		padding-top: 0.6em;
	}
	table.def           td.footnote::before {
		content: " ";
		display: block;
		height: 0.6em;
		width: 4em;
		border-top: thin solid;
	}

/** Data tables (and properly marked-up index tables) *************************/
	/*
		 <table class="data"> highlights structural relationships in a table
		 when correct markup is used (e.g. thead/tbody, th vs. td, scope attribute)

		 Use class="complex data" for particularly complicated tables --
		 (This will draw more lines: busier, but clearer.)

		 Use class="long" on table cells with paragraph-like contents
		 (This will adjust text alignment accordingly.)
		 Alternately use class="longlastcol" on tables, to have the last column assume "long".
	*/

	table {
		word-wrap: normal;
		overflow-wrap: normal;
		hyphens: manual;
	}

	table.data,
	table.index {
		margin: 1em auto;
		border-collapse: collapse;
		border: hidden;
		width: 100%;
	}
	table.data caption,
	table.index caption {
		max-width: 50em;
		margin: 0 auto 1em;
	}

	table.data td,  table.data th,
	table.index td, table.index th {
		padding: 0.5em 1em;
		border-width: 1px;
		border-color: silver;
		border-top-style: solid;
	}

	table.data thead td:empty {
		padding: 0;
		border: 0;
	}

	table.data  thead,
	table.index thead,
	table.data  tbody,
	table.index tbody {
		border-bottom: 2px solid;
	}

	table.data colgroup,
	table.index colgroup {
		border-left: 2px solid;
	}

	table.data  tbody th:first-child,
	table.index tbody th:first-child  {
		border-right: 2px solid;
		border-top: 1px solid silver;
		padding-right: 1em;
	}

	table.data th[colspan],
	table.data td[colspan] {
		text-align: center;
	}

	table.complex.data th,
	table.complex.data td {
		border: 1px solid silver;
		text-align: center;
	}

	table.data.longlastcol td:last-child,
	table.data td.long {
	 vertical-align: baseline;
	 text-align: left;
	}

	table.data img {
		vertical-align: middle;
	}


/*
Alternate table alignment rules

	table.data,
	table.index {
		text-align: center;
	}

	table.data  thead th[scope="row"],
	table.index thead th[scope="row"] {
		text-align: right;
	}

	table.data  tbody th:first-child,
	table.index tbody th:first-child  {
		text-align: right;
	}

Possible extra rowspan handling

	table.data  tbody th[rowspan]:not([rowspan='1']),
	table.index tbody th[rowspan]:not([rowspan='1']),
	table.data  tbody td[rowspan]:not([rowspan='1']),
	table.index tbody td[rowspan]:not([rowspan='1']) {
		border-left: 1px solid silver;
	}

	table.data  tbody th[rowspan]:first-child,
	table.index tbody th[rowspan]:first-child,
	table.data  tbody td[rowspan]:first-child,
	table.index tbody td[rowspan]:first-child{
		border-left: 0;
		border-right: 1px solid silver;
	}
*/

/******************************************************************************/
/*                                  Indices                                   */
/******************************************************************************/


/** Table of Contents *********************************************************/

	.toc a {
		/* More spacing; use padding to make it part of the click target. */
		padding-top: 0.1rem;
		/* Larger, more consistently-sized click target */
		display: block;
		/* Reverse color scheme */
		color: black;
		border-color: #3980B5;
		border-bottom-width: 3px !important;
		margin-bottom: 0px !important;
	}
	.toc a:visited {
		border-color: #054572;
	}
	.toc a:not(:focus):not(:hover) {
		/* Allow colors to cascade through from link styling */
		border-bottom-color: transparent;
	}

	.toc, .toc ol, .toc ul, .toc li {
		list-style: none; /* Numbers must be inlined into source */
		/* because generated content isn't search/selectable and markers can't do multilevel yet */
		margin:  0;
		padding: 0;
		line-height: 1.1rem; /* consistent spacing */
	}

	/* ToC not indented until third level, but font style & margins show hierarchy */
	.toc > li             { font-weight: bold;   }
	.toc > li li          { font-weight: normal; }
	.toc > li li li       { font-size:   95%;    }
	.toc > li li li li    { font-size:   90%;    }
	.toc > li li li li .secno { font-size: 85%; }
	.toc > li li li li li { font-size:   85%;    }
	.toc > li li li li li .secno { font-size: 100%; }

	/* @supports not (display:grid) { */
		.toc > li             { margin: 1.5rem 0;    }
		.toc > li li          { margin: 0.3rem 0;    }
		.toc > li li li       { margin-left: 2rem;   }

		/* Section numbers in a column of their own */
		.toc .secno {
			float: left;
			width: 4rem;
			white-space: nowrap;
		}

		.toc li {
			clear: both;
		}

		:not(li) > .toc              { margin-left:  5rem; }
		.toc .secno                  { margin-left: -5rem; }
		.toc > li li li .secno       { margin-left: -7rem; }
		.toc > li li li li .secno    { margin-left: -9rem; }
		.toc > li li li li li .secno { margin-left: -11rem; }

		/* Tighten up indentation in narrow ToCs */
		@media (max-width: 30em) {
			:not(li) > .toc              { margin-left:  4rem; }
			.toc .secno                  { margin-left: -4rem; }
			.toc > li li li              { margin-left:  1rem; }
			.toc > li li li .secno       { margin-left: -5rem; }
			.toc > li li li li .secno    { margin-left: -6rem; }
			.toc > li li li li li .secno { margin-left: -7rem; }
		}
	/* } */

	@supports (display:grid) {
		/* Use #toc over .toc to override non-@supports rules. */
		#toc {
			display: grid;
			align-content: start;
			grid-template-columns: auto 1fr;
			grid-column-gap: 1rem;
			column-gap: 1rem;
			grid-row-gap: .6rem;
			row-gap: .6rem;
		}
		#toc h2 {
			grid-column: 1 / -1;
			margin-bottom: 0;
		}
		#toc ol,
		#toc li,
		#toc a {
			display: contents;
			/* Switch <a> to subgrid when supported */
		}
		#toc span {
			margin: 0;
		}
		#toc > .toc > li > a > span {
			/* The spans of the top-level list,
			   comprising the first items of each top-level section. */
			margin-top: 1.1rem;
		}
		#toc#toc .secno { /* Ugh, need more specificity to override base.css */
			grid-column: 1;
			width: auto;
			margin-left: 0;
		}
		#toc .content {
			grid-column: 2;
			width: auto;
			margin-right: 1rem;
		}
		#toc .content:hover {
			background: rgba(75%, 75%, 75%, .25);
			border-bottom: 3px solid #054572;
			margin-bottom: -3px;
		}
		#toc li li li .content {
			margin-left: 1rem;
		}
		#toc li li li li .content {
			margin-left: 2rem;
		}
	}


/** Index *********************************************************************/

	/* Index Lists: Layout */
	ul.index       { margin-left: 0; columns: 15em; text-indent: 1em hanging; }
	ul.index li    { margin-left: 0; list-style: none; break-inside: avoid; }
	ul.index li li { margin-left: 1em }
	ul.index dl    { margin-top: 0; }
	ul.index dt    { margin: .2em 0 .2em 20px;}
	ul.index dd    { margin: .2em 0 .2em 40px;}
	/* Index Lists: Typography */
	ul.index ul,
	ul.index dl { font-size: smaller; }
	@media not print {
		ul.index li span {
			white-space: nowrap;
			color: transparent; }
		ul.index li a:hover + span,
		ul.index li a:focus + span {
			color: #707070;
		}
	}

/** Index Tables *****************************************************/
	/* See also the data table styling section, which this effectively subclasses */

	table.index {
		font-size: small;
		border-collapse: collapse;
		border-spacing: 0;
		text-align: left;
		margin: 1em 0;
	}

	table.index td,
	table.index th {
		padding: 0.4em;
	}

	table.index tr:hover td:not([rowspan]),
	table.index tr:hover th:not([rowspan]) {
		background: #f7f8f9;
	}

	/* The link in the first column in the property table (formerly a TD) */
	table.index th:first-child a {
		font-weight: bold;
	}

/******************************************************************************/
/*                                    Print                                   */
/******************************************************************************/

	@media print {
		/* Pages have their own margins. */
		html {
			margin: 0;
		}
		/* Serif for print. */
		body {
			font-family: serif;
		}
	}
	@page {
		margin: 1.5cm 1.1cm;
	}

/******************************************************************************/
/*                                    Legacy                                  */
/******************************************************************************/

	/* This rule is inherited from past style sheets. No idea what it's for. */
	.hide { display: none }



/******************************************************************************/
/*                             Overflow Control                               */
/******************************************************************************/

	.figure .caption, .sidefigure .caption, figcaption {
		/* in case figure is overlarge, limit caption to 50em */
		max-width: 50rem;
		margin-left: auto;
		margin-right: auto;
	}
	.overlarge > table {
		/* limit preferred width of table */
		max-width: 50em;
		margin-left: auto;
		margin-right: auto;
	}

	@media (min-width: 55em) {
		.overlarge {
			margin-left: calc(13px + 26.5rem - 50vw);
			margin-right: calc(13px + 26.5rem - 50vw);
			max-width: none;
		}
	}
	@media screen and (min-width: 78em) {
		body:not(.toc-inline) .overlarge {
			/* 30.5em body padding 50em content area */
			margin-left: calc(40em - 50vw) !important;
			margin-right: calc(40em - 50vw) !important;
		}
	}
	@media screen and (min-width: 90em) {
		body:not(.toc-inline) .overlarge {
			/* 4em html margin 30.5em body padding 50em content area */
			margin-left: 0 !important;
			margin-right: calc(84.5em - 100vw) !important;
		}
	}

	@media not print {
		.overlarge {
			overflow-x: auto;
			/* See Lea Verou's explanation background-attachment:
			 * http://lea.verou.me/2012/04/background-attachment-local/
			 *
			background: top left  / 4em 100% linear-gradient(to right,  #ffffff, rgba(255, 255, 255, 0)) local,
			            top right / 4em 100% linear-gradient(to left, #ffffff, rgba(255, 255, 255, 0)) local,
			            top left  / 1em 100% linear-gradient(to right,  #c3c3c5, rgba(195, 195, 197, 0)) scroll,
			            top right / 1em 100% linear-gradient(to left, #c3c3c5, rgba(195, 195, 197, 0)) scroll,
			            white;
			background-repeat: no-repeat;
			*/
		}
	}
</style>
  <meta content="Bikeshed version f9fa604b61e5fc96edf5cdebd2c04e0e69b33a7b" name="generator">
  <link href="https://interactiveadvertisingbureau.github.io/SIVIC/" rel="canonical">
<style>/* style-md-lists */

/* This is a weird hack for me not yet following the commonmark spec
   regarding paragraph and lists. */
[data-md] > :first-child {
    margin-top: 0;
}
[data-md] > :last-child {
    margin-bottom: 0;
}</style>
<style>/* style-selflinks */

.heading, .issue, .note, .example, li, dt {
    position: relative;
}
a.self-link {
    position: absolute;
    top: 0;
    left: calc(-1 * (3.5rem - 26px));
    width: calc(3.5rem - 26px);
    height: 2em;
    text-align: center;
    border: none;
    transition: opacity .2s;
    opacity: .5;
}
a.self-link:hover {
    opacity: 1;
}
.heading > a.self-link {
    font-size: 83%;
}
li > a.self-link {
    left: calc(-1 * (3.5rem - 26px) - 2em);
}
dfn > a.self-link {
    top: auto;
    left: auto;
    opacity: 0;
    width: 1.5em;
    height: 1.5em;
    background: gray;
    color: white;
    font-style: normal;
    transition: opacity .2s, background-color .2s, color .2s;
}
dfn:hover > a.self-link {
    opacity: 1;
}
dfn > a.self-link:hover {
    color: black;
}

a.self-link::before            { content: "¶"; }
.heading > a.self-link::before { content: "§"; }
dfn > a.self-link::before      { content: "#"; }</style>
<style>/* style-counters */

body {
    counter-reset: example figure issue;
}
.issue {
    counter-increment: issue;
}
.issue:not(.no-marker)::before {
    content: "Issue " counter(issue);
}

.example {
    counter-increment: example;
}
.example:not(.no-marker)::before {
    content: "Example " counter(example);
}
.invalid.example:not(.no-marker)::before,
.illegal.example:not(.no-marker)::before {
    content: "Invalid Example" counter(example);
}

figcaption {
    counter-increment: figure;
}
figcaption:not(.no-marker)::before {
    content: "Figure " counter(figure) " ";
}</style>
<style>/* style-var-click-highlighting */

    var { cursor: pointer; }
    var.selected0 { background-color: #F4D200; box-shadow: 0 0 0 2px #F4D200; }
    var.selected1 { background-color: #FF87A2; box-shadow: 0 0 0 2px #FF87A2; }
    var.selected2 { background-color: #96E885; box-shadow: 0 0 0 2px #96E885; }
    var.selected3 { background-color: #3EEED2; box-shadow: 0 0 0 2px #3EEED2; }
    var.selected4 { background-color: #EACFB6; box-shadow: 0 0 0 2px #EACFB6; }
    var.selected5 { background-color: #82DDFF; box-shadow: 0 0 0 2px #82DDFF; }
    var.selected6 { background-color: #FFBCF2; box-shadow: 0 0 0 2px #FFBCF2; }
    </style>
<style>/* style-autolinks */

.css.css, .property.property, .descriptor.descriptor {
    color: #005a9c;
    font-size: inherit;
    font-family: inherit;
}
.css::before, .property::before, .descriptor::before {
    content: "‘";
}
.css::after, .property::after, .descriptor::after {
    content: "’";
}
.property, .descriptor {
    /* Don't wrap property and descriptor names */
    white-space: nowrap;
}
.type { /* CSS value <type> */
    font-style: italic;
}
pre .property::before, pre .property::after {
    content: "";
}
[data-link-type="property"]::before,
[data-link-type="propdesc"]::before,
[data-link-type="descriptor"]::before,
[data-link-type="value"]::before,
[data-link-type="function"]::before,
[data-link-type="at-rule"]::before,
[data-link-type="selector"]::before,
[data-link-type="maybe"]::before {
    content: "‘";
}
[data-link-type="property"]::after,
[data-link-type="propdesc"]::after,
[data-link-type="descriptor"]::after,
[data-link-type="value"]::after,
[data-link-type="function"]::after,
[data-link-type="at-rule"]::after,
[data-link-type="selector"]::after,
[data-link-type="maybe"]::after {
    content: "’";
}

[data-link-type].production::before,
[data-link-type].production::after,
.prod [data-link-type]::before,
.prod [data-link-type]::after {
    content: "";
}

[data-link-type=element],
[data-link-type=element-attr] {
    font-family: Menlo, Consolas, "DejaVu Sans Mono", monospace;
    font-size: .9em;
}
[data-link-type=element]::before { content: "<" }
[data-link-type=element]::after  { content: ">" }

[data-link-type=biblio] {
    white-space: pre;
}</style>
<style>/* style-dfn-panel */

.dfn-panel {
    position: absolute;
    z-index: 35;
    height: auto;
    width: -webkit-fit-content;
    width: fit-content;
    max-width: 300px;
    max-height: 500px;
    overflow: auto;
    padding: 0.5em 0.75em;
    font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
    background: #DDDDDD;
    color: black;
    border: outset 0.2em;
}
.dfn-panel:not(.on) { display: none; }
.dfn-panel * { margin: 0; padding: 0; text-indent: 0; }
.dfn-panel > b { display: block; }
.dfn-panel a { color: black; }
.dfn-panel a:not(:hover) { text-decoration: none !important; border-bottom: none !important; }
.dfn-panel > b + b { margin-top: 0.25em; }
.dfn-panel ul { padding: 0; }
.dfn-panel li { list-style: inside; }
.dfn-panel.activated {
    display: inline-block;
    position: fixed;
    left: .5em;
    bottom: 2em;
    margin: 0 auto;
    max-width: calc(100vw - 1.5em - .4em - .5em);
    max-height: 30vh;
}

.dfn-paneled { cursor: pointer; }
</style>
<style>/* style-syntax-highlighting */
pre.idl.highlight { color: #708090; }
.highlight:not(.idl) { background: hsl(24, 20%, 95%); }
code.highlight { padding: .1em; border-radius: .3em; }
pre.highlight, pre > code.highlight { display: block; padding: 1em; margin: .5em 0; overflow: auto; border-radius: 0; }
c-[a] { color: #990055 } /* Keyword.Declaration */
c-[b] { color: #990055 } /* Keyword.Type */
c-[c] { color: #708090 } /* Comment */
c-[d] { color: #708090 } /* Comment.Multiline */
c-[e] { color: #0077aa } /* Name.Attribute */
c-[f] { color: #669900 } /* Name.Tag */
c-[g] { color: #222222 } /* Name.Variable */
c-[k] { color: #990055 } /* Keyword */
c-[l] { color: #000000 } /* Literal */
c-[m] { color: #000000 } /* Literal.Number */
c-[n] { color: #0077aa } /* Name */
c-[o] { color: #999999 } /* Operator */
c-[p] { color: #999999 } /* Punctuation */
c-[s] { color: #a67f59 } /* Literal.String */
c-[t] { color: #a67f59 } /* Literal.String.Single */
c-[u] { color: #a67f59 } /* Literal.String.Double */
c-[cp] { color: #708090 } /* Comment.Preproc */
c-[c1] { color: #708090 } /* Comment.Single */
c-[cs] { color: #708090 } /* Comment.Special */
c-[kc] { color: #990055 } /* Keyword.Constant */
c-[kn] { color: #990055 } /* Keyword.Namespace */
c-[kp] { color: #990055 } /* Keyword.Pseudo */
c-[kr] { color: #990055 } /* Keyword.Reserved */
c-[ld] { color: #000000 } /* Literal.Date */
c-[nc] { color: #0077aa } /* Name.Class */
c-[no] { color: #0077aa } /* Name.Constant */
c-[nd] { color: #0077aa } /* Name.Decorator */
c-[ni] { color: #0077aa } /* Name.Entity */
c-[ne] { color: #0077aa } /* Name.Exception */
c-[nf] { color: #0077aa } /* Name.Function */
c-[nl] { color: #0077aa } /* Name.Label */
c-[nn] { color: #0077aa } /* Name.Namespace */
c-[py] { color: #0077aa } /* Name.Property */
c-[ow] { color: #999999 } /* Operator.Word */
c-[mb] { color: #000000 } /* Literal.Number.Bin */
c-[mf] { color: #000000 } /* Literal.Number.Float */
c-[mh] { color: #000000 } /* Literal.Number.Hex */
c-[mi] { color: #000000 } /* Literal.Number.Integer */
c-[mo] { color: #000000 } /* Literal.Number.Oct */
c-[sb] { color: #a67f59 } /* Literal.String.Backtick */
c-[sc] { color: #a67f59 } /* Literal.String.Char */
c-[sd] { color: #a67f59 } /* Literal.String.Doc */
c-[se] { color: #a67f59 } /* Literal.String.Escape */
c-[sh] { color: #a67f59 } /* Literal.String.Heredoc */
c-[si] { color: #a67f59 } /* Literal.String.Interpol */
c-[sx] { color: #a67f59 } /* Literal.String.Other */
c-[sr] { color: #a67f59 } /* Literal.String.Regex */
c-[ss] { color: #a67f59 } /* Literal.String.Symbol */
c-[vc] { color: #0077aa } /* Name.Variable.Class */
c-[vg] { color: #0077aa } /* Name.Variable.Global */
c-[vi] { color: #0077aa } /* Name.Variable.Instance */
c-[il] { color: #000000 } /* Literal.Number.Integer.Long */
</style>
 <body class="h-entry">
  <div class="head">
   <p data-fill-with="logo"></p>
   <h1 class="p-name no-ref" id="title">Secure Interface for Video Interactive Creative (SIVIC)</h1>
   <h2 class="no-num no-toc no-ref heading settled" id="subtitle"><span class="content">Living Standard, <time class="dt-updated" datetime="2018-12-04">4 December 2018</time></span></h2>
   <div data-fill-with="spec-metadata">
    <dl>
     <dt>This version:
     <dd><a class="u-url" href="https://interactiveadvertisingbureau.github.io/SIVIC/">https://interactiveadvertisingbureau.github.io/SIVIC/</a>
     <dt>Issue Tracking:
     <dd><a href="https://github.com/InteractiveAdvertisingBureau/SIVIC/issues/">GitHub</a>
     <dd><a href="#issues-index">Inline In Spec</a>
     <dt class="editor">Editor:
     <dd class="editor p-author h-card vcard"><a class="p-name fn u-email email" href="mailto:pieter.mees@zentrick.com">Pieter Mees</a> (<span class="p-org org">Zentrick</span>)
    </dl>
   </div>
   <div data-fill-with="warning"></div>
   <p class="copyright" data-fill-with="copyright"><a href="http://creativecommons.org/publicdomain/zero/1.0/" rel="license"><img alt="CC0" src="https://licensebuttons.net/p/zero/1.0/80x15.png"></a> To the extent possible under law, the editors have waived all copyright
and related or neighboring rights to this work.
In addition, as of 4 December 2018,
the editors have made this specification available under the <a href="http://www.openwebfoundation.org/legal/the-owf-1-0-agreements/owfa-1-0" rel="license">Open Web Foundation Agreement Version 1.0</a>,
which is available at http://www.openwebfoundation.org/legal/the-owf-1-0-agreements/owfa-1-0.
Parts of this work may be from another specification document.  If so, those parts are instead covered by the license of that specification document. </p>
   <hr title="Separator for header">
  </div>
  <div class="p-summary" data-fill-with="abstract">
   <h2 class="no-num no-toc no-ref heading settled" id="abstract"><span class="content">Abstract</span></h2>
   <p>Establishes a common communication protocol between video players and executable ad units, providing rich ad experiences for viewers.</p>
  </div>
  <div data-fill-with="at-risk"></div>
  <nav data-fill-with="table-of-contents" id="toc">
   <h2 class="no-num no-toc no-ref" id="contents">Table of Contents</h2>
   <ol class="toc" role="directory">
    <li><a href="#version-number"><span class="secno">1</span> <span class="content">Version</span></a>
    <li><a href="#exec-summary"><span class="secno">2</span> <span class="content">Executive Summary</span></a>
    <li><a href="#audience"><span class="secno">3</span> <span class="content">Intended Audience</span></a>
    <li>
     <a href="#intro"><span class="secno">4</span> <span class="content">Introduction</span></a>
     <ol class="toc">
      <li><a href="#enabling-advanced-video-advertising"><span class="secno">4.1</span> <span class="content">Enabling Advanced Video Advertising</span></a>
      <li><a href="#video-ad-flow"><span class="secno">4.2</span> <span class="content">Video Ad Flow</span></a>
      <li><a href="#cross-platform"><span class="secno">4.3</span> <span class="content">Cross-Platform Support</span></a>
      <li><a href="#scope"><span class="secno">4.4</span> <span class="content">Scope and Limitation</span></a>
      <li><a href="#market-needs"><span class="secno">4.5</span> <span class="content">Market Needs</span></a>
      <li><a href="#use-cases"><span class="secno">4.6</span> <span class="content">Primary Use Cases</span></a>
      <li>
       <a href="#player-reqs"><span class="secno">4.7</span> <span class="content">Video Player Requirements</span></a>
       <ol class="toc">
        <li><a href="#displaying-creative"><span class="secno">4.7.1</span> <span class="content">Displaying Ad Unit Creative</span></a>
        <li><a href="#close-control"><span class="secno">4.7.2</span> <span class="content">Close Control</span></a>
       </ol>
      <li><a href="#ad-reqs"><span class="secno">4.8</span> <span class="content">Ad Unit Requirements</span></a>
     </ol>
    <li>
     <a href="#msg-proto"><span class="secno">5</span> <span class="content">Messaging Protocol</span></a>
     <ol class="toc">
      <li>
       <a href="#transport-layer"><span class="secno">5.1</span> <span class="content">Transport Layer</span></a>
       <ol class="toc">
        <li><a href="#postmessage-transport"><span class="secno">5.1.1</span> <span class="content"><code class="idl"><span>postMessage</span></code> Transport</span></a>
        <li><a href="###msg-serialization"><span class="secno">5.1.2</span> <span class="content">Message Serialization</span></a>
       </ol>
      <li>
       <a href="#session-layer"><span class="secno">5.2</span> <span class="content">Session Layer</span></a>
       <ol class="toc">
        <li><a href="#establish-session"><span class="secno">5.2.1</span> <span class="content">Establishing a new session</span></a>
        <li><a href="#sending-messages"><span class="secno">5.2.2</span> <span class="content">Sending messages</span></a>
        <li><a href="#receiving-messages"><span class="secno">5.2.3</span> <span class="content">Receiving messages</span></a>
       </ol>
      <li>
       <a href="##msg-struct"><span class="secno">5.3</span> <span class="content">Message Data Structure</span></a>
       <ol class="toc">
        <li><a href="###msg-proto-resolve"><span class="secno">5.3.1</span> <span class="content"><span><code>resolve</code></span> messages</span></a>
        <li><a href="###msg-proto-reject"><span class="secno">5.3.2</span> <span class="content"><span><code>reject</code></span> messages</span></a>
       </ol>
     </ol>
    <li>
     <a href="#api"><span class="secno">6</span> <span class="content">API Reference</span></a>
     <ol class="toc">
      <li>
       <a href="#vast-messages"><span class="secno">6.1</span> <span class="content">Messages corresponding to VAST tracking events</span></a>
       <ol class="toc">
        <li><a href="#vast-error"><span class="secno">6.1.1</span> <span class="content">SIVIC:Tracking:error</span></a>
        <li><a href="#other-vast-messages"><span class="secno">6.1.2</span> <span class="content">Other tracking events that must be supported</span></a>
       </ol>
      <li>
       <a href="#video-messages"><span class="secno">6.2</span> <span class="content">Messages from the video element</span></a>
       <ol class="toc">
        <li><a href="#sivic-video-durationchange"><span class="secno">6.2.1</span> <span class="content">SIVIC:Video:durationchange</span></a>
        <li><a href="#sivic-video-ended"><span class="secno">6.2.2</span> <span class="content">SIVIC:Video:ended</span></a>
        <li><a href="#sivic-video-error"><span class="secno">6.2.3</span> <span class="content">SIVIC:Video:error</span></a>
        <li><a href="#sivic-video-pause"><span class="secno">6.2.4</span> <span class="content">SIVIC:Video:pause</span></a>
        <li><a href="#sivic-video-play"><span class="secno">6.2.5</span> <span class="content">SIVIC:Video:play</span></a>
        <li><a href="#sivic-video-playing"><span class="secno">6.2.6</span> <span class="content">SIVIC:Video:playing</span></a>
        <li><a href="#sivic-video-seeked"><span class="secno">6.2.7</span> <span class="content">SIVIC:Video:seeked</span></a>
        <li><a href="#sivic-video-seeking"><span class="secno">6.2.8</span> <span class="content">SIVIC:Video:seeking</span></a>
        <li><a href="#sivic-video-timeupdate"><span class="secno">6.2.9</span> <span class="content">SIVIC:Video:timeupdate</span></a>
        <li><a href="#sivic-video-volumechange"><span class="secno">6.2.10</span> <span class="content">SIVIC:Video:volumechange</span></a>
       </ol>
      <li>
       <a href="#video-responses"><span class="secno">6.3</span> <span class="content">Responses from the video element</span></a>
       <ol class="toc">
        <li>
         <a href="#sivic-creative-getVideoState-response"><span class="secno">6.3.1</span> <span class="content">Response To SIVIC:Creative:getVideoState</span></a>
         <ol class="toc">
          <li><a href="#sivic-creative-getVideoState-resolve"><span class="secno">6.3.1.1</span> <span class="content">resolve</span></a>
         </ol>
       </ol>
      <li>
       <a href="#player-messages"><span class="secno">6.4</span> <span class="content">Messages from the player</span></a>
       <ol class="toc">
        <li><a href="#sivic-player-resize"><span class="secno">6.4.1</span> <span class="content">SIVIC:Player:resize</span></a>
        <li><a href="#sivic-player-init"><span class="secno">6.4.2</span> <span class="content">SIVIC:Player:init</span></a>
        <li><a href="#sivic-player-startCreative"><span class="secno">6.4.3</span> <span class="content">SIVIC:Player:startCreative</span></a>
        <li><a href="#sivic-player-adSkipped"><span class="secno">6.4.4</span> <span class="content">SIVIC:Player:adSkipped</span></a>
        <li><a href="#sivic-player-adStopped"><span class="secno">6.4.5</span> <span class="content">SIVIC:Player:adStopped</span></a>
        <li><a href="#sivic-player-fatalError"><span class="secno">6.4.6</span> <span class="content">SIVIC:Player:fatalError</span></a>
       </ol>
      <li>
       <a href="#player-responses"><span class="secno">6.5</span> <span class="content">Responses from the player to the creative</span></a>
       <ol class="toc">
        <li>
         <a href="#sivic-creative-requestVideoLocation-response"><span class="secno">6.5.1</span> <span class="content">Response To SIVIC:Creative:requestVideoLocation</span></a>
         <ol class="toc">
          <li><a href="#sivic-creative-requestVideoLocation-resolve"><span class="secno">6.5.1.1</span> <span class="content">resolve</span></a>
         </ol>
        <li>
         <a href="#sivic-creative-ready-response"><span class="secno">6.5.2</span> <span class="content">Response To SIVIC:Creative:ready</span></a>
         <ol class="toc">
          <li><a href="#sivic-creative-ready-resolve"><span class="secno">6.5.2.1</span> <span class="content">resolve</span></a>
          <li><a href="#sivic-creative-ready-reject"><span class="secno">6.5.2.2</span> <span class="content">reject</span></a>
         </ol>
        <li>
         <a href="#sivic-creative-requestSkip-response"><span class="secno">6.5.3</span> <span class="content">Response To SIVIC:Creative:requestSkip</span></a>
         <ol class="toc">
          <li><a href="#sivic-creative-requestSkip-resolve"><span class="secno">6.5.3.1</span> <span class="content">resolve</span></a>
          <li><a href="#sivic-creative-requestSkip-reject"><span class="secno">6.5.3.2</span> <span class="content">reject</span></a>
         </ol>
        <li>
         <a href="#sivic-creative-requestStop-response"><span class="secno">6.5.4</span> <span class="content">Response To SIVIC:Creative:requestStop</span></a>
         <ol class="toc">
          <li><a href="#sivic-creative-requestStop-resolve"><span class="secno">6.5.4.1</span> <span class="content">resolve</span></a>
          <li><a href="#sivic-creative-requestStop-reject"><span class="secno">6.5.4.2</span> <span class="content">reject</span></a>
         </ol>
        <li>
         <a href="#sivic-creative-requestPause-response"><span class="secno">6.5.5</span> <span class="content">Response To SIVIC:Creative:requestPause</span></a>
         <ol class="toc">
          <li><a href="#sivic-creative-requestPause-resolve"><span class="secno">6.5.5.1</span> <span class="content">resolve</span></a>
          <li><a href="#sivic-creative-requestPause-reject"><span class="secno">6.5.5.2</span> <span class="content">reject</span></a>
         </ol>
        <li>
         <a href="#sivic-creative-requestPlay-response"><span class="secno">6.5.6</span> <span class="content">Response To SIVIC:Creative:requestPlay</span></a>
         <ol class="toc">
          <li><a href="#sivic-creative-requestPlay-resolve"><span class="secno">6.5.6.1</span> <span class="content">resolve</span></a>
          <li><a href="#sivic-creative-requestPlay-reject"><span class="secno">6.5.6.2</span> <span class="content">reject</span></a>
         </ol>
        <li>
         <a href="#sivic-creative-requestFullscreen-response"><span class="secno">6.5.7</span> <span class="content">Response To SIVIC:Creative:requestFullscreen</span></a>
         <ol class="toc">
          <li><a href="#sivic-creative-requestFullscreen-resolve"><span class="secno">6.5.7.1</span> <span class="content">resolve</span></a>
          <li><a href="#sivic-creative-requestFullscreen-reject"><span class="secno">6.5.7.2</span> <span class="content">reject</span></a>
         </ol>
        <li>
         <a href="#sivic-creative-requestChangeVolume-response"><span class="secno">6.5.8</span> <span class="content">Response To SIVIC:Creative:requestChangeVolume</span></a>
         <ol class="toc">
          <li><a href="#sivic-creative-requestChangeVolume-resolve"><span class="secno">6.5.8.1</span> <span class="content">resolve</span></a>
          <li><a href="#sivic-creative-requestChangeVolume-reject"><span class="secno">6.5.8.2</span> <span class="content">reject</span></a>
         </ol>
        <li>
         <a href="#sivic-creative-requestResize-response"><span class="secno">6.5.9</span> <span class="content">Response To SIVIC:Creative:requestResize</span></a>
         <ol class="toc">
          <li><a href="#sivic-creative-requestResize-resolve"><span class="secno">6.5.9.1</span> <span class="content">resolve</span></a>
          <li><a href="#sivic-creative-requestResize-reject"><span class="secno">6.5.9.2</span> <span class="content">reject</span></a>
         </ol>
        <li>
         <a href="#sivic-creative-requestChangeAdDuration-response"><span class="secno">6.5.10</span> <span class="content">Response To SIVIC:Creative:requestChangeAdDuration</span></a>
         <ol class="toc">
          <li><a href="#sivic-creative-requestChangeAdDuration-resolve"><span class="secno">6.5.10.1</span> <span class="content">resolve</span></a>
          <li><a href="#sivic-creative-requestChangeAdDuration-reject"><span class="secno">6.5.10.2</span> <span class="content">reject</span></a>
         </ol>
        <li>
         <a href="#sivic-creative-reportTracking-response"><span class="secno">6.5.11</span> <span class="content">Response To SIVIC:Creative:reportTracking</span></a>
         <ol class="toc">
          <li><a href="#sivic-creative-reportTracking-resolve"><span class="secno">6.5.11.1</span> <span class="content">resolve</span></a>
          <li><a href="#sivic-creative-reportTracking-reject"><span class="secno">6.5.11.2</span> <span class="content">reject</span></a>
         </ol>
       </ol>
      <li>
       <a href="#creative-messages"><span class="secno">6.6</span> <span class="content">Messages from the Creative to the Player</span></a>
       <ol class="toc">
        <li><a href="#sivic-creative-ready"><span class="secno">6.6.1</span> <span class="content">SIVIC:Creative:ready</span></a>
        <li><a href="#sivic-creative-requestSkip"><span class="secno">6.6.2</span> <span class="content">SIVIC:Creative:requestSkip</span></a>
        <li><a href="#sivic-creative-requestStop"><span class="secno">6.6.3</span> <span class="content">SIVIC:Creative:requestStop</span></a>
        <li><a href="#sivic-creative-fatalError"><span class="secno">6.6.4</span> <span class="content">SIVIC:Creative:fatalError</span></a>
        <li><a href="#sivic-creative-requestPause"><span class="secno">6.6.5</span> <span class="content">SIVIC:Creative:requestPause</span></a>
        <li><a href="#sivic-creative-requestPlay"><span class="secno">6.6.6</span> <span class="content">SIVIC:Creative:requestPlay</span></a>
        <li><a href="#sivic-creative-requestResize"><span class="secno">6.6.7</span> <span class="content">SIVIC:Creative:requestResize</span></a>
        <li><a href="#sivic-creative-requestFullScreen"><span class="secno">6.6.8</span> <span class="content">SIVIC:Creative:requestFullScreen</span></a>
        <li><a href="#sivic-creative-requestChangeVolume"><span class="secno">6.6.9</span> <span class="content">SIVIC:Creative:requestChangeVolume</span></a>
        <li><a href="#sivic-creative-reportTracking"><span class="secno">6.6.10</span> <span class="content">SIVIC:Creative:reportTracking</span></a>
        <li><a href="#sivic-creative-requestChangeAdDuration"><span class="secno">6.6.11</span> <span class="content">SIVIC:Creative:requestChangeAdDuration</span></a>
        <li><a href="#sivic-creative-clickThru"><span class="secno">6.6.12</span> <span class="content">SIVIC:Creative:clickThru</span></a>
        <li><a href="#sivic-creative-getVideoState"><span class="secno">6.6.13</span> <span class="content">SIVIC:Creative:getVideoState</span></a>
       </ol>
      <li>
       <a href="#creative-responses"><span class="secno">6.7</span> <span class="content">Responses from the creative to the player</span></a>
       <ol class="toc">
        <li>
         <a href="#sivic-player-init-response"><span class="secno">6.7.1</span> <span class="content">Response To SIVIC:Player:init</span></a>
         <ol class="toc">
          <li><a href="#sivic-player-init-resolve"><span class="secno">6.7.1.1</span> <span class="content">resolve</span></a>
          <li><a href="#sivic-player-init-reject"><span class="secno">6.7.1.2</span> <span class="content">reject</span></a>
         </ol>
        <li>
         <a href="#sivic-player-startCreative-response"><span class="secno">6.7.2</span> <span class="content">Response To SIVIC:Player:startCreative</span></a>
         <ol class="toc">
          <li><a href="#sivic-player-startCreative-resolve"><span class="secno">6.7.2.1</span> <span class="content">resolve</span></a>
          <li><a href="#sivic-player-startCreative-reject"><span class="secno">6.7.2.2</span> <span class="content">reject</span></a>
         </ol>
        <li>
         <a href="#sivic-player-adSkipped-response"><span class="secno">6.7.3</span> <span class="content">Response To SIVIC:Player:adSkipped</span></a>
         <ol class="toc">
          <li><a href="#sivic-player-adSkipped-resolve"><span class="secno">6.7.3.1</span> <span class="content">resolve</span></a>
         </ol>
        <li>
         <a href="#sivic-player-adStopped-response"><span class="secno">6.7.4</span> <span class="content">Response To SIVIC:Player:adStopped</span></a>
         <ol class="toc">
          <li><a href="#sivic-player-adStopped-resolve"><span class="secno">6.7.4.1</span> <span class="content">resolve</span></a>
         </ol>
        <li>
         <a href="#sivic-player-fatalError-response"><span class="secno">6.7.5</span> <span class="content">Response To SIVIC:Player:fatalError</span></a>
         <ol class="toc">
          <li><a href="#sivic-player-fatalError-resolve"><span class="secno">6.7.5.1</span> <span class="content">resolve</span></a>
         </ol>
       </ol>
      <li><a href="#api-vast"><span class="secno">6.8</span> <span class="content">Referencing a SIVIC creative from VAST</span></a>
     </ol>
    <li>
     <a href="#common-workflows"><span class="secno">7</span> <span class="content">Common Workflows</span></a>
     <ol class="toc">
      <li><a href="#api-ad-loading"><span class="secno">7.1</span> <span class="content">How to Handle Ad Loading</span></a>
      <li>
       <a href="#api-ad-playback"><span class="secno">7.2</span> <span class="content">How to Handle Ad Playback</span></a>
       <ol class="toc">
        <li><a href="#api-ad-pause"><span class="secno">7.2.1</span> <span class="content">Ad Pause</span></a>
        <li><a href="#api-resizing"><span class="secno">7.2.2</span> <span class="content">Ad Resizing and Fullscreen</span></a>
       </ol>
      <li>
       <a href="#api-end"><span class="secno">7.3</span> <span class="content">How to Handle Ad End and Unload</span></a>
       <ol class="toc">
        <li><a href="#api-skip"><span class="secno">7.3.1</span> <span class="content">Ad Skips</span></a>
        <li><a href="#api-end-before-complete"><span class="secno">7.3.2</span> <span class="content">Ad Ends Before Video Completion</span></a>
        <li><a href="#api-extend"><span class="secno">7.3.3</span> <span class="content">Ad Extends Beyond Video Completion</span></a>
        <li><a href="#api-complete"><span class="secno">7.3.4</span> <span class="content">Ad Completes at Video Completion</span></a>
        <li><a href="#api-error"><span class="secno">7.3.5</span> <span class="content">Ad Errors Out</span></a>
        <li><a href="#api-notes"><span class="secno">7.3.6</span> <span class="content">Additional Notes</span></a>
       </ol>
     </ol>
    <li>
     <a href="#protocol"><span class="secno">8</span> <span class="content">Protocol Details</span></a>
     <ol class="toc">
      <li>
       <a href="#objects"><span class="secno">8.1</span> <span class="content">Objects</span></a>
       <ol class="toc">
        <li><a href="#entry-point"><span class="secno">8.1.1</span> <span class="content">Entry Point</span></a>
        <li><a href="#object-ad"><span class="secno">8.1.2</span> <span class="content">Ad Interface</span></a>
       </ol>
      <li>
       <a href="#errors"><span class="secno">8.2</span> <span class="content">Error Handling and Timeouts</span></a>
       <ol class="toc">
        <li><a href="#error-codes"><span class="secno">8.2.1</span> <span class="content">Error Codes</span></a>
       </ol>
      <li><a href="#ad-completion"><span class="secno">8.3</span> <span class="content">Ad Completion</span></a>
     </ol>
    <li><a href="#security"><span class="secno">9</span> <span class="content">Security</span></a>
    <li><a href="#examples"><span class="secno">10</span> <span class="content">Examples</span></a>
    <li><a href="#lang-specific"><span class="secno">11</span> <span class="content">Language-Specific Implementation Details</span></a>
    <li><a href="#terminology"><span class="secno">12</span> <span class="content">Terminology</span></a>
    <li><a href="#conformance"><span class="secno"></span> <span class="content"> Conformance</span></a>
    <li>
     <a href="#index"><span class="secno"></span> <span class="content">Index</span></a>
     <ol class="toc">
      <li><a href="#index-defined-here"><span class="secno"></span> <span class="content">Terms defined by this specification</span></a>
      <li><a href="#index-defined-elsewhere"><span class="secno"></span> <span class="content">Terms defined by reference</span></a>
     </ol>
    <li>
     <a href="#references"><span class="secno"></span> <span class="content">References</span></a>
     <ol class="toc">
      <li><a href="#normative"><span class="secno"></span> <span class="content">Normative References</span></a>
     </ol>
    <li><a href="#idl-index"><span class="secno"></span> <span class="content">IDL Index</span></a>
    <li><a href="#issues-index"><span class="secno"></span> <span class="content">Issues Index</span></a>
   </ol>
  </nav>
  <main>
   <h2 class="heading settled" data-level="1" id="version-number"><span class="secno">1. </span><span class="content">Version</span><a class="self-link" href="#version-number"></a></h2>
    1.0 
   <h2 class="heading settled" data-level="2" id="exec-summary"><span class="secno">2. </span><span class="content">Executive Summary</span><a class="self-link" href="#exec-summary"></a></h2>
   <p>The SIVIC standard is intended to address the original mandate of the VPAID
spec: to establish a common communication protocol between video players and ad
units that allows a single “executable ad” (one that requires software logic to
be executed as part of ad playback) to be displayed as an enhancement of
standard video advertisement, in any compliant video player, with the result
that advertisers using VPAID ads can provide rich ad experiences for viewers and
collect ad playback and interaction details that are just as rich as the ad
experience.</p>
   <p>The SIVIC revision is needed specifically to address the following concerns with
VPAID:</p>
   <ul>
    <li data-md>
     <p><strong>Publisher control:</strong> compatibility with running the interactive code in
parallel to the video rather than having the code manage the video delivery,
incorporating the following:</p>
     <ul>
      <li data-md>
       <p>VAST 4 style delivery (interactive code delivered separately from the
media file)</p>
      <li data-md>
       <p>Compatibility with server-side ad insertion, including live streams</p>
      <li data-md>
       <p>Compatibility with the need to pre-cache at least the video asset on
mobile</p>
     </ul>
    <li data-md>
     <p><strong>Security:</strong> compatibility with running in a “protected”/safe iframe and/or
being passed a proxy video object by the publisher</p>
    <li data-md>
     <p><strong>Clarity of purpose:</strong> Movement of verification and viewability codebase to a
separate codebase, either client-resident in the case of the OM SDK or a
separate call to a verification script in VAST 4.1</p>
    <li data-md>
     <p><strong>Clarity of purpose, security, performance:</strong> Unintended usage of VPAID that
is disruptive to the user experience and/or publisher operations (specifically
client-side arbitration, but other scenarios may exist)</p>
   </ul>
   <p>By specifying a separation of the video asset from the codebase, VAST 4.0 + has
already done some of the work required to resolve the issues above. The SIVIC
spec is intended to close the gaps for the purpose of enabling and reporting on
rich (interactive and dynamic) video ad experiences. Viewability and
verification will now be handled in separate standard efforts.</p>
   <p>Additionally, the new standard should support all reasonably well-adopted ad
formats currently available using VPAID.</p>
   <h2 class="heading settled" data-level="3" id="audience"><span class="secno">3. </span><span class="content">Intended Audience</span><a class="self-link" href="#audience"></a></h2>
   <p>Anyone involved in digital video advertising can benefit from being familiar
with this specification, however implementation details are targeted toward the
developers of executable video ads and of video players intended to support
interactive and/or dynamic video ads enabled by the spec. Specifically, video
software engineers and video product managers should use this document as a
guide when implementing technology designed to support SIVIC.</p>
   <h2 class="heading settled" data-level="4" id="intro"><span class="secno">4. </span><span class="content">Introduction</span><a class="self-link" href="#intro"></a></h2>
   <h3 class="heading settled" data-level="4.1" id="enabling-advanced-video-advertising"><span class="secno">4.1. </span><span class="content">Enabling Advanced Video Advertising</span><a class="self-link" href="#enabling-advanced-video-advertising"></a></h3>
   <p>Standard video ads are limited in what they can do and what they can track. They
play back linearly from start to finish and support only the tracking provided
to the publisher in advance via VAST.</p>
   <p>In cases where the player environment is capable of supporting execution of code
as part of the video playback experience, that code can be used to present the
viewer with an array of interactive and/or dynamic features, commonly including
additional video or image galleries, more detailed product information, store or
dealer locators, and audience-specific personalized elements.</p>
   <p>The SIVIC specification is intended to standardize the communication needed
between the ad player and the ad creative itself. SIVIC is similar to the VPAID
spec that preceded it in this regard.</p>
   <h3 class="heading settled" data-level="4.2" id="video-ad-flow"><span class="secno">4.2. </span><span class="content">Video Ad Flow</span><a class="self-link" href="#video-ad-flow"></a></h3>
   <p>The process of serving an ad is also more or less unchanged from the earlier
VPAID specification, with two main exceptions.</p>
   <ul>
    <li data-md>
     <p>Access to the video is no longer mediated by the code layer described in this
spec, as was the case for VPAID. Pre-caching for mobile and SSAI require
direct access to the video and this is reflected in the VAST 4.1 spec, which
now separates the video media file from the <code>InteractiveCreativeFile</code> asset.
Removing this parent-child relationship between the code and the video also no
longer allows the code to act as a gatekeeper for the video, which led to the
exploitation of VPAID for client-side arbitration.</p>
    <li data-md>
     <p>SIVIC also has to account for the SSAI use case - in this case, the video ad
is part of an ongoing video stream delivered by the publisher and the SIVIC
code is downloaded and executed on a parallel path to the stream.</p>
   </ul>
   <p><img alt="Diagram showing interaction
between video player and VPAID" src="images/vpaid-player.png" width="100%"></p>
   <p class="issue" id="issue-f49d752f"><a class="self-link" href="#issue-f49d752f"></a> the diagram above will need to be revised to account for SSAI and
non-SSAI scenarios</p>
   <h3 class="heading settled" data-level="4.3" id="cross-platform"><span class="secno">4.3. </span><span class="content">Cross-Platform Support</span><a class="self-link" href="#cross-platform"></a></h3>
   <p>As was the case with VPAID, SIVIC is designed to be a
cross-platform standard, and should be the preferred standard for enabling
advanced video creative on any device capable of supporting the execution of
ad-resident code on the device, including desktop, mobile and OTT.</p>
   <h3 class="heading settled" data-level="4.4" id="scope"><span class="secno">4.4. </span><span class="content">Scope and Limitation</span><a class="self-link" href="#scope"></a></h3>
   <p>The most important change in scope between VPAID and the SIVIC specification is
that SIVIC is now only intended to be used to support advanced video creative.
Verification and viewability are now handled by the Open Measurement spec, and
part of the rationale for revising SIVIC is clarifying and narrowing the usage
of code by ad vendors to support the publishers’ need for security and
performance. Any use of the SIVIC spec to support something other than
interactive or dynamic content within the ad unit should be by default
considered as counter to the intentions of the spec.</p>
   <p>Another out-of-scope consideration for this spec is that there may be cases
where the device is not capable or not willing to execute third-party code
alongside the video. In these cases an alternate “thin client” solution may need
to be provided using VAST or another approach, but it will not be addressed
here. An example of advanced creative supported by VAST include end cards
executed using VAST companion assets, as well as proprietary ad units developed
by several mobile SDKs to support advanced video executions in a manner that is
easily pre-cached.</p>
   <h3 class="heading settled" data-level="4.5" id="market-needs"><span class="secno">4.5. </span><span class="content">Market Needs</span><a class="self-link" href="#market-needs"></a></h3>
   <p>The VPAID spec that preceded the SIVIC spec was outlined to follow general
principles, some of which are generally accepted good design principles
(simplicity, portability, consistency) and others of which reinforce at this
point relatively well-known aspects of the relationship between the player and
the ad (the player is in control, and implements support for the full spec to
support a variety of ad units, whereas a given ad unit implements only the
aspects of the spec that it needs).</p>
   <p>In the hopes of going a bit deeper than the abstract principles underlying the
spec in this new revision, instead we reflect below the market needs driving the
replacement of VPAID with SIVIC.</p>
   <ul>
    <li data-md>
     <p>Publisher needs:</p>
     <ul>
      <li data-md>
       <p>Security</p>
      <li data-md>
       <p>Performance</p>
      <li data-md>
       <p>Low latency</p>
      <li data-md>
       <p>Protection of publisher page creative elements from ad code</p>
      <li data-md>
       <p>The minimization of errors and playback issues</p>
     </ul>
    <li data-md>
     <p>Agency/advertiser/ad platform needs:</p>
     <ul>
      <li data-md>
       <p>Maximum creative control, without interfering with publisher needs above</p>
      <li data-md>
       <p>Access to player-managed capabilities like fullscreen</p>
      <li data-md>
       <p>Ability to pass data into the creative</p>
      <li data-md>
       <p>A defined interface for communicating with elements outside the player and
ad</p>
      <li data-md>
       <p>Ability to understand playback environment/device capabilities that may be
required for creative execution</p>
      <li data-md>
       <p>The ability to correlate the measurement of interactive events with other
measurement now happening outside of VPAID (eg viewability and
verification)</p>
     </ul>
    <li data-md>
     <p>Needs of both:</p>
     <ul>
      <li data-md>
       <p>Document clarity - we should be careful to minimize any confusion about
how to implement a player or recognized ad format</p>
      <li data-md>
       <p>Position relative to other standards (VAST, OMID, etc) in any cases of
overlap or potential confusion</p>
     </ul>
   </ul>
   <h3 class="heading settled" data-level="4.6" id="use-cases"><span class="secno">4.6. </span><span class="content">Primary Use Cases</span><a class="self-link" href="#use-cases"></a></h3>
   <p>The standards revisions in this document intend to support scalable, performant
interactive video execution in the following cases</p>
   <ul>
    <li data-md>
     <p>Server-side ad insertion, with interactive creative operating in parallel to a
publisher-controlled video stream</p>
    <li data-md>
     <p>Mobile and other bandwidth-constrained scenarios that require pre-loading of
assets to enable instant playback</p>
    <li data-md>
     <p>Desktop and other playback scenarios currently executed via VPAID, with a
reduction in errors, non-standard executions, and performance and security
issues. The significant change between VPAID and SIVIC for these scenarios is
that video playback control now resides with the publisher player in all
cases.</p>
    <li data-md>
     <p>In service of all of the above, it is also understood that this version of the
SIVIC spec should be interoperable with VAST 4.1.</p>
    <li data-md>
     <p>In all cases the understanding is that the playback environment (device and
platform) support and permit the execution of code as required by SIVIC.</p>
   </ul>
   <h3 class="heading settled" data-level="4.7" id="player-reqs"><span class="secno">4.7. </span><span class="content">Video Player Requirements</span><a class="self-link" href="#player-reqs"></a></h3>
   <p>The video player must implement ad loading, check for presence of SIVIC, manage
video playback, and if present, implement the correct SIVIC version. Recovery
mechanisms should also be in place should the ad unit fail to follow specified
protocols correctly. For example, if the video player does not receive the
AdStopped event from an ad unit after sending a call to <code class="idl"><a data-link-type="idl" href="#dom-ad-stopad" id="ref-for-dom-ad-stopad">stopAd</a></code>, the video
player should be prepared to react appropriately.</p>
   <p><a href="#ad-completion">§8.3 Ad Completion</a> provides details on error handling and recommended recovery
action for specific timeout situations.</p>
   <h4 class="heading settled" data-level="4.7.1" id="displaying-creative"><span class="secno">4.7.1. </span><span class="content">Displaying Ad Unit Creative</span><a class="self-link" href="#displaying-creative"></a></h4>
   <p>The video advertising industry expects that an impression has indicated that an
ad was viewed by an end user. Therefore, the video player should ensure that no
other visual elements from the video player, the webpage, or other ads, display
over a video ad that is currently in progress.</p>
   <h4 class="heading settled" data-level="4.7.2" id="close-control"><span class="secno">4.7.2. </span><span class="content">Close Control</span><a class="self-link" href="#close-control"></a></h4>
   <p>This specification does not mandate a close control or behavior by the video ad
creative or the video player. Currently, the publisher video player is in full
control and can dismiss the video ad creative at any point in time. The video
ad creative can also dismiss itself at any point in time. Some implementations
may have a publisher provided close control and others may not. Video ad
creatives may opt to show its own close control. Video ad creatives and
video players should ensure that consumers are presented with a good ad
experience.</p>
   <h3 class="heading settled" data-level="4.8" id="ad-reqs"><span class="secno">4.8. </span><span class="content">Ad Unit Requirements</span><a class="self-link" href="#ad-reqs"></a></h3>
   <p>If the ad unit implements SIVIC, it must indicate the correct version. The ad
unit must implement all methods and properties listed, but can either decline
from responding or returning a value that indicates that the method or property
is not supported.</p>
   <p>The ad unit should never allow uncaught exceptions to be thrown during calls
into SIVIC from the video player. See Implementation sections for more specific
requirements.</p>
   <h2 class="heading settled" data-level="5" id="msg-proto"><span class="secno">5. </span><span class="content">Messaging Protocol</span><a class="self-link" href="#msg-proto"></a></h2>
   <p>To facilitate asynchronous communication between the video player and the SIVIC
creative, we employ a messaging protocol.</p>
   <p>The protocol defines both the data structure of messages exchanged by both
parties and the algorithms needed to reliably handle the exchange of these
messages.</p>
   <p>The protocol is designed to be easily implemented on top of the <code class="idl"><a data-link-type="idl">postMessage</a></code> interface, available across <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#the-iframe-element" id="ref-for-the-iframe-element">iframe</a></code> elements which are
used to isolate the SIVIC ad from the video player.</p>
   <p class="issue" id="issue-a2fd907b"><a class="self-link" href="#issue-a2fd907b"></a> add link to final location of reference implementation</p>
   <h3 class="heading settled" data-level="5.1" id="transport-layer"><span class="secno">5.1. </span><span class="content">Transport Layer</span><a class="self-link" href="#transport-layer"></a></h3>
   <p>A <dfn class="dfn-paneled" data-dfn-for="message" data-dfn-type="dfn" data-noexport id="message-transport">transport</dfn> is a communication mechanism that can send <a data-link-type="dfn" href="#message-serialized-message" id="ref-for-message-serialized-message">serialized messages</a> between two parties. In SIVIC’s case those are the video
player and the creative.</p>
   <p>A <dfn class="dfn-paneled" data-dfn-for="message" data-dfn-type="dfn" data-noexport id="message-serialized-message">serialized message</dfn> is a text string that one of the
parties, the <dfn class="dfn-paneled" data-dfn-for="message" data-dfn-type="dfn" data-noexport id="message-sender">sender</dfn>, forwards to the other party, the <dfn class="dfn-paneled" data-dfn-for="message" data-dfn-type="dfn" data-noexport id="message-receiver">receiver</dfn>, through the <a data-link-type="dfn" href="#message-transport" id="ref-for-message-transport">transport</a>.</p>
   <p>The <a data-link-type="dfn" href="#message-transport" id="ref-for-message-transport①">transport</a> must guarantee the following <dfn class="dfn-paneled" data-dfn-for="message/transport" data-dfn-type="dfn" data-noexport id="message-transport-properties">properties</dfn>:</p>
   <ul>
    <li data-md>
     <p>It must guarantee that both parties of the channel are unambiguously defined,
and that only those two parties observe any <a data-link-type="dfn" href="#message-serialized-message" id="ref-for-message-serialized-message①">serialized messages</a> sent by
either of them.</p>
    <li data-md>
     <p>It must guarantee that all <a data-link-type="dfn" href="#message-serialized-message" id="ref-for-message-serialized-message②">serialized messages</a> eventually get delivered to
the other party.</p>
    <li data-md>
     <p>It must guarantee that the <a data-link-type="dfn" href="#message-serialized-message" id="ref-for-message-serialized-message③">serialized messages</a> are delivered intact,
without any modifications.</p>
    <li data-md>
     <p>It must guarantee that all <a data-link-type="dfn" href="#message-serialized-message" id="ref-for-message-serialized-message④">serialized messages</a> are delivered in the order
that they were sent by the sender.</p>
   </ul>
   <p>The <a data-link-type="dfn" href="#message-transport" id="ref-for-message-transport②">transport</a> is not required to deliver <a data-link-type="dfn" href="#message-serialized-message" id="ref-for-message-serialized-message⑤">serialized messages</a> synchronously, but it should make a best effort to deliver them as soon as
possible.</p>
   <p class="note" role="note"><span>Note:</span> This means that a <a data-link-type="dfn" href="#message-sender" id="ref-for-message-sender">sender</a> can not assume that a message is
delivered to the <a data-link-type="dfn" href="#message-receiver" id="ref-for-message-receiver">receiver</a> unless the <a data-link-type="dfn" href="#message-receiver" id="ref-for-message-receiver①">receiver</a> sends a
message back that acknowledges receipt. It also means that exceptions on the <a data-link-type="dfn" href="#message-receiver" id="ref-for-message-receiver②">receiver’s</a> side can’t be caught by the <a data-link-type="dfn" href="#message-sender" id="ref-for-message-sender①">sender</a> unless
the <a data-link-type="dfn" href="#message-receiver" id="ref-for-message-receiver③">receiver</a> explicitly sends a message back to the <a data-link-type="dfn" href="#message-sender" id="ref-for-message-sender②">sender</a> with the exception.</p>
   <h4 class="heading settled" data-level="5.1.1" id="postmessage-transport"><span class="secno">5.1.1. </span><span class="content"><code class="idl"><a data-link-type="idl">postMessage</a></code> Transport</span><a class="self-link" href="#postmessage-transport"></a></h4>
   <p>Unless otherwise negotiated by both parties, in SIVIC the video player and
creative will use the <code class="idl"><a data-link-type="idl">postMessage</a></code> API as their <a data-link-type="dfn" href="#message-transport" id="ref-for-message-transport③">transport</a> across the <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#the-iframe-element" id="ref-for-the-iframe-element①">iframe</a></code> boundary separating them.</p>
   <p>The <code class="idl"><a data-link-type="idl">postMessage</a></code> API conforms to the required <a data-link-type="dfn" href="#message-transport-properties" id="ref-for-message-transport-properties">properties</a> of a <a data-link-type="dfn" href="#message-transport" id="ref-for-message-transport④">transport</a>.</p>
   <h4 class="heading settled" data-level="5.1.2" id="##msg-serialization"><span class="secno">5.1.2. </span><span class="content">Message Serialization</span><a class="self-link" href="#%23%23msg-serialization"></a></h4>
   <p>To <dfn data-dfn-for="message" data-dfn-type="dfn" data-noexport id="message-serialize">serialize<a class="self-link" href="#message-serialize"></a></dfn> a <code class="idl"><a data-link-type="idl" href="#dictdef-message" id="ref-for-dictdef-message">Message</a></code> to a <a data-link-type="dfn" href="#message-serialized-message" id="ref-for-message-serialized-message⑥">serialized message</a>,
apply <code>JSON.stringify</code> to the <code class="idl"><a data-link-type="idl" href="#dictdef-message" id="ref-for-dictdef-message①">Message</a></code> data structure. The resulting <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#idl-DOMString" id="ref-for-idl-DOMString">DOMString</a></code> represents the <a data-link-type="dfn" href="#message-serialized-message" id="ref-for-message-serialized-message⑦">serialized message</a>.</p>
   <p>To <dfn class="dfn-paneled" data-dfn-for="message" data-dfn-type="dfn" data-noexport id="message-deserialize">deserialize</dfn> a <a data-link-type="dfn" href="#message-serialized-message" id="ref-for-message-serialized-message⑧">serialized message</a> to a <code class="idl"><a data-link-type="idl" href="#dictdef-message" id="ref-for-dictdef-message②">Message</a></code> data structure, apply <code>JSON.parse</code> to the <a data-link-type="dfn" href="#message-serialized-message" id="ref-for-message-serialized-message⑨">serialized message</a>.
The resulting <code class="idl"><a data-link-type="idl">Object</a></code> has the <code class="idl"><a data-link-type="idl" href="#dictdef-message" id="ref-for-dictdef-message③">Message</a></code> data structure.</p>
   <p>The <a data-link-type="dfn" href="#message-sender" id="ref-for-message-sender③">sender</a> should not transmit any <a data-link-type="dfn" href="#message-serialized-message" id="ref-for-message-serialized-message①⓪">serialized messages</a> that
cannot be correctly <a data-link-type="dfn" href="#message-deserialize" id="ref-for-message-deserialize">deserialized</a> by the <a data-link-type="dfn" href="#message-receiver" id="ref-for-message-receiver④">receiver</a>.</p>
   <p>The <a data-link-type="dfn" href="#message-receiver" id="ref-for-message-receiver⑤">receiver</a> should discard and ignore any <a data-link-type="dfn" href="#message-serialized-message" id="ref-for-message-serialized-message①①">serialized messages</a> that it cannot correctly <a data-link-type="dfn" href="#message-deserialize" id="ref-for-message-deserialize①">deserialize</a>.</p>
   <h3 class="heading settled" data-level="5.2" id="session-layer"><span class="secno">5.2. </span><span class="content">Session Layer</span><a class="self-link" href="#session-layer"></a></h3>
   <p>Multiple <dfn class="dfn-paneled" data-dfn-for="message" data-dfn-type="dfn" data-noexport id="message-sessions">sessions</dfn> maybe active over a single <a data-link-type="dfn" href="#message-transport" id="ref-for-message-transport⑤">transport</a> at any given time.</p>
   <p>A <a data-link-type="dfn" href="#message-sessions" id="ref-for-message-sessions">session</a> is uniquely identified by a <dfn class="dfn-paneled" data-dfn-for="message" data-dfn-type="dfn" data-lt="session identifier" data-noexport id="message-session-identifier">session
identifier</dfn>. All messages belonging to a <a data-link-type="dfn" href="#message-sessions" id="ref-for-message-sessions①">session</a> <em>must</em> reference the same <a data-link-type="dfn" href="#message-session-identifier" id="ref-for-message-session-identifier">session identifier</a>.</p>
   <h4 class="heading settled" data-level="5.2.1" id="establish-session"><span class="secno">5.2.1. </span><span class="content">Establishing a new session</span><a class="self-link" href="#establish-session"></a></h4>
   <p>A <a data-link-type="dfn" href="#message-sessions" id="ref-for-message-sessions②">session</a> is established by running the <a data-link-type="dfn" href="#message-establish-a-new-session" id="ref-for-message-establish-a-new-session">establish a new session</a> algorithm.</p>
   <section class="algorithm" data-algorithm="to establish a new session">
    <p>To <dfn class="dfn-paneled" data-dfn-for="message" data-dfn-type="dfn" data-noexport id="message-establish-a-new-session">establish a new session</dfn>, you <em>must</em> run the
following steps:</p>
    <dl>
     <dt data-md>Input
     <dd data-md>
      <p>none</p>
     <dt data-md>Output
     <dd data-md>
      <p><var>sessionIdPromise</var>, a <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#idl-promise" id="ref-for-idl-promise">Promise</a></code> that will resolve to a <a data-link-type="dfn" href="#message-session-identifier" id="ref-for-message-session-identifier①">session identifier</a></p>
    </dl>
    <ol>
     <li data-md>
      <p>Let <var>sessionId</var> be a new <a data-link-type="dfn" href="#message-session-identifier" id="ref-for-message-session-identifier②">session identifier</a>.</p>
    </ol>
    <p><strong class="advisement"> It is recommended to use a UUID for the <a data-link-type="dfn" href="#message-session-identifier" id="ref-for-message-session-identifier③">session
identifier</a>.</strong></p>
    <ol start="2">
     <li data-md>
      <p>Let <var>type</var> be <code>createSession</code>.</p>
     <li data-md>
      <p>Let <var>args</var> be <code>undefined</code>.</p>
     <li data-md>
      <p>Let <var>sessionIdPromise</var> be a new unresolved <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#idl-promise" id="ref-for-idl-promise①">Promise</a></code>.</p>
     <li data-md>
      <p>Start the <a data-link-type="dfn" href="#message-send-an-acknowledgement-message" id="ref-for-message-send-an-acknowledgement-message">send an acknowledgement message</a> algorithm with <var>sessionId</var>, <var>type</var> and <var>args</var>. Let <var>ackPromise</var> be the return value.</p>
     <li data-md>
      <p>Return <var>sessionIdPromise</var>.</p>
     <li data-md>
      <p>When <var>ackPromise</var> resolves:</p>
      <ul>
       <li data-md>
        <p>If it is fulfilled, then resolve <var>sessionIdPromise</var> with <var>sessionId</var>.</p>
       <li data-md>
        <p>If it is rejected with <var>error</var>, then reject <var>sessionIdPromise</var> with <var>error</var>.</p>
      </ul>
    </ol>
   </section>
   <h4 class="heading settled" data-level="5.2.2" id="sending-messages"><span class="secno">5.2.2. </span><span class="content">Sending messages</span><a class="self-link" href="#sending-messages"></a></h4>
   <p>To send a message through a <a data-link-type="dfn" href="#message-sessions" id="ref-for-message-sessions③">session</a>, run the <a data-link-type="dfn" href="#message-send-a-message" id="ref-for-message-send-a-message">send a message</a> algorithm.</p>
   <section class="algorithm" data-algorithm="to send a message">
    <p>To <dfn class="dfn-paneled" data-dfn-for="message" data-dfn-type="dfn" data-noexport id="message-send-a-message">send a message</dfn>, you <em>must</em> run the following
steps:</p>
    <dl>
     <dt data-md>Input
     <dd data-md>
      <p><var>sessionId</var>, a <a data-link-type="dfn" href="#message-session-identifier" id="ref-for-message-session-identifier④">session identifier</a></p>
     <dd data-md>
      <p><var>type</var>, a <a data-link-type="dfn">message type</a></p>
     <dd data-md>
      <p><var>args</var>, an optional object to be submitted with the message</p>
     <dt data-md>Output
     <dd data-md>
      <p><var>messageId</var>, a <a data-link-type="dfn">message identifier</a></p>
    </dl>
    <ol>
     <li data-md>
      <p>Let <var>messageId</var> be</p>
      <ul>
       <li data-md>
        <p><code>0</code>, if this is the first message in the <a data-link-type="dfn" href="#message-sessions" id="ref-for-message-sessions④">session</a> identified
 by <var>sessionId</var>.</p>
       <li data-md>
        <p><var>messageId</var> of the previous message sent on the <a data-link-type="dfn" href="#message-sessions" id="ref-for-message-sessions⑤">session</a> identified by <var>sessionId</var> incremented by <code>1</code>, otherwise.</p>
      </ul>
     <li data-md>
      <p>Let <var>message</var> be a new <code class="idl"><a data-link-type="idl" href="#dictdef-message" id="ref-for-dictdef-message④">Message</a></code> object with its attributes initialized
 to <var>sessionId</var>, <var>messageId</var>, <var>type</var> and <var>args</var>.</p>
     <li data-md>
      <p>Let <var>serializedMessage</var> be the result of running <code>JSON.stringify</code> on <var>message</var>.</p>
     <li data-md>
      <p>Transmit <var>serializedMessage</var> to the other party through the <a data-link-type="dfn" href="#message-transport" id="ref-for-message-transport⑥">transport</a>.</p>
     <li data-md>
      <p>Return <var>messageId</var>.</p>
    </ol>
   </section>
   <p>While most messages can be sent "fire-and-forget", some require the sender to
be informed that they were properly received and handled by the receiver. The
protocol uses semantics similar to the <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#idl-promise" id="ref-for-idl-promise②">Promise</a></code> API for this.</p>
   <section class="algorithm" data-algorithm="to send an acknowledgement message">
    <p>To <dfn class="dfn-paneled" data-dfn-for="message" data-dfn-type="dfn" data-noexport id="message-send-an-acknowledgement-message">send an acknowledgement message</dfn>, you <em>must</em> run the
following steps:</p>
    <dl>
     <dt data-md>Input
     <dd data-md>
      <p><var>sessionId</var>, a <a data-link-type="dfn" href="#message-session-identifier" id="ref-for-message-session-identifier⑤">session identifier</a></p>
     <dd data-md>
      <p><var>type</var>, a <a data-link-type="dfn">message type</a></p>
     <dd data-md>
      <p><var>args</var>, an optional object to be submitted with the message</p>
     <dt data-md>Output
     <dd data-md>
      <p><var>promise</var>, a <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#idl-promise" id="ref-for-idl-promise③">Promise</a></code> which will eventually resolve to the value sent
 back by the other party</p>
    </dl>
    <ol>
     <li data-md>
      <p>Run the <a data-link-type="dfn" href="#message-send-a-message" id="ref-for-message-send-a-message①">send a message</a> algorithm with <var>sessionId</var>, <var>type</var> and <var>args</var>.
 Let <var>messageId</var> be the return value.</p>
     <li data-md>
      <p>Let <var>promise</var> be a new unresolved <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#idl-promise" id="ref-for-idl-promise④">Promise</a></code>.</p>
     <li data-md>
      <p>Add <var>promise</var> to the <a data-link-type="dfn">resolve list</a>, annotated with <var>sessionId</var> and <var>messageId</var>.</p>
     <li data-md>
      <p>Return <var>promise</var>.</p>
    </ol>
   </section>
   <h4 class="heading settled" data-level="5.2.3" id="receiving-messages"><span class="secno">5.2.3. </span><span class="content">Receiving messages</span><a class="self-link" href="#receiving-messages"></a></h4>
   <p>To be able to detect new incoming <a data-link-type="dfn" href="#message-sessions" id="ref-for-message-sessions⑥">sessions</a> and receive messages from
existing sessions, every party should start running the <a data-link-type="dfn">handle incoming
messages</a> algorithm as soon as possible.</p>
   <section class="algorithm" data-algorithm="to handle an incoming message">
    <p>To <dfn data-dfn-for="message" data-dfn-type="dfn" data-noexport id="message-handle-an-incoming-message">handle an incoming message<a class="self-link" href="#message-handle-an-incoming-message"></a></dfn>, you <em>must</em> run the
following steps:</p>
    <dl>
     <dt data-md>Input
     <dd data-md>
      <p><var>serializedMessage</var>, a <a data-link-type="dfn" href="#message-serialized-message" id="ref-for-message-serialized-message①②">serialized message</a> received from the <a data-link-type="dfn" href="#message-transport" id="ref-for-message-transport⑦">transport</a></p>
     <dt data-md>Output
     <dd data-md>
      <p>none</p>
    </dl>
    <ol>
     <li data-md>
      <p>Let <var>message</var> be the result of running <code>JSON.parse</code> on <var>serializedMessage</var>.</p>
      <ol>
       <li data-md>
        <p>If <code>JSON.parse</code> threw an exception, ignore the exception and abort
	execution of this algorithm.</p>
      </ol>
     <li data-md>
      <p>If <var>message</var>.<code class="idl"><a data-link-type="idl" href="#dom-message-type" id="ref-for-dom-message-type">type</a></code> is <code>resolve</code> or <code>reject</code>:</p>
      <ol>
       <li data-md>
        <p>Let <var>sessionId</var> be <var>message</var>.<code class="idl"><a data-link-type="idl" href="#dom-message-sessionid" id="ref-for-dom-message-sessionid">sessionId</a></code>.</p>
       <li data-md>
        <p>Let <var>messageId</var> be <var>message</var>.<code class="idl"><a data-link-type="idl" href="#dom-message-args" id="ref-for-dom-message-args">args</a></code>.<code class="idl"><a data-link-type="idl" href="#dom-resolvemessageargs-messageid" id="ref-for-dom-resolvemessageargs-messageid">messageId</a></code>.</p>
       <li data-md>
        <p>Let <var>promise</var> be the promise in the <a data-link-type="dfn">resolve list</a> for <var>sessionId</var> and <var>messageId</var>, if any.</p>
       <li data-md>
        <p>If a <var>promise</var> was found:</p>
        <ol>
         <li data-md>
          <p>If <var>message</var>.<code class="idl"><a data-link-type="idl" href="#dom-message-type" id="ref-for-dom-message-type①">type</a></code> is <code>resolve</code>, then fulfill <var>promise</var> with <var>message</var>.<code class="idl"><a data-link-type="idl" href="#dom-message-args" id="ref-for-dom-message-args①">args</a></code>.<code class="idl"><a data-link-type="idl" href="#dom-resolvemessageargs-value" id="ref-for-dom-resolvemessageargs-value">value</a></code>.</p>
         <li data-md>
          <p>If <var>message</var>.<code class="idl"><a data-link-type="idl" href="#dom-message-type" id="ref-for-dom-message-type②">type</a></code> is <code>reject</code>, then reject <var>promise</var> with <var>message</var>.<code class="idl"><a data-link-type="idl" href="#dom-message-args" id="ref-for-dom-message-args②">args</a></code>.<code class="idl"><a data-link-type="idl" href="#dom-resolvemessageargs-value" id="ref-for-dom-resolvemessageargs-value①">value</a></code>.</p>
        </ol>
      </ol>
     <li data-md>
      <p>Otherwise: pass <var>message</var> to the user of the protocol for handling.</p>
    </ol>
   </section>
   <h3 class="heading settled" data-level="5.3" id="#msg-struct"><span class="secno">5.3. </span><span class="content">Message Data Structure</span><a class="self-link" href="#%23msg-struct"></a></h3>
   <p>A protocol message is represented by the <code class="idl"><a data-link-type="idl" href="#dictdef-message" id="ref-for-dictdef-message⑤">Message</a></code> data structure.</p>
<pre class="idl highlight def"><c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-message"><code><c- g>Message</c-></code></dfn> {
  <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-DOMString" id="ref-for-idl-DOMString①"><c- b>DOMString</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="Message" data-dfn-type="dict-member" data-export data-type="DOMString " id="dom-message-sessionid"><code><c- g>sessionId</c-></code></dfn>;
  <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-unsigned-long" id="ref-for-idl-unsigned-long"><c- b>unsigned</c-> <c- b>long</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="Message" data-dfn-type="dict-member" data-export data-type="unsigned long " id="dom-message-messageid"><code><c- g>messageId</c-></code></dfn>;
  <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-DOMString" id="ref-for-idl-DOMString②"><c- b>DOMString</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="Message" data-dfn-type="dict-member" data-export data-type="DOMString " id="dom-message-type"><code><c- g>type</c-></code></dfn>;
  <c- b>any</c-> <dfn class="dfn-paneled idl-code" data-dfn-for="Message" data-dfn-type="dict-member" data-export data-type="any " id="dom-message-args"><code><c- g>args</c-></code></dfn>;
};
</pre>
   <p>A <code class="idl"><a data-link-type="idl" href="#dictdef-message" id="ref-for-dictdef-message⑥">Message</a></code> has an associated <code class="idl"><a data-link-type="idl" href="#dom-message-sessionid" id="ref-for-dom-message-sessionid①">sessionId</a></code>, a string that uniquely
identifies the <a data-link-type="dfn">messaging session</a> to which the <code class="idl"><a data-link-type="idl" href="#dictdef-message" id="ref-for-dictdef-message⑦">Message</a></code> belongs.</p>
   <p>A <code class="idl"><a data-link-type="idl" href="#dictdef-message" id="ref-for-dictdef-message⑧">Message</a></code> has an associated <code class="idl"><a data-link-type="idl" href="#dom-message-messageid" id="ref-for-dom-message-messageid">messageId</a></code>, an integer that
increments with each message sent by the sender over the <a data-link-type="dfn">messaging session</a> specified by <code class="idl"><a data-link-type="idl" href="#dom-message-sessionid" id="ref-for-dom-message-sessionid②">sessionId</a></code>.</p>
   <p class="note" role="note"><span>Note:</span> The combination of <code class="idl"><a data-link-type="idl" href="#dom-message-sessionid" id="ref-for-dom-message-sessionid③">sessionId</a></code> and <code class="idl"><a data-link-type="idl" href="#dom-message-messageid" id="ref-for-dom-message-messageid①">messageId</a></code> uniquely identifies a single message. The combination of the values of these two
attributes may never occur twice.</p>
   <p>A <code class="idl"><a data-link-type="idl" href="#dictdef-message" id="ref-for-dictdef-message⑨">Message</a></code> has an associated <code class="idl"><a data-link-type="idl" href="#dom-message-type" id="ref-for-dom-message-type③">type</a></code>, a string that defines the type
of message that is being sent and informs the receiver how to interpret the <code class="idl"><a data-link-type="idl" href="#dom-message-args" id="ref-for-dom-message-args③">args</a></code> parameter.</p>
   <p>A <code class="idl"><a data-link-type="idl" href="#dictdef-message" id="ref-for-dictdef-message①⓪">Message</a></code> may have associated <code class="idl"><a data-link-type="idl" href="#dom-message-args" id="ref-for-dom-message-args④">args</a></code>, which are <code class="idl"><a data-link-type="idl" href="#dom-message-type" id="ref-for-dom-message-type④">type</a></code>-specific additional arguments. The data structure and meaning
of <code class="idl"><a data-link-type="idl" href="#dom-message-args" id="ref-for-dom-message-args⑤">args</a></code> is defined in the respective message type definitions.</p>
   <h4 class="heading settled" data-level="5.3.1" id="##msg-proto-resolve"><span class="secno">5.3.1. </span><span class="content"><dfn data-dfn-for="message" data-dfn-type="dfn" data-noexport id="message-resolve"><code>resolve</code><a class="self-link" href="#message-resolve"></a></dfn> messages</span><a class="self-link" href="#%23%23msg-proto-resolve"></a></h4>
   <p><code class="idl"><a data-link-type="idl" href="#dom-message-type" id="ref-for-dom-message-type⑤">type</a></code> must be <code>resolve</code></p>
   <p><code class="idl"><a data-link-type="idl" href="#dom-message-args" id="ref-for-dom-message-args⑥">args</a></code> must be a <code class="idl"><a data-link-type="idl" href="#dictdef-resolvemessageargs" id="ref-for-dictdef-resolvemessageargs">ResolveMessageArgs</a></code> object:</p>
<pre class="idl highlight def"><c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-resolvemessageargs"><code><c- g>ResolveMessageArgs</c-></code></dfn> {
  <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-unsigned-long" id="ref-for-idl-unsigned-long①"><c- b>unsigned</c-> <c- b>long</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="ResolveMessageArgs" data-dfn-type="dict-member" data-export data-type="unsigned long " id="dom-resolvemessageargs-messageid"><code><c- g>messageId</c-></code></dfn>;
  <c- b>any</c-> <dfn class="dfn-paneled idl-code" data-dfn-for="ResolveMessageArgs" data-dfn-type="dict-member" data-export data-type="any " id="dom-resolvemessageargs-value"><code><c- g>value</c-></code></dfn>;
};
</pre>
   <p><code class="idl"><a data-link-type="idl" href="#dom-resolvemessageargs-messageid" id="ref-for-dom-resolvemessageargs-messageid①">messageId</a></code> refers to the <code class="idl"><a data-link-type="idl" href="#dom-message-messageid" id="ref-for-dom-message-messageid②">messageId</a></code> attribute
of the message that is being resolved.</p>
   <p><code class="idl"><a data-link-type="idl" href="#dom-resolvemessageargs-value" id="ref-for-dom-resolvemessageargs-value②">value</a></code> may include a value associated with this <code>resolve</code> message.</p>
   <h4 class="heading settled" data-level="5.3.2" id="##msg-proto-reject"><span class="secno">5.3.2. </span><span class="content"><dfn data-dfn-for="message" data-dfn-type="dfn" data-noexport id="message-reject"><code>reject</code><a class="self-link" href="#message-reject"></a></dfn> messages</span><a class="self-link" href="#%23%23msg-proto-reject"></a></h4>
   <p><code class="idl"><a data-link-type="idl" href="#dom-message-type" id="ref-for-dom-message-type⑥">type</a></code> must be <code>reject</code></p>
   <p><code class="idl"><a data-link-type="idl" href="#dom-message-args" id="ref-for-dom-message-args⑦">args</a></code> must be a <code class="idl"><a data-link-type="idl" href="#dictdef-resolvemessageargs" id="ref-for-dictdef-resolvemessageargs①">ResolveMessageArgs</a></code> object.</p>
   <p><code class="idl"><a data-link-type="idl" href="#dom-resolvemessageargs-value" id="ref-for-dom-resolvemessageargs-value③">value</a></code> may include an error message associated with this <code>reject</code> message.</p>
<pre class="idl highlight def"><c- b>dictionary</c-> <dfn class="idl-code" data-dfn-type="dictionary" data-export id="dictdef-resolvemessageargsvalue"><code><c- g>ResolveMessageArgsValue</c-></code><a class="self-link" href="#dictdef-resolvemessageargsvalue"></a></dfn> {
  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-unsigned-long" id="ref-for-idl-unsigned-long②"><c- b>unsigned</c-> <c- b>long</c-></a> <dfn class="idl-code" data-dfn-for="ResolveMessageArgsValue" data-dfn-type="dict-member" data-export data-type="unsigned long " id="dom-resolvemessageargsvalue-errorcode"><code><c- g>errorCode</c-></code><a class="self-link" href="#dom-resolvemessageargsvalue-errorcode"></a></dfn>;
  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-DOMString" id="ref-for-idl-DOMString③"><c- b>DOMString</c-></a> <dfn class="idl-code" data-dfn-for="ResolveMessageArgsValue" data-dfn-type="dict-member" data-export data-type="DOMString " id="dom-resolvemessageargsvalue-message"><code><c- g>message</c-></code><a class="self-link" href="#dom-resolvemessageargsvalue-message"></a></dfn>;
};
</pre>
   <h2 class="heading settled" data-level="6" id="api"><span class="secno">6. </span><span class="content">API Reference</span><a class="self-link" href="#api"></a></h2>
   <h3 class="heading settled" data-level="6.1" id="vast-messages"><span class="secno">6.1. </span><span class="content">Messages corresponding to VAST tracking events</span><a class="self-link" href="#vast-messages"></a></h3>
   <p>All ID’s are prepended with SIVIC:Tracking. The player must report each event
to the ad whenever a tracking pixels is reported for that tracking event type. 
These names correspond with VAST 4.1 tracking names.</p>
   <p>For example:</p>
<pre>{
 type: "SIVIC:Tracking:impression",
 args: {}
}
</pre>
   <h4 class="heading settled" data-level="6.1.1" id="vast-error"><span class="secno">6.1.1. </span><span class="content">SIVIC:Tracking:error</span><a class="self-link" href="#vast-error"></a></h4>
    <code>SIVIC:Tracking:error</code> message is sent with <code>args</code> property: 
<pre class="idl highlight def"><c- b>dictionary</c-> <dfn class="idl-code" data-dfn-type="dictionary" data-export id="dictdef-trackingerrorargs"><code><c- g>TrackingErrorArgs</c-></code><a class="self-link" href="#dictdef-trackingerrorargs"></a></dfn> {
  <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-DOMString" id="ref-for-idl-DOMString④"><c- b>DOMString</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="TrackingErrorArgs" data-dfn-type="dict-member" data-export data-type="DOMString " id="dom-trackingerrorargs-errorcode"><code><c- g>errorCode</c-></code></dfn>;
};
</pre>
   <p><code class="idl"><a data-link-type="idl" href="#dom-trackingerrorargs-errorcode" id="ref-for-dom-trackingerrorargs-errorcode">errorCode</a></code> is error code specified by VAST.</p>
   <h4 class="heading settled" data-level="6.1.2" id="other-vast-messages"><span class="secno">6.1.2. </span><span class="content">Other tracking events that must be supported</span><a class="self-link" href="#other-vast-messages"></a></h4>
   <ul>
    <li data-md>
     <p>SIVIC:Tracking:impression</p>
    <li data-md>
     <p>SIVIC:Tracking:creativeView</p>
    <li data-md>
     <p>SIVIC:Tracking:mute</p>
    <li data-md>
     <p>SIVIC:Tracking:unmute</p>
    <li data-md>
     <p>SIVIC:Tracking:pause</p>
    <li data-md>
     <p>SIVIC:Tracking:resume</p>
    <li data-md>
     <p>SIVIC:Tracking:rewind</p>
    <li data-md>
     <p>SIVIC:Tracking:skip</p>
    <li data-md>
     <p>SIVIC:Tracking:playerExpand</p>
    <li data-md>
     <p>SIVIC:Tracking:playerCollapse</p>
    <li data-md>
     <p>SIVIC:Tracking:loaded</p>
    <li data-md>
     <p>SIVIC:Tracking:start</p>
    <li data-md>
     <p>SIVIC:Tracking:firstQuartile</p>
    <li data-md>
     <p>SIVIC:Tracking:midpoint</p>
    <li data-md>
     <p>SIVIC:Tracking:thirdQuartile</p>
    <li data-md>
     <p>SIVIC:Tracking:complete</p>
    <li data-md>
     <p>SIVIC:Tracking:otherAdInteraction</p>
    <li data-md>
     <p>SIVIC:Tracking:progress</p>
    <li data-md>
     <p>SIVIC:Tracking:closeLinear</p>
    <li data-md>
     <p>SIVIC:Tracking:fullscreen</p>
    <li data-md>
     <p>SIVIC:Tracking:exitFullscreen</p>
    <li data-md>
     <p>SIVIC:Tracking:expand</p>
    <li data-md>
     <p>SIVIC:Tracking:collapse</p>
    <li data-md>
     <p>SIVIC:Tracking:clickThrough</p>
    <li data-md>
     <p>SIVIC:Tracking:clickTracking</p>
    <li data-md>
     <p>SIVIC:Tracking:customClick</p>
   </ul>
   <h3 class="heading settled" data-level="6.2" id="video-messages"><span class="secno">6.2. </span><span class="content">Messages from the video element</span><a class="self-link" href="#video-messages"></a></h3>
   <p>All video messages will be prepended with SIVIC:Video. All video messages should be sent after their corresponding
media events are called. If the video is wrapped or native the player should make its best effort to make messages
correspond with the html5 video element callbacks.</p>
   <h4 class="heading settled" data-level="6.2.1" id="sivic-video-durationchange"><span class="secno">6.2.1. </span><span class="content">SIVIC:Video:durationchange</span><a class="self-link" href="#sivic-video-durationchange"></a></h4>
    Should be called after the durationchange event is triggered on the video element. 
   <p>parameters:</p>
   <ul>
    <li data-md>
     <p>duration(float): The number in seconds of the video duration. For server side ad insertion this must be calculated
to be the total duration of the ad.</p>
   </ul>
   <h4 class="heading settled" data-level="6.2.2" id="sivic-video-ended"><span class="secno">6.2.2. </span><span class="content">SIVIC:Video:ended</span><a class="self-link" href="#sivic-video-ended"></a></h4>
    Should be called after the ended event is triggered on the video element. 
   <h4 class="heading settled" data-level="6.2.3" id="sivic-video-error"><span class="secno">6.2.3. </span><span class="content">SIVIC:Video:error</span><a class="self-link" href="#sivic-video-error"></a></h4>
    Should be called after the error event is triggered on the video element. 
   <p>parameters:</p>
   <ul>
    <li data-md>
     <p>error(string): corresponds to videoElement.error.code.</p>
    <li data-md>
     <p>message(string): corresponds to videoElement.error.message.</p>
   </ul>
   <h4 class="heading settled" data-level="6.2.4" id="sivic-video-pause"><span class="secno">6.2.4. </span><span class="content">SIVIC:Video:pause</span><a class="self-link" href="#sivic-video-pause"></a></h4>
    Should be called after the pause event is triggered on the video element. 
   <h4 class="heading settled" data-level="6.2.5" id="sivic-video-play"><span class="secno">6.2.5. </span><span class="content">SIVIC:Video:play</span><a class="self-link" href="#sivic-video-play"></a></h4>
    Should be called after the play event is triggered on the video element. 
   <h4 class="heading settled" data-level="6.2.6" id="sivic-video-playing"><span class="secno">6.2.6. </span><span class="content">SIVIC:Video:playing</span><a class="self-link" href="#sivic-video-playing"></a></h4>
    Should be called after the playing event is triggered on the video element. 
   <h4 class="heading settled" data-level="6.2.7" id="sivic-video-seeked"><span class="secno">6.2.7. </span><span class="content">SIVIC:Video:seeked</span><a class="self-link" href="#sivic-video-seeked"></a></h4>
    Should be called after the seeked event is triggered on the video element. 
   <h4 class="heading settled" data-level="6.2.8" id="sivic-video-seeking"><span class="secno">6.2.8. </span><span class="content">SIVIC:Video:seeking</span><a class="self-link" href="#sivic-video-seeking"></a></h4>
    Should be called after the seeking event is triggered on the video element. 
   <h4 class="heading settled" data-level="6.2.9" id="sivic-video-timeupdate"><span class="secno">6.2.9. </span><span class="content">SIVIC:Video:timeupdate</span><a class="self-link" href="#sivic-video-timeupdate"></a></h4>
    Should be called after the timeupdate event is triggered on the video element. 
   <p>parameters:</p>
   <ul>
    <li data-md>
     <p>currentTime(number): corresponds to videoElement.currentTime attribute. For server side ad insertion
this must be calculated to be the total time the video ad has played. For example: if the video element
time is 500 seconds but the ad started playback 10 seconds ago (in DAI), currentTime should be set to 10 seconds.</p>
   </ul>
   <h4 class="heading settled" data-level="6.2.10" id="sivic-video-volumechange"><span class="secno">6.2.10. </span><span class="content">SIVIC:Video:volumechange</span><a class="self-link" href="#sivic-video-volumechange"></a></h4>
    Should be called after the volumechange event is triggered on the video element. 
   <p>parameters:</p>
   <ul>
    <li data-md>
     <p>volume(number): corresponds to videoElement.volume attribute.</p>
   </ul>
   <h3 class="heading settled" data-level="6.3" id="video-responses"><span class="secno">6.3. </span><span class="content">Responses from the video element</span><a class="self-link" href="#video-responses"></a></h3>
   <h4 class="heading settled" data-level="6.3.1" id="sivic-creative-getVideoState-response"><span class="secno">6.3.1. </span><span class="content">Response To SIVIC:Creative:getVideoState</span><a class="self-link" href="#sivic-creative-getVideoState-response"></a></h4>
   <h5 class="heading settled" data-level="6.3.1.1" id="sivic-creative-getVideoState-resolve"><span class="secno">6.3.1.1. </span><span class="content">resolve</span><a class="self-link" href="#sivic-creative-getVideoState-resolve"></a></h5>
   <ul>
    <li data-md>
     <p>currentSrc(string): The src of which ad has been chosen. This may need correction for server side ad insertion as
it should indicate the video media selected and not the url to the media playing.</p>
    <li data-md>
     <p>currentTime(number): This should be the current time from the first frame of the video ad. In the case of DAI,
this number needs to be corrected. For example: if the video element time is 500 seconds but the ad started
playback 10 seconds ago (in DAI), this should be 10 seconds.</p>
    <li data-md>
     <p>duration(number): This should be the duration of the ad. Server side ad insertion may need correction.</p>
    <li data-md>
     <p>ended(boolean): corresponds exactly to video element ended attribute</p>
    <li data-md>
     <p>muted(boolean): corresponds exactly to video element muted attribute</p>
    <li data-md>
     <p>paused(boolean): corresponds exactly to video element paused attribute</p>
    <li data-md>
     <p>volume(number): corresponds exactly to video element volume attribute</p>
    <li data-md>
     <p>fullscreen(boolean): true if the video element is full screen, false otherwise</p>
   </ul>
   <p class="issue" id="issue-a3715b66"><a class="self-link" href="#issue-a3715b66"></a> should we also include video element location and size here?</p>
   <h3 class="heading settled" data-level="6.4" id="player-messages"><span class="secno">6.4. </span><span class="content">Messages from the player</span><a class="self-link" href="#player-messages"></a></h3>
    All messages from the player should be prepended with SIVIC:Player. 
   <p>For example:</p>
<pre>{
 id: "SIVIC:Player:adStopped",
 args: {
   code: 0
 }
}
</pre>
   <h4 class="heading settled" data-level="6.4.1" id="sivic-player-resize"><span class="secno">6.4.1. </span><span class="content">SIVIC:Player:resize</span><a class="self-link" href="#sivic-player-resize"></a></h4>
   <p>parameters:</p>
<pre class="idl highlight def"><c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-resizeparameters"><code><c- g>resizeParameters</c-></code></dfn> {
  <c- b>required</c-> <a class="n" data-link-type="idl-name" href="#dictdef-videodimensions" id="ref-for-dictdef-videodimensions"><c- n>videoDimensions</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="resizeParameters" data-dfn-type="dict-member" data-export data-type="videoDimensions " id="dom-resizeparameters-videodimensions"><code><c- g>videoDimensions</c-></code></dfn>;
  <c- b>required</c-> <a class="n" data-link-type="idl-name" href="#dictdef-creativedimensions" id="ref-for-dictdef-creativedimensions"><c- n>creativeDimensions</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="resizeParameters" data-dfn-type="dict-member" data-export data-type="creativeDimensions " id="dom-resizeparameters-creativedimensions"><code><c- g>creativeDimensions</c-></code></dfn>;
  <c- b>required</c-> <a class="n" data-link-type="idl-name"><c- n>string</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="resizeParameters" data-dfn-type="dict-member" data-export data-type="string " id="dom-resizeparameters-mode"><code><c- g>mode</c-></code></dfn>;
  <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-boolean" id="ref-for-idl-boolean"><c- b>boolean</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="resizeParameters" data-dfn-type="dict-member" data-export data-type="boolean " id="dom-resizeparameters-fullscreen"><code><c- g>fullScreen</c-></code></dfn>;
};
</pre>
<pre class="idl highlight def"><c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-videodimensions"><code><c- g>videoDimensions</c-></code></dfn> {
  <c- b>required</c-> <a class="n" data-link-type="idl-name"><c- n>int</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="videoDimensions" data-dfn-type="dict-member" data-export data-type="int " id="dom-videodimensions-x"><code><c- g>x</c-></code></dfn>;
  <c- b>required</c-> <a class="n" data-link-type="idl-name"><c- n>int</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="videoDimensions" data-dfn-type="dict-member" data-export data-type="int " id="dom-videodimensions-y"><code><c- g>y</c-></code></dfn>;
  <c- b>required</c-> <a class="n" data-link-type="idl-name"><c- n>int</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="videoDimensions" data-dfn-type="dict-member" data-export data-type="int " id="dom-videodimensions-width"><code><c- g>width</c-></code></dfn>;
  <c- b>required</c-> <a class="n" data-link-type="idl-name"><c- n>int</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="videoDimensions" data-dfn-type="dict-member" data-export data-type="int " id="dom-videodimensions-height"><code><c- g>height</c-></code></dfn>;
  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-float" id="ref-for-idl-float"><c- b>float</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="videoDimensions" data-dfn-type="dict-member" data-export data-type="float " id="dom-videodimensions-transitionduration"><code><c- g>transitionDuration</c-></code></dfn>;
};
</pre>
<pre class="idl highlight def"><c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-creativedimensions"><code><c- g>creativeDimensions</c-></code></dfn> {
  <c- b>required</c-> <a class="n" data-link-type="idl-name"><c- n>int</c-></a> <dfn class="idl-code" data-dfn-for="creativeDimensions" data-dfn-type="dict-member" data-export data-type="int " id="dom-creativedimensions-x"><code><c- g>x</c-></code><a class="self-link" href="#dom-creativedimensions-x"></a></dfn>;
  <c- b>required</c-> <a class="n" data-link-type="idl-name"><c- n>int</c-></a> <dfn class="idl-code" data-dfn-for="creativeDimensions" data-dfn-type="dict-member" data-export data-type="int " id="dom-creativedimensions-y"><code><c- g>y</c-></code><a class="self-link" href="#dom-creativedimensions-y"></a></dfn>;
  <c- b>required</c-> <a class="n" data-link-type="idl-name"><c- n>int</c-></a> <dfn class="idl-code" data-dfn-for="creativeDimensions" data-dfn-type="dict-member" data-export data-type="int " id="dom-creativedimensions-width"><code><c- g>width</c-></code><a class="self-link" href="#dom-creativedimensions-width"></a></dfn>;
  <c- b>required</c-> <a class="n" data-link-type="idl-name"><c- n>int</c-></a> <dfn class="idl-code" data-dfn-for="creativeDimensions" data-dfn-type="dict-member" data-export data-type="int " id="dom-creativedimensions-height"><code><c- g>height</c-></code><a class="self-link" href="#dom-creativedimensions-height"></a></dfn>;
  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-float" id="ref-for-idl-float①"><c- b>float</c-></a> <dfn class="idl-code" data-dfn-for="creativeDimensions" data-dfn-type="dict-member" data-export data-type="float " id="dom-creativedimensions-transitionduration"><code><c- g>transitionDuration</c-></code><a class="self-link" href="#dom-creativedimensions-transitionduration"></a></dfn>;
};
</pre>
   <p>The <code class="idl"><a data-link-type="idl" href="#dom-resizeparameters-videodimensions" id="ref-for-dom-resizeparameters-videodimensions">videoDimensions</a></code> communicate to the creative the dimensions of the video element.
The <code class="idl"><a data-link-type="idl" href="#dom-resizeparameters-creativedimensions" id="ref-for-dom-resizeparameters-creativedimensions">creativeDimensions</a></code> tell the creative where the iframe is located as well as its dimensions. If the iframe is
not yet visible (like during initialization) these dimensions will be the expected dimensions when it does become visible.</p>
   <ul>
    <li data-md>
     <p><code class="idl"><a data-link-type="idl" href="#dom-resizeparameters-videodimensions" id="ref-for-dom-resizeparameters-videodimensions①">videoDimensions</a></code></p>
     <ul>
      <li data-md>
       <p><code class="idl"><a data-link-type="idl" href="#dom-videodimensions-x" id="ref-for-dom-videodimensions-x">x</a></code> The x offset of the video. It should initialize at 0.</p>
      <li data-md>
       <p><code class="idl"><a data-link-type="idl" href="#dom-videodimensions-y" id="ref-for-dom-videodimensions-y">y</a></code> The y offset of the video. It should initialize at 0.</p>
      <li data-md>
       <p><code class="idl"><a data-link-type="idl" href="#dom-videodimensions-width" id="ref-for-dom-videodimensions-width">width</a></code> The width in pixels of the video.</p>
      <li data-md>
       <p><code class="idl"><a data-link-type="idl" href="#dom-videodimensions-height" id="ref-for-dom-videodimensions-height">height</a></code> The height in pixels of the video.</p>
      <li data-md>
       <p><code class="idl"><a data-link-type="idl" href="#dom-videodimensions-transitionduration" id="ref-for-dom-videodimensions-transitionduration">transitionDuration</a></code> Number in seconds the transition animation should take, this can be accomplished by transition-property in css</p>
     </ul>
    <li data-md>
     <p><code class="idl"><a data-link-type="idl" href="#dom-resizeparameters-creativedimensions" id="ref-for-dom-resizeparameters-creativedimensions①">creativeDimensions</a></code></p>
     <ul>
      <li data-md>
       <p><code class="idl"><a data-link-type="idl" href="#dom-videodimensions-x" id="ref-for-dom-videodimensions-x①">x</a></code> The x offset of the creative. It should initialize at 0.</p>
      <li data-md>
       <p><code class="idl"><a data-link-type="idl" href="#dom-videodimensions-y" id="ref-for-dom-videodimensions-y①">y</a></code> The y offset of the creative. It should initialize at 0.</p>
      <li data-md>
       <p><code class="idl"><a data-link-type="idl" href="#dom-videodimensions-width" id="ref-for-dom-videodimensions-width①">width</a></code> The width in pixels of the creative.</p>
      <li data-md>
       <p><code class="idl"><a data-link-type="idl" href="#dom-videodimensions-height" id="ref-for-dom-videodimensions-height①">height</a></code> The height in pixels of the creative.</p>
      <li data-md>
       <p><code class="idl"><a data-link-type="idl" href="#dom-videodimensions-transitionduration" id="ref-for-dom-videodimensions-transitionduration①">transitionDuration</a></code> Number in seconds the transition animation should take, this can be accomplished by transition-property in css</p>
     </ul>
    <li data-md>
     <p><code class="idl"><a data-link-type="idl" href="#dom-resizeparameters-mode" id="ref-for-dom-resizeparameters-mode">mode</a></code> Can be "portrait" or "landscape".</p>
    <li data-md>
     <p><code class="idl"><a data-link-type="idl" href="#dom-resizeparameters-fullscreen" id="ref-for-dom-resizeparameters-fullscreen">fullScreen</a></code> True if fullscreen.</p>
   </ul>
   <h4 class="heading settled" data-level="6.4.2" id="sivic-player-init"><span class="secno">6.4.2. </span><span class="content">SIVIC:Player:init</span><a class="self-link" href="#sivic-player-init"></a></h4>
   <p>To assist in preloading assets the SIVIC:Player:init before SIVIC:Player:startCreative.
The player should call this function early enough before playback so that assets can be
displayed as soon as the ad starts.</p>
   <p>The ad, however, should not assume that it has any amount of time between the
SIVIC:Player:init call and the SIVIC:Player:startCreative message. For example a preroll might
call SIVIC:Player:startCreative immediately after SIVIC:Player:init.</p>
   <p>When calling SIVIC:Player:init, the player shall provide the following parameters:</p>
<pre class="idl highlight def"><c- b>dictionary</c-> <dfn class="idl-code" data-dfn-type="dictionary" data-export id="dictdef-initparameters"><code><c- g>initParameters</c-></code><a class="self-link" href="#dictdef-initparameters"></a></dfn> {
  <c- b>required</c-> <a class="n" data-link-type="idl-name" href="#dictdef-environmentdata" id="ref-for-dictdef-environmentdata"><c- n>EnvironmentData</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="initParameters" data-dfn-type="dict-member" data-export data-type="EnvironmentData " id="dom-initparameters-environmentdata"><code><c- g>EnvironmentData</c-></code></dfn>;
  <c- b>required</c-> <a class="n" data-link-type="idl-name" href="#dictdef-creativedata" id="ref-for-dictdef-creativedata"><c- n>CreativeData</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="initParameters" data-dfn-type="dict-member" data-export data-type="CreativeData " id="dom-initparameters-creativedata"><code><c- g>CreativeData</c-></code></dfn>;
};
</pre>
<pre class="idl highlight def"><c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-creativedata"><code><c- g>CreativeData</c-></code></dfn> {
  <c- b>required</c-> <a class="n" data-link-type="idl-name"><c- n>string</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="CreativeData" data-dfn-type="dict-member" data-export data-type="string " id="dom-creativedata-adparameters"><code><c- g>adParameters</c-></code></dfn>;
  <a class="n" data-link-type="idl-name"><c- n>string</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="CreativeData" data-dfn-type="dict-member" data-export data-type="string " id="dom-creativedata-adid"><code><c- g>adId</c-></code></dfn>;
  <a class="n" data-link-type="idl-name"><c- n>string</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="CreativeData" data-dfn-type="dict-member" data-export data-type="string " id="dom-creativedata-creativeid"><code><c- g>creativeId</c-></code></dfn>;
  <a class="n" data-link-type="idl-name"><c- n>string</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="CreativeData" data-dfn-type="dict-member" data-export data-type="string " id="dom-creativedata-adservingid"><code><c- g>adServingId</c-></code></dfn>;
  <a class="n" data-link-type="idl-name"><c- n>string</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="CreativeData" data-dfn-type="dict-member" data-export data-type="string " id="dom-creativedata-clickthruurl"><code><c- g>clickThruUrl</c-></code></dfn>;
};
</pre>
<pre class="idl highlight def"><c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-environmentdata"><code><c- g>EnvironmentData</c-></code></dfn> {
  <c- b>required</c-> <a class="n" data-link-type="idl-name" href="#dictdef-videodimensions" id="ref-for-dictdef-videodimensions①"><c- n>videoDimensions</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="EnvironmentData" data-dfn-type="dict-member" data-export data-type="videoDimensions " id="dom-environmentdata-videodimensions"><code><c- g>videoDimensions</c-></code></dfn>;
  <c- b>required</c-> <a class="n" data-link-type="idl-name" href="#dictdef-creativedimensions" id="ref-for-dictdef-creativedimensions①"><c- n>creativeDimensions</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="EnvironmentData" data-dfn-type="dict-member" data-export data-type="creativeDimensions " id="dom-environmentdata-creativedimensions"><code><c- g>creativeDimensions</c-></code></dfn>;
  <c- b>required</c-> <a class="n" data-link-type="idl-name"><c- n>string</c-></a> <dfn class="idl-code" data-dfn-for="EnvironmentData" data-dfn-type="dict-member" data-export data-type="string " id="dom-environmentdata-mode"><code><c- g>mode</c-></code><a class="self-link" href="#dom-environmentdata-mode"></a></dfn>;
  <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-boolean" id="ref-for-idl-boolean①"><c- b>boolean</c-></a> <dfn class="idl-code" data-dfn-for="EnvironmentData" data-dfn-type="dict-member" data-export data-type="boolean " id="dom-environmentdata-fullscreen"><code><c- g>fullScreen</c-></code><a class="self-link" href="#dom-environmentdata-fullscreen"></a></dfn>;
  <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-boolean" id="ref-for-idl-boolean②"><c- b>boolean</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="EnvironmentData" data-dfn-type="dict-member" data-export data-type="boolean " id="dom-environmentdata-fullscreenallowed"><code><c- g>fullscreenAllowed</c-></code></dfn>;
  <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-boolean" id="ref-for-idl-boolean③"><c- b>boolean</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="EnvironmentData" data-dfn-type="dict-member" data-export data-type="boolean " id="dom-environmentdata-variabledurationallowed"><code><c- g>variableDurationAllowed</c-></code></dfn>;
  <c- b>required</c-> <a class="n" data-link-type="idl-name" href="#enumdef-skippablestate" id="ref-for-enumdef-skippablestate"><c- n>SkippableState</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="EnvironmentData" data-dfn-type="dict-member" data-export data-type="SkippableState " id="dom-environmentdata-skippablestate"><code><c- g>skippableState</c-></code></dfn>;
  <a class="n" data-link-type="idl-name"><c- n>string</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="EnvironmentData" data-dfn-type="dict-member" data-export data-type="string " id="dom-environmentdata-siteurl"><code><c- g>siteUrl</c-></code></dfn>;
  <a class="n" data-link-type="idl-name"><c- n>string</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="EnvironmentData" data-dfn-type="dict-member" data-export data-type="string " id="dom-environmentdata-appid"><code><c- g>appId</c-></code></dfn>;
  <a class="n" data-link-type="idl-name"><c- n>string</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="EnvironmentData" data-dfn-type="dict-member" data-export data-type="string " id="dom-environmentdata-useragent"><code><c- g>useragent</c-></code></dfn>;
  <a class="n" data-link-type="idl-name"><c- n>string</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="EnvironmentData" data-dfn-type="dict-member" data-export data-type="string " id="dom-environmentdata-deviceid"><code><c- g>deviceId</c-></code></dfn>;
  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-boolean" id="ref-for-idl-boolean④"><c- b>boolean</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="EnvironmentData" data-dfn-type="dict-member" data-export data-type="boolean " id="dom-environmentdata-muted"><code><c- g>muted</c-></code></dfn>;
  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-float" id="ref-for-idl-float②"><c- b>float</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="EnvironmentData" data-dfn-type="dict-member" data-export data-type="float " id="dom-environmentdata-volume"><code><c- g>volume</c-></code></dfn>;
};

<c- b>enum</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="enum" data-export id="enumdef-skippablestate"><code><c- g>SkippableState</c-></code></dfn> {<dfn class="dfn-paneled idl-code" data-dfn-for="SkippableState" data-dfn-type="enum-value" data-export id="dom-skippablestate-playerhandles"><code><c- s>"playerHandles"</c-></code></dfn>, <dfn class="dfn-paneled idl-code" data-dfn-for="SkippableState" data-dfn-type="enum-value" data-export id="dom-skippablestate-adhandles"><code><c- s>"adHandles"</c-></code></dfn>, <dfn class="dfn-paneled idl-code" data-dfn-for="SkippableState" data-dfn-type="enum-value" data-export id="dom-skippablestate-notskippable"><code><c- s>"notSkippable"</c-></code></dfn>};
</pre>
   <ul>
    <li data-md>
     <p><code class="idl"><a data-link-type="idl" href="#dom-initparameters-creativedata" id="ref-for-dom-initparameters-creativedata">CreativeData</a></code> is used to pass information associated
with the creative (sometimes taken from VAST). In a VAST context, the ad unit
should pass the value for either the <code>Linear</code> or <code>Nonlinear</code> <code>AdParameter</code> element specified in the VAST document.</p>
     <ul>
      <li data-md>
       <p><code class="idl"><a data-link-type="idl" href="#dom-creativedata-adparameters" id="ref-for-dom-creativedata-adparameters">adParameters</a></code> ad parameters from VAST, or an empty string
if unknown.</p>
      <li data-md>
       <p><code class="idl"><a data-link-type="idl" href="#dom-creativedata-adid" id="ref-for-dom-creativedata-adid">adId</a></code> the ID of the ad from VAST, or an empty string if
unknown.</p>
      <li data-md>
       <p><code class="idl"><a data-link-type="idl" href="#dom-creativedata-creativeid" id="ref-for-dom-creativedata-creativeid">creativeId</a></code> the ID from the creative or an empty string
if unknown.</p>
      <li data-md>
       <p><code class="idl"><a data-link-type="idl" href="#dom-creativedata-adservingid" id="ref-for-dom-creativedata-adservingid">adServingId</a></code> Quasi-unique id generated by ad server and
passed through all 1st and 3rd party reporting to facilitate the marriage
of impression-level data across multiple reporting systems. In VAST 4.1
and later this id is provided in the <code>AdServingID</code> node.</p>
      <li data-md>
       <p><code class="idl"><a data-link-type="idl" href="#dom-creativedata-clickthruurl" id="ref-for-dom-creativedata-clickthruurl">clickThruUrl</a></code> The click through url, provided from VAST.
If there is no click through url this should be an empty string.</p>
     </ul>
    <li data-md>
     <p><code class="idl"><a data-link-type="idl" href="#dom-initparameters-environmentdata" id="ref-for-dom-initparameters-environmentdata">EnvironmentData</a></code> is used to pass information associated with the
publisher playback environment.
The object should have the following fields.</p>
     <ul>
      <li data-md>
       <p><code class="idl"><a data-link-type="idl" href="#dom-environmentdata-videodimensions" id="ref-for-dom-environmentdata-videodimensions">videoDimensions</a></code> indicates the video display area, see <a href="#sivic-player-resize">§6.4.1 SIVIC:Player:resize</a></p>
      <li data-md>
       <p><code class="idl"><a data-link-type="idl" href="#dom-environmentdata-creativedimensions" id="ref-for-dom-environmentdata-creativedimensions">creativeDimensions</a></code> indicates the creative display
area, see <a href="#sivic-player-resize">§6.4.1 SIVIC:Player:resize</a></p>
      <li data-md>
       <p><code class="idl"><a data-link-type="idl" href="#dom-resizeparameters-mode" id="ref-for-dom-resizeparameters-mode①">mode</a></code> Can be "portrait" or "landscape". For desktop
choose "landscape".</p>
      <li data-md>
       <p><code class="idl"><a data-link-type="idl" href="#dom-resizeparameters-fullscreen" id="ref-for-dom-resizeparameters-fullscreen①">fullScreen</a></code> True if fullscreen.</p>
      <li data-md>
       <p><code class="idl"><a data-link-type="idl" href="#dom-environmentdata-fullscreenallowed" id="ref-for-dom-environmentdata-fullscreenallowed">fullscreenAllowed</a></code>: True if the creative may choose
to display or not display a fullscreen option</p>
      <li data-md>
       <p><code class="idl"><a data-link-type="idl" href="#dom-environmentdata-variabledurationallowed" id="ref-for-dom-environmentdata-variabledurationallowed">variableDurationAllowed</a></code>: If set to true the player
must allow the SIVIC creative to pause player-controlled video playback
during the ad. If <code>false</code> it will not (live streaming is a use case). An
example use case here is a clickthru overlays, where <code>variableDuration</code> (ad requirement) is <code>false</code>, but <code class="idl"><a data-link-type="idl" href="#dom-environmentdata-variabledurationallowed" id="ref-for-dom-environmentdata-variabledurationallowed①">variableDurationAllowed</a></code> (publisher capability) can be <code>true</code> or <code>false</code>. It should not be used in any case where disallowing
the pause interferes with the ad KPIs (for example if it can interfere
with completions, time spent in an interactive component, etc).</p>
      <li data-md>
       <p><code class="idl"><a data-link-type="idl" href="#dom-environmentdata-skippablestate" id="ref-for-dom-environmentdata-skippablestate">skippableState</a></code>: indicates whether the ad may be
skippable and which party controls the skippability, must be one of the <code class="idl"><a data-link-type="idl" href="#enumdef-skippablestate" id="ref-for-enumdef-skippablestate①">SkippableState</a></code> enum values.</p>
       <ul>
        <li data-md>
         <p><code class="idl"><a data-link-type="idl" href="#dom-skippablestate-playerhandles" id="ref-for-dom-skippablestate-playerhandles">playerHandles</a></code>: The player will render a skip
button and might skip the ad.</p>
        <li data-md>
         <p><code class="idl"><a data-link-type="idl" href="#dom-skippablestate-adhandles" id="ref-for-dom-skippablestate-adhandles">adHandles</a></code>: The ad may or may not render a skip
button.</p>
        <li data-md>
         <p><code class="idl"><a data-link-type="idl" href="#dom-skippablestate-notskippable" id="ref-for-dom-skippablestate-notskippable">notSkippable</a></code>: The ad cannot be skipped and the
SIVIC creative should not render a skip button. This may be common in
DAI for live streams.</p>
       </ul>
      <li data-md>
       <p><code class="idl"><a data-link-type="idl" href="#dom-environmentdata-siteurl" id="ref-for-dom-environmentdata-siteurl">siteUrl</a></code> Indicating the website the ad will play on,
for example if the site was <code>www.xyz.com/videoId</code>, this information would
include at least <code>www.xyz.com</code>. The player may give more information.
Desired for reporting and troubleshooting.</p>
      <li data-md>
       <p><code class="idl"><a data-link-type="idl" href="#dom-environmentdata-appid" id="ref-for-dom-environmentdata-appid">appId</a></code> The id of the app if applicable</p>
      <li data-md>
       <p><code class="idl"><a data-link-type="idl" href="#dom-environmentdata-useragent" id="ref-for-dom-environmentdata-useragent">useragent</a></code> Data about sdks and players</p>
      <li data-md>
       <p><code class="idl"><a data-link-type="idl" href="#dom-environmentdata-deviceid" id="ref-for-dom-environmentdata-deviceid">deviceId</a></code> IDFA or AAID would be used primarily for 3rd
party tracking of custom events</p>
      <li data-md>
       <p><code class="idl"><a data-link-type="idl" href="#dom-environmentdata-muted" id="ref-for-dom-environmentdata-muted">muted</a></code> (boolean): True if the audio is muted.</p>
      <li data-md>
       <p><code class="idl"><a data-link-type="idl" href="#dom-environmentdata-volume" id="ref-for-dom-environmentdata-volume">volume</a></code> (number): The volume which should be between 0 and 1.0.</p>
     </ul>
   </ul>
   <p class="issue" id="issue-ba704354"><a class="self-link" href="#issue-ba704354"></a> useragent needs some definition or a link to where how this should be populated.</p>
   <h4 class="heading settled" data-level="6.4.3" id="sivic-player-startCreative"><span class="secno">6.4.3. </span><span class="content">SIVIC:Player:startCreative</span><a class="self-link" href="#sivic-player-startCreative"></a></h4>
   <p>SIVIC:Player:startCreative must be called after the iframe is made visible.</p>
   <h4 class="heading settled" data-level="6.4.4" id="sivic-player-adSkipped"><span class="secno">6.4.4. </span><span class="content">SIVIC:Player:adSkipped</span><a class="self-link" href="#sivic-player-adSkipped"></a></h4>
    This indicates the player will skip the ad. The player should hide the creative and stop video playback in this case.
The player should wait for a response before unloading the creative iframe. 
   <h4 class="heading settled" data-level="6.4.5" id="sivic-player-adStopped"><span class="secno">6.4.5. </span><span class="content">SIVIC:Player:adStopped</span><a class="self-link" href="#sivic-player-adStopped"></a></h4>
    This indicates the player will stop the ad. The player should hide the creative and stop video playback in this case.
The player should wait for a response before unloading the creative iframe. 
   <p>parameters:</p>
   <ul>
    <li data-md>
     <p>code(int): reason for ad stopping</p>
   </ul>
   <p class="issue" id="issue-c8f72188"><a class="self-link" href="#issue-c8f72188"></a> These codes need to be defined.</p>
   <h4 class="heading settled" data-level="6.4.6" id="sivic-player-fatalError"><span class="secno">6.4.6. </span><span class="content">SIVIC:Player:fatalError</span><a class="self-link" href="#sivic-player-fatalError"></a></h4>
    The player has encountered a fatal error that will cause ad playback to stop. The player should stop video playback if
possible. Regardless of if playback is stopped the player should hide the creative and try to wait for a response
before unloading the creative iframe. 
   <ul>
    <li data-md>
     <p>errorCode(int): reason for error. See <a href="#error-codes">§8.2.1 Error Codes</a></p>
    <li data-md>
     <p>errorMessage(string): Any additional information.</p>
   </ul>
   <h3 class="heading settled" data-level="6.5" id="player-responses"><span class="secno">6.5. </span><span class="content">Responses from the player to the creative</span><a class="self-link" href="#player-responses"></a></h3>
   <h4 class="heading settled" data-level="6.5.1" id="sivic-creative-requestVideoLocation-response"><span class="secno">6.5.1. </span><span class="content">Response To SIVIC:Creative:requestVideoLocation</span><a class="self-link" href="#sivic-creative-requestVideoLocation-response"></a></h4>
   <h5 class="heading settled" data-level="6.5.1.1" id="sivic-creative-requestVideoLocation-resolve"><span class="secno">6.5.1.1. </span><span class="content">resolve</span><a class="self-link" href="#sivic-creative-requestVideoLocation-resolve"></a></h5>
    They player may or may not move the video but in either case it will resolve and tell the creative the video location.
parameters: 
   <ul>
    <li data-md>
     <p>x (int): The new video x location.</p>
    <li data-md>
     <p>y (int): The new video y location.</p>
   </ul>
   <h4 class="heading settled" data-level="6.5.2" id="sivic-creative-ready-response"><span class="secno">6.5.2. </span><span class="content">Response To SIVIC:Creative:ready</span><a class="self-link" href="#sivic-creative-ready-response"></a></h4>
   <h5 class="heading settled" data-level="6.5.2.1" id="sivic-creative-ready-resolve"><span class="secno">6.5.2.1. </span><span class="content">resolve</span><a class="self-link" href="#sivic-creative-ready-resolve"></a></h5>
    parameters: 
   <ul>
    <li data-md>
     <p>version (string): The version of SIVIC that will be used. The version from the player will be the source of truth.</p>
   </ul>
   <h5 class="heading settled" data-level="6.5.2.2" id="sivic-creative-ready-reject"><span class="secno">6.5.2.2. </span><span class="content">reject</span><a class="self-link" href="#sivic-creative-ready-reject"></a></h5>
    parameters: 
   <ul>
    <li data-md>
     <p>reason (string): An optional string error message.</p>
    <li data-md>
     <p>errorCode (int): the code for why the creative won’t play. See <a href="#error-codes">§8.2.1 Error Codes</a></p>
   </ul>
   <h4 class="heading settled" data-level="6.5.3" id="sivic-creative-requestSkip-response"><span class="secno">6.5.3. </span><span class="content">Response To SIVIC:Creative:requestSkip</span><a class="self-link" href="#sivic-creative-requestSkip-response"></a></h4>
   <h5 class="heading settled" data-level="6.5.3.1" id="sivic-creative-requestSkip-resolve"><span class="secno">6.5.3.1. </span><span class="content">resolve</span><a class="self-link" href="#sivic-creative-requestSkip-resolve"></a></h5>
    Upon resolving this request, the player must call <a href="#sivic-player-adSkipped">§6.4.4 SIVIC:Player:adSkipped</a>. 
   <h5 class="heading settled" data-level="6.5.3.2" id="sivic-creative-requestSkip-reject"><span class="secno">6.5.3.2. </span><span class="content">reject</span><a class="self-link" href="#sivic-creative-requestSkip-reject"></a></h5>
    The creative should continue to playback as though it could not be skipped. 
   <h4 class="heading settled" data-level="6.5.4" id="sivic-creative-requestStop-response"><span class="secno">6.5.4. </span><span class="content">Response To SIVIC:Creative:requestStop</span><a class="self-link" href="#sivic-creative-requestStop-response"></a></h4>
   <h5 class="heading settled" data-level="6.5.4.1" id="sivic-creative-requestStop-resolve"><span class="secno">6.5.4.1. </span><span class="content">resolve</span><a class="self-link" href="#sivic-creative-requestStop-resolve"></a></h5>
    Upon resolving this request, the player must call <a href="#sivic-player-adStopped">§6.4.5 SIVIC:Player:adStopped</a>. 
   <h5 class="heading settled" data-level="6.5.4.2" id="sivic-creative-requestStop-reject"><span class="secno">6.5.4.2. </span><span class="content">reject</span><a class="self-link" href="#sivic-creative-requestStop-reject"></a></h5>
    For some reason the player could not stop playback. The creative may continue
to render as though it was not stopped. 
   <h4 class="heading settled" data-level="6.5.5" id="sivic-creative-requestPause-response"><span class="secno">6.5.5. </span><span class="content">Response To SIVIC:Creative:requestPause</span><a class="self-link" href="#sivic-creative-requestPause-response"></a></h4>
   <h5 class="heading settled" data-level="6.5.5.1" id="sivic-creative-requestPause-resolve"><span class="secno">6.5.5.1. </span><span class="content">resolve</span><a class="self-link" href="#sivic-creative-requestPause-resolve"></a></h5>
    The player paused the video. 
   <h5 class="heading settled" data-level="6.5.5.2" id="sivic-creative-requestPause-reject"><span class="secno">6.5.5.2. </span><span class="content">reject</span><a class="self-link" href="#sivic-creative-requestPause-reject"></a></h5>
    The player did not pause the video. 
   <h4 class="heading settled" data-level="6.5.6" id="sivic-creative-requestPlay-response"><span class="secno">6.5.6. </span><span class="content">Response To SIVIC:Creative:requestPlay</span><a class="self-link" href="#sivic-creative-requestPlay-response"></a></h4>
   <h5 class="heading settled" data-level="6.5.6.1" id="sivic-creative-requestPlay-resolve"><span class="secno">6.5.6.1. </span><span class="content">resolve</span><a class="self-link" href="#sivic-creative-requestPlay-resolve"></a></h5>
    The player is playing the video. 
   <h5 class="heading settled" data-level="6.5.6.2" id="sivic-creative-requestPlay-reject"><span class="secno">6.5.6.2. </span><span class="content">reject</span><a class="self-link" href="#sivic-creative-requestPlay-reject"></a></h5>
    The player did not play the video. 
   <h4 class="heading settled" data-level="6.5.7" id="sivic-creative-requestFullscreen-response"><span class="secno">6.5.7. </span><span class="content">Response To SIVIC:Creative:requestFullscreen</span><a class="self-link" href="#sivic-creative-requestFullscreen-response"></a></h4>
   <h5 class="heading settled" data-level="6.5.7.1" id="sivic-creative-requestFullscreen-resolve"><span class="secno">6.5.7.1. </span><span class="content">resolve</span><a class="self-link" href="#sivic-creative-requestFullscreen-resolve"></a></h5>
    The player has gone full screen. 
   <h5 class="heading settled" data-level="6.5.7.2" id="sivic-creative-requestFullscreen-reject"><span class="secno">6.5.7.2. </span><span class="content">reject</span><a class="self-link" href="#sivic-creative-requestFullscreen-reject"></a></h5>
    The player did go full screen. 
   <h4 class="heading settled" data-level="6.5.8" id="sivic-creative-requestChangeVolume-response"><span class="secno">6.5.8. </span><span class="content">Response To SIVIC:Creative:requestChangeVolume</span><a class="self-link" href="#sivic-creative-requestChangeVolume-response"></a></h4>
   <h5 class="heading settled" data-level="6.5.8.1" id="sivic-creative-requestChangeVolume-resolve"><span class="secno">6.5.8.1. </span><span class="content">resolve</span><a class="self-link" href="#sivic-creative-requestChangeVolume-resolve"></a></h5>
    The player has changed the volume as requested. 
   <h5 class="heading settled" data-level="6.5.8.2" id="sivic-creative-requestChangeVolume-reject"><span class="secno">6.5.8.2. </span><span class="content">reject</span><a class="self-link" href="#sivic-creative-requestChangeVolume-reject"></a></h5>
    The player did not change to the requested volume. 
   <h4 class="heading settled" data-level="6.5.9" id="sivic-creative-requestResize-response"><span class="secno">6.5.9. </span><span class="content">Response To SIVIC:Creative:requestResize</span><a class="self-link" href="#sivic-creative-requestResize-response"></a></h4>
   <h5 class="heading settled" data-level="6.5.9.1" id="sivic-creative-requestResize-resolve"><span class="secno">6.5.9.1. </span><span class="content">resolve</span><a class="self-link" href="#sivic-creative-requestResize-resolve"></a></h5>
    The player has resized exactly as it has been requested. 
   <h5 class="heading settled" data-level="6.5.9.2" id="sivic-creative-requestResize-reject"><span class="secno">6.5.9.2. </span><span class="content">reject</span><a class="self-link" href="#sivic-creative-requestResize-reject"></a></h5>
    The player did not resize to the exact request. If the player was only able to partially comply, it should still
reject the message. Then the player should call the message <a href="#sivic-player-resize">§6.4.1 SIVIC:Player:resize</a> to let the creative know
what resize happened. 
   <h4 class="heading settled" data-level="6.5.10" id="sivic-creative-requestChangeAdDuration-response"><span class="secno">6.5.10. </span><span class="content">Response To SIVIC:Creative:requestChangeAdDuration</span><a class="self-link" href="#sivic-creative-requestChangeAdDuration-response"></a></h4>
   <h5 class="heading settled" data-level="6.5.10.1" id="sivic-creative-requestChangeAdDuration-resolve"><span class="secno">6.5.10.1. </span><span class="content">resolve</span><a class="self-link" href="#sivic-creative-requestChangeAdDuration-resolve"></a></h5>
    The player changed the ad duration. 
   <h5 class="heading settled" data-level="6.5.10.2" id="sivic-creative-requestChangeAdDuration-reject"><span class="secno">6.5.10.2. </span><span class="content">reject</span><a class="self-link" href="#sivic-creative-requestChangeAdDuration-reject"></a></h5>
    The player did not change the ad duration. 
   <h4 class="heading settled" data-level="6.5.11" id="sivic-creative-reportTracking-response"><span class="secno">6.5.11. </span><span class="content">Response To SIVIC:Creative:reportTracking</span><a class="self-link" href="#sivic-creative-reportTracking-response"></a></h4>
   <h5 class="heading settled" data-level="6.5.11.1" id="sivic-creative-reportTracking-resolve"><span class="secno">6.5.11.1. </span><span class="content">resolve</span><a class="self-link" href="#sivic-creative-reportTracking-resolve"></a></h5>
    The player sends resolve if tracking has been sent out. Returning resolve on this message
should not block waiting for a response from the site. 
   <h5 class="heading settled" data-level="6.5.11.2" id="sivic-creative-reportTracking-reject"><span class="secno">6.5.11.2. </span><span class="content">reject</span><a class="self-link" href="#sivic-creative-reportTracking-reject"></a></h5>
    The player did not send the tracking pixel. 
   <p>parameters:</p>
   <ul>
    <li data-md>
     <p>reason(string): An optional string error message</p>
    <li data-md>
     <p>errorCode(int): The code for why the player did not attempt to send a tracking pixel. See <a href="#error-codes">§8.2.1 Error Codes</a></p>
   </ul>
   <h3 class="heading settled" data-level="6.6" id="creative-messages"><span class="secno">6.6. </span><span class="content">Messages from the Creative to the Player</span><a class="self-link" href="#creative-messages"></a></h3>
    All functions should be prepended with SIVIC:Creative 
   <h4 class="heading settled" data-level="6.6.1" id="sivic-creative-ready"><span class="secno">6.6.1. </span><span class="content">SIVIC:Creative:ready</span><a class="self-link" href="#sivic-creative-ready"></a></h4>
    The very first call the SIVIC creative should make. This indicates it is loaded and ready to recieve messages
from the player. 
   <p>Expects a response <a href="#sivic-creative-ready-response">§6.5.2 Response To SIVIC:Creative:ready</a></p>
   <h4 class="heading settled" data-level="6.6.2" id="sivic-creative-requestSkip"><span class="secno">6.6.2. </span><span class="content">SIVIC:Creative:requestSkip</span><a class="self-link" href="#sivic-creative-requestSkip"></a></h4>
    The player should stop video playback if possible. 
   <p>If the player cannot stop video playback, the player still does not unload the iframe.</p>
   <p>Expects a response <a href="#sivic-creative-requestSkip-response">§6.5.3 Response To SIVIC:Creative:requestSkip</a></p>
   <h4 class="heading settled" data-level="6.6.3" id="sivic-creative-requestStop"><span class="secno">6.6.3. </span><span class="content">SIVIC:Creative:requestStop</span><a class="self-link" href="#sivic-creative-requestStop"></a></h4>
    The player should stop video playback if possible. 
   <p>If the player cannot stop video playback, the player still unloads the iframe. The creative may hide all elements
in this case if it doesn’t wish to be seen.</p>
   <p>Expects a response <a href="#sivic-creative-requestStop-response">§6.5.4 Response To SIVIC:Creative:requestStop</a></p>
   <h4 class="heading settled" data-level="6.6.4" id="sivic-creative-fatalError"><span class="secno">6.6.4. </span><span class="content">SIVIC:Creative:fatalError</span><a class="self-link" href="#sivic-creative-fatalError"></a></h4>
    After this message is received, the iframe should be unloaded and the video ad should stop playback if possible.
If the video ad continues to play the iframe should still be unloaded. 
   <p>parameters:</p>
   <ul>
    <li data-md>
     <p>errorCode(int): reason for error. See <a href="#error-codes">§8.2.1 Error Codes</a></p>
    <li data-md>
     <p>errorMessage(string): Any optional additional information about the fatal error.</p>
   </ul>
   <h4 class="heading settled" data-level="6.6.5" id="sivic-creative-requestPause"><span class="secno">6.6.5. </span><span class="content">SIVIC:Creative:requestPause</span><a class="self-link" href="#sivic-creative-requestPause"></a></h4>
    Expects a response <a href="#sivic-creative-requestPause-response">§6.5.5 Response To SIVIC:Creative:requestPause</a> 
   <h4 class="heading settled" data-level="6.6.6" id="sivic-creative-requestPlay"><span class="secno">6.6.6. </span><span class="content">SIVIC:Creative:requestPlay</span><a class="self-link" href="#sivic-creative-requestPlay"></a></h4>
    Expects a response <a href="#sivic-creative-requestPlay-response">§6.5.6 Response To SIVIC:Creative:requestPlay</a> 
   <h4 class="heading settled" data-level="6.6.7" id="sivic-creative-requestResize"><span class="secno">6.6.7. </span><span class="content">SIVIC:Creative:requestResize</span><a class="self-link" href="#sivic-creative-requestResize"></a></h4>
   <p>Request resize should use the <code class="idl"><a data-link-type="idl" href="#dictdef-resizeparameters" id="ref-for-dictdef-resizeparameters">resizeParameters</a></code> which are explained in <a href="#sivic-player-resize">§6.4.1 SIVIC:Player:resize</a></p>
   <p>Expects a reponse <a href="#sivic-creative-requestResize-response">§6.5.9 Response To SIVIC:Creative:requestResize</a></p>
   <h4 class="heading settled" data-level="6.6.8" id="sivic-creative-requestFullScreen"><span class="secno">6.6.8. </span><span class="content">SIVIC:Creative:requestFullScreen</span><a class="self-link" href="#sivic-creative-requestFullScreen"></a></h4>
    Expects a reponse <a href="#sivic-creative-requestFullscreen-response">§6.5.7 Response To SIVIC:Creative:requestFullscreen</a> 
   <h4 class="heading settled" data-level="6.6.9" id="sivic-creative-requestChangeVolume"><span class="secno">6.6.9. </span><span class="content">SIVIC:Creative:requestChangeVolume</span><a class="self-link" href="#sivic-creative-requestChangeVolume"></a></h4>
    paramaters: 
   <ul>
    <li data-md>
     <p>volume(float): a number between 0 and 1 indicating what volume the creative wants.</p>
    <li data-md>
     <p>muted(boolean): True indicates the creative wants the volume muted.</p>
   </ul>
   <p>Expects a reponse <a href="#sivic-creative-requestChangeVolume-response">§6.5.8 Response To SIVIC:Creative:requestChangeVolume</a></p>
   <h4 class="heading settled" data-level="6.6.10" id="sivic-creative-reportTracking"><span class="secno">6.6.10. </span><span class="content">SIVIC:Creative:reportTracking</span><a class="self-link" href="#sivic-creative-reportTracking"></a></h4>
    paramaters: 
   <ul>
    <li data-md>
     <p>
      trackingUrls(Array
      <string>): an array or tracking pixels that the publisher should fire</string>
     </p>
   </ul>
   <p>Expects a response <a href="#sivic-creative-reportTracking-response">§6.5.11 Response To SIVIC:Creative:reportTracking</a></p>
   <h4 class="heading settled" data-level="6.6.11" id="sivic-creative-requestChangeAdDuration"><span class="secno">6.6.11. </span><span class="content">SIVIC:Creative:requestChangeAdDuration</span><a class="self-link" href="#sivic-creative-requestChangeAdDuration"></a></h4>
    Extension in duration should only be in response to user interaction. 
   <p>paramaters:</p>
   <ul>
    <li data-md>
     <p>duration(int): The new duration of the creative. -2 indicates unknown ad duration.</p>
   </ul>
   <p>Expects a response <a href="#sivic-creative-requestChangeAdDuration-response">§6.5.10 Response To SIVIC:Creative:requestChangeAdDuration</a></p>
   <h4 class="heading settled" data-level="6.6.12" id="sivic-creative-clickThru"><span class="secno">6.6.12. </span><span class="content">SIVIC:Creative:clickThru</span><a class="self-link" href="#sivic-creative-clickThru"></a></h4>
   <p>The creative must handle click-thru due to the nature of cross-origin iframes. This message must only be sent in response to a user-initiated click that is considered a click-thru by the creative.</p>
   <p>The main purpose of this message is for the player to track click-thrus. Since not every navigation is a click-thru, it should not be used for adjusting media playback status (pause, mute). If the player wants to update media playback status as a result of navigation, it should detect it via some other environment-specific method (eg. <a href="https://developer.mozilla.org/en-US/docs/Web/API/Page_Visibility_API">Page Visibility API</a> on web and in apps).</p>
   <p>Parameters:</p>
   <ul>
    <li data-md>
     <p>x (int): the x coordinate of the click relative to the left of the creative.</p>
    <li data-md>
     <p>y (int): the y coordinate of the click relative to the top of the creative.</p>
   </ul>
   <h4 class="heading settled" data-level="6.6.13" id="sivic-creative-getVideoState"><span class="secno">6.6.13. </span><span class="content">SIVIC:Creative:getVideoState</span><a class="self-link" href="#sivic-creative-getVideoState"></a></h4>
    Expects a response <a href="#sivic-creative-getVideoState-response">§6.3.1 Response To SIVIC:Creative:getVideoState</a> 
   <h3 class="heading settled" data-level="6.7" id="creative-responses"><span class="secno">6.7. </span><span class="content">Responses from the creative to the player</span><a class="self-link" href="#creative-responses"></a></h3>
   <h4 class="heading settled" data-level="6.7.1" id="sivic-player-init-response"><span class="secno">6.7.1. </span><span class="content">Response To SIVIC:Player:init</span><a class="self-link" href="#sivic-player-init-response"></a></h4>
   <h5 class="heading settled" data-level="6.7.1.1" id="sivic-player-init-resolve"><span class="secno">6.7.1.1. </span><span class="content">resolve</span><a class="self-link" href="#sivic-player-init-resolve"></a></h5>
    The creative acknowledges the initialization parameters. 
   <h5 class="heading settled" data-level="6.7.1.2" id="sivic-player-init-reject"><span class="secno">6.7.1.2. </span><span class="content">reject</span><a class="self-link" href="#sivic-player-init-reject"></a></h5>
   <ul>
    <li data-md>
     <p>reason(string): An optional string error message</p>
    <li data-md>
     <p>errorCode(int): The code for what went wrong in initialization. See <a href="#error-codes">§8.2.1 Error Codes</a></p>
   </ul>
   <h4 class="heading settled" data-level="6.7.2" id="sivic-player-startCreative-response"><span class="secno">6.7.2. </span><span class="content">Response To SIVIC:Player:startCreative</span><a class="self-link" href="#sivic-player-startCreative-response"></a></h4>
   <h5 class="heading settled" data-level="6.7.2.1" id="sivic-player-startCreative-resolve"><span class="secno">6.7.2.1. </span><span class="content">resolve</span><a class="self-link" href="#sivic-player-startCreative-resolve"></a></h5>
    The creative acknowledges that it has started playback. The player must make the creative visible to the user. 
   <h5 class="heading settled" data-level="6.7.2.2" id="sivic-player-startCreative-reject"><span class="secno">6.7.2.2. </span><span class="content">reject</span><a class="self-link" href="#sivic-player-startCreative-reject"></a></h5>
   <ul>
    <li data-md>
     <p>reason(string): An optional string error message</p>
    <li data-md>
     <p>errorCode(int): The code for what went wrong in initialization. See <a href="#error-codes">§8.2.1 Error Codes</a></p>
   </ul>
   <h4 class="heading settled" data-level="6.7.3" id="sivic-player-adSkipped-response"><span class="secno">6.7.3. </span><span class="content">Response To SIVIC:Player:adSkipped</span><a class="self-link" href="#sivic-player-adSkipped-response"></a></h4>
   <h5 class="heading settled" data-level="6.7.3.1" id="sivic-player-adSkipped-resolve"><span class="secno">6.7.3.1. </span><span class="content">resolve</span><a class="self-link" href="#sivic-player-adSkipped-resolve"></a></h5>
    After resolve is called, the iframe will be removed. 
   <h4 class="heading settled" data-level="6.7.4" id="sivic-player-adStopped-response"><span class="secno">6.7.4. </span><span class="content">Response To SIVIC:Player:adStopped</span><a class="self-link" href="#sivic-player-adStopped-response"></a></h4>
   <h5 class="heading settled" data-level="6.7.4.1" id="sivic-player-adStopped-resolve"><span class="secno">6.7.4.1. </span><span class="content">resolve</span><a class="self-link" href="#sivic-player-adStopped-resolve"></a></h5>
    After resolve is called, the iframe will be removed. 
   <h4 class="heading settled" data-level="6.7.5" id="sivic-player-fatalError-response"><span class="secno">6.7.5. </span><span class="content">Response To SIVIC:Player:fatalError</span><a class="self-link" href="#sivic-player-fatalError-response"></a></h4>
   <h5 class="heading settled" data-level="6.7.5.1" id="sivic-player-fatalError-resolve"><span class="secno">6.7.5.1. </span><span class="content">resolve</span><a class="self-link" href="#sivic-player-fatalError-resolve"></a></h5>
    After resolve is called, the iframe will be removed. 
   <h3 class="heading settled" data-level="6.8" id="api-vast"><span class="secno">6.8. </span><span class="content">Referencing a SIVIC creative from VAST</span><a class="self-link" href="#api-vast"></a></h3>
   <p>When a SIVIC creative is referenced from a VAST document, the value for the <code>apiFramework</code> attribute in the <code>InteractiveCreativeFile</code> element must be <code>SIVIC</code> (all caps). This attribute identifies the SIVIC API for the creative.
Version information should be handled by the<a href="#sivic-creative-ready-response">§6.5.2 Response To SIVIC:Creative:ready</a> message
(rather than identified in the VAST file).</p>
   <p>Another attribute of the <code>InteractiveCreativeFile</code> is <code>variableDuration</code> which
identifies whether the ad always drops when the duration is reached, or if it
can potentially extend the duration by pausing the underlying video or delaying
the <code>adStopped</code> event after <code>adVideoComplete</code>.</p>
   <h2 class="heading settled" data-level="7" id="common-workflows"><span class="secno">7. </span><span class="content">Common Workflows</span><a class="self-link" href="#common-workflows"></a></h2>
   <h3 class="heading settled" data-level="7.1" id="api-ad-loading"><span class="secno">7.1. </span><span class="content">How to Handle Ad Loading</span><a class="self-link" href="#api-ad-loading"></a></h3>
   <p>The player must follow this workflow for loading an ad.</p>
   <ol>
    <li data-md>
     <p>The player must create an iframe element for the SIVIC creative. The player
  iframe should start out hidden. The iframe should be capable executing
  javascript and loading resources.</p>
    <li data-md>
     <p>The player starts listening on the window that is the parent of the iframe
   for messages from the creative.</p>
    <li data-md>
     <p>The player sets the src element of the iframe to the url provided by
  the creatives VAST InteractiveCreativeFile element. The player should
  assume this will be a cross domain iframe.</p>
    <li data-md>
     <p>The player waits until the creative inializes a session. <a href="#establish-session">§5.2.1 Establishing a new session</a> The player responds with a resolve message.
  The resolve message includes the correlator that must be present in
  all messages going forward.</p>
    <li data-md>
     <p>The player then calls <a href="#sivic-player-init">§6.4.2 SIVIC:Player:init</a> with all relevant parameters.
  The player waits until the creative responds with resolve.  If the
  creative responds with reject, the player should immediately unload
  the creative’s iframe.</p>
    <li data-md>
     <p>Where possible the player should wait until both the creative has responded
  to the <a href="#sivic-player-init">§6.4.2 SIVIC:Player:init</a> and the video is ready to start playing. Ready
  to start playing means the first frame will show and playback will continue.</p>
    <li data-md>
     <p>When the video is started the player calls <a href="#sivic-player-startcreative"></a>.
  The player must overlay the creative iframe over the video element exactly.
  The player must make the creative visible. The creative should respond to
  this message immediately with <a href="#sivic-player-startCreative-resolve">§6.7.2.1 resolve</a>.</p>
   </ol>
   <h3 class="heading settled" data-level="7.2" id="api-ad-playback"><span class="secno">7.2. </span><span class="content">How to Handle Ad Playback</span><a class="self-link" href="#api-ad-playback"></a></h3>
   <p>The video player is responsible for handling playback of the video as well as
tracking video related events. The SIVIC creative on the other hand handles
playback of interactive content and internal tracking related to interactivity
(custom events, creative impression if desired (recommended)).</p>
   <h4 class="heading settled" data-level="7.2.1" id="api-ad-pause"><span class="secno">7.2.1. </span><span class="content">Ad Pause</span><a class="self-link" href="#api-ad-pause"></a></h4>
   <p>If the <code class="idl"><a data-link-type="idl" href="#dom-environmentdata-variabledurationallowed" id="ref-for-dom-environmentdata-variabledurationallowed②">variableDurationAllowed</a></code> flag is set to <code>true</code> then
the player should enable video pause by the SIVIC creative via the
SIVIC:Creative:requestPause message. The player must respond to
SIVIC:Creative:requestPause with the <code>AdPaused</code> event.</p>
   <p>When the SIVIC creative would like to resume video playback, it should call the
SIVIC:Creative:requestPlay message. The player must
respond to SIVIC:Creative:requestPlay message with resolve and play the video.</p>
   <h4 class="heading settled" data-level="7.2.2" id="api-resizing"><span class="secno">7.2.2. </span><span class="content">Ad Resizing and Fullscreen</span><a class="self-link" href="#api-resizing"></a></h4>
   <p class="issue" id="issue-6ed90d5c"><a class="self-link" href="#issue-6ed90d5c"></a> can width / height coordination not be done through the iframe width
height, which would not require any API?</p>
   <p>The player may resize the ad slot. The player must call <a href="#sivic-player-resize">§6.4.1 SIVIC:Player:resize</a> any time the ad slot size is changed.</p>
   <p>If <code class="idl"><a data-link-type="idl" href="#dom-environmentdata-fullscreenallowed" id="ref-for-dom-environmentdata-fullscreenallowed①">fullscreenAllowed</a></code> is <code>true</code>, the SIVIC creative may
call the <a href="#sivic-creative-requestFullScreen">§6.6.8 SIVIC:Creative:requestFullScreen</a> method. The player must resize only the ad
slot to fullscreen (not the video). The SIVIC creative then will resize the
video as it sees fit. The player must call <a href="#sivic-player-resize">§6.4.1 SIVIC:Player:resize</a> on the SIVIC creative
with <code class="idl"><a data-link-type="idl" href="#dom-resizeparameters-fullscreen" id="ref-for-dom-resizeparameters-fullscreen②">fullScreen</a></code> set to <code>true</code> and <code class="idl"><a data-link-type="idl">width</a></code> and <code class="idl"><a data-link-type="idl">width</a></code> set to the full screen dimensions.</p>
   <p>If player goes fullscreen on its own. Then the player must call <a href="#sivic-player-resize">§6.4.1 SIVIC:Player:resize</a> on the SIVIC creative
with <code class="idl"><a data-link-type="idl" href="#dom-resizeparameters-fullscreen" id="ref-for-dom-resizeparameters-fullscreen③">fullScreen</a></code> set to <code>true</code> and <code class="idl"><a data-link-type="idl">width</a></code> and <code class="idl"><a data-link-type="idl">width</a></code> set to the full screen dimensions.</p>
   <p class="issue" id="issue-eea3696d"><a class="self-link" href="#issue-eea3696d"></a> should the player not also resize the video slot?</p>
   <h3 class="heading settled" data-level="7.3" id="api-end"><span class="secno">7.3. </span><span class="content">How to Handle Ad End and Unload</span><a class="self-link" href="#api-end"></a></h3>
   <p>Following are cases where ad can end:</p>
   <ol>
    <li data-md>
     <p>Ad was skipped, either by player or creative (if the ad contains
the skip button). See <a href="#api-skip">§7.3.1 Ad Skips</a>.</p>
    <li data-md>
     <p>The creative has fired <a href="#sivic-creative-requestStop">§6.6.3 SIVIC:Creative:requestStop</a> message and the player has allowed the ad to stop.</p>
    <li data-md>
     <p>The player has fired <a href="#sivic-player-adStopped">§6.4.5 SIVIC:Player:adStopped</a> message and the creative resolved.</p>
    <li data-md>
     <p>Ad errors out. See <a href="#api-error">§7.3.5 Ad Errors Out</a>.</p>
   </ol>
   <h4 class="heading settled" data-level="7.3.1" id="api-skip"><span class="secno">7.3.1. </span><span class="content">Ad Skips</span><a class="self-link" href="#api-skip"></a></h4>
   <p><strong>Skip Ad Handled by Player</strong></p>
   <ol>
    <li data-md>
     <p>The player calls <a href="#sivic-player-adSkipped">§6.4.4 SIVIC:Player:adSkipped</a> on the ad.</p>
    <li data-md>
     <p>The player hides the creative.</p>
    <li data-md>
     <p>The creative may dispatch any tracking pixels via <a href="#sivic-creative-reportTracking">§6.6.10 SIVIC:Creative:reportTracking</a></p>
    <li data-md>
     <p>The creative may wait for <a href="#sivic-creative-reportTracking-resolve">§6.5.11.1 resolve</a> from the reportTracking call.</p>
    <li data-md>
     <p>The creative dispatches <code>resolve</code> on the <code>adSkipped</code> message <a href="#sivic-player-adSkipped-resolve">§6.7.3.1 resolve</a>.</p>
    <li data-md>
     <p>The player fires any skip tracking pixels.</p>
    <li data-md>
     <p>The player unloads the ad.</p>
   </ol>
   <p><strong>Skip Ad Handled by Ad</strong></p>
   <ol>
    <li data-md>
     <p>The creative dispatches <a href="#sivic-creative-requestSkip">§6.6.2 SIVIC:Creative:requestSkip</a>.</p>
    <li data-md>
     <p>The player dispatches resolves the to the <code>requestSkip</code> message.</p>
    <li data-md>
     <p>The player follows all the steps in <code>Skip Ad Handled by Player</code>.</p>
   </ol>
   <h4 class="heading settled" data-level="7.3.2" id="api-end-before-complete"><span class="secno">7.3.2. </span><span class="content">Ad Ends Before Video Completion</span><a class="self-link" href="#api-end-before-complete"></a></h4>
   <p>This scenario applies when the ad chooses to signal the player to kill it,
typically at the prompting of the viewer. A good example would be a survey that
allows the viewer to skip immediately to content when completed.</p>
   <ol>
    <li data-md>
     <p>The ad cleans up and dispatches <a href="#sivic-creative-requestStop">§6.6.3 SIVIC:Creative:requestStop</a>.</p>
    <li data-md>
     <p>The player unloads the ad.</p>
   </ol>
   <h4 class="heading settled" data-level="7.3.3" id="api-extend"><span class="secno">7.3.3. </span><span class="content">Ad Extends Beyond Video Completion</span><a class="self-link" href="#api-extend"></a></h4>
   <p>This scenario is only possible when the <code class="idl"><a data-link-type="idl" href="#dom-environmentdata-variabledurationallowed" id="ref-for-dom-environmentdata-variabledurationallowed③">variableDurationAllowed</a></code> flag is set to <code>true</code>. Video
duration must only be extended in response to user interaction.</p>
   <ol>
    <li data-md>
     <p>User interacts at any point during playback of the video, triggering extended
ad portion.</p>
    <li data-md>
     <p>The Creative dispatches <a href="#sivic-creative-requestChangeAdDuration">§6.6.11 SIVIC:Creative:requestChangeAdDuration</a> message with the new duration.</p>
    <li data-md>
     <p>The ad enters its extended phase.</p>
    <li data-md>
     <p>The creative dispatches <a href="#sivic-creative-requestStop">§6.6.3 SIVIC:Creative:requestStop</a> when extended phase is finished.</p>
   </ol>
   <p class="issue" id="issue-75380958"><a class="self-link" href="#issue-75380958"></a> clarify the value of the <code>duration</code> property as the current text
does not seem to make much sense</p>
   <h4 class="heading settled" data-level="7.3.4" id="api-complete"><span class="secno">7.3.4. </span><span class="content">Ad Completes at Video Completion</span><a class="self-link" href="#api-complete"></a></h4>
   <p>When an ad finishes at the same time as its video.</p>
   <ol>
    <li data-md>
     <p>The player calls <a href="#sivic-player-adStopped">§6.4.5 SIVIC:Player:adStopped</a> on the ad.</p>
    <li data-md>
     <p>The player hides the creative.</p>
    <li data-md>
     <p>The creative may dispatch any tracking pixels via <a href="#sivic-creative-reportTracking">§6.6.10 SIVIC:Creative:reportTracking</a></p>
    <li data-md>
     <p>The creative may wait for <a href="#sivic-creative-reportTracking-resolve">§6.5.11.1 resolve</a> from the reportTracking call.</p>
    <li data-md>
     <p>The creative dispatches <code>resolve</code> on the <code>adSkipped</code> message <a href="#sivic-player-adStopped-resolve">§6.7.4.1 resolve</a>.</p>
    <li data-md>
     <p>The player unloads the ad.</p>
   </ol>
   <h4 class="heading settled" data-level="7.3.5" id="api-error"><span class="secno">7.3.5. </span><span class="content">Ad Errors Out</span><a class="self-link" href="#api-error"></a></h4>
   <p>The SIVIC creative or the player may terminate the ad unit with an error at any
time. If the SIVIC creative indicates an error, the player should try to stop ad
unit playback. This might not be possible in server side stitched ads.</p>
   <p>The player may error out if the ad does not respond with <a href="#sivic-creative-ready">§6.6.1 SIVIC:Creative:ready</a> and <a href="#sivic-player-init-resolve">§6.7.1.1 resolve</a> in a reasonable amount of time.</p>
   <p>When an player errors out it must follow these steps.</p>
   <ol>
    <li data-md>
     <p>The player calls <a href="#sivic-player-fatalError">§6.4.6 SIVIC:Player:fatalError</a> on the ad.</p>
    <li data-md>
     <p>The player hides the creative.</p>
    <li data-md>
     <p>The creative may dispatch any tracking pixels via <a href="#sivic-creative-reportTracking">§6.6.10 SIVIC:Creative:reportTracking</a></p>
    <li data-md>
     <p>The creative may wait for <a href="#sivic-creative-reportTracking-resolve">§6.5.11.1 resolve</a> from the reportTracking call.</p>
    <li data-md>
     <p>The creative dispatches <code>resolve</code> on the <code>adSkipped</code> message <a href="#sivic-player-fatalError-resolve">§6.7.5.1 resolve</a>.</p>
    <li data-md>
     <p>The player unloads the ad.</p>
   </ol>
   <h4 class="heading settled" data-level="7.3.6" id="api-notes"><span class="secno">7.3.6. </span><span class="content">Additional Notes</span><a class="self-link" href="#api-notes"></a></h4>
   <p>The player may call <a href="#sivic-player-adStopped">§6.4.5 SIVIC:Player:adStopped</a> at any time. The creative should respond with <code>resolved</code> after finishing its ad end logic. The player should allow 1 second
between calling <a href="#sivic-player-adStopped">§6.4.5 SIVIC:Player:adStopped</a> and receiving <code>resolved</code>. The implementer of the
player should take into consideration that dropping a SIVIC ad unit before it has
dispatched <code>resolved</code> may result in tracking discrepancies, and that calling <a href="#sivic-player-adStopped">§6.4.5 SIVIC:Player:adStopped</a> before the ad experience has ended (which is AFTER the optional
lean-in phase) could harm the overall ad experience.</p>
   <p>The SIVIC creative may also dispatch <a href="#sivic-creative-requestStop">§6.6.3 SIVIC:Creative:requestStop</a> at any time, signaling to the
player that the ad has finished and unloaded. Any further interaction with the
SIVIC creative after <code>requestStop</code> may not result in the desired outcome. The same
is true for <code>fatalError</code>.</p>
   <h2 class="heading settled" data-level="8" id="protocol"><span class="secno">8. </span><span class="content">Protocol Details</span><a class="self-link" href="#protocol"></a></h2>
   <h3 class="heading settled" data-level="8.1" id="objects"><span class="secno">8.1. </span><span class="content">Objects</span><a class="self-link" href="#objects"></a></h3>
   <h4 class="heading settled" data-level="8.1.1" id="entry-point"><span class="secno">8.1.1. </span><span class="content">Entry Point</span><a class="self-link" href="#entry-point"></a></h4>
<pre class="idl highlight def"><c- b>partial</c-> <c- b>interface</c-> <c- b>mixin</c-> <a class="idl-code" data-link-type="interface" href="https://html.spec.whatwg.org/multipage/window-object.html#window" id="ref-for-window"><c- g>Window</c-></a> {
  [<a class="idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#SameObject" id="ref-for-SameObject"><c- g>SameObject</c-></a>] <a class="n" data-link-type="idl-name" href="#ad" id="ref-for-ad"><c- n>Ad</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="Window" data-dfn-type="method" data-export data-lt="getSIVICAd()" id="dom-window-getsivicad"><code><c- g>getSIVICAd</c-></code></dfn>();
};
</pre>
   <h4 class="heading settled" data-level="8.1.2" id="object-ad"><span class="secno">8.1.2. </span><span class="content">Ad Interface</span><a class="self-link" href="#object-ad"></a></h4>
<pre class="idl highlight def"><c- b>interface</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export id="ad"><code><c- g>Ad</c-></code></dfn> {
  <a class="n" data-link-type="idl-name"><c- n>string</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="Ad" data-dfn-type="method" data-export data-lt="handshakeVersion(supportedVersion)" id="dom-ad-handshakeversion"><code><c- g>handshakeVersion</c-></code></dfn>(<a class="n" data-link-type="idl-name"><c- n>string</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="Ad/handshakeVersion(supportedVersion)" data-dfn-type="argument" data-export id="dom-ad-handshakeversion-supportedversion-supportedversion"><code><c- g>supportedVersion</c-></code></dfn>);
  <c- b>void</c-> <dfn class="idl-code" data-dfn-for="Ad" data-dfn-type="method" data-export data-lt="initAd(creativeData, envData)" id="dom-ad-initad"><code><c- g>initAd</c-></code><a class="self-link" href="#dom-ad-initad"></a></dfn>(<a class="n" data-link-type="idl-name" href="#dictdef-creativedata" id="ref-for-dictdef-creativedata①"><c- n>CreativeData</c-></a> <dfn class="idl-code" data-dfn-for="Ad/initAd(creativeData, envData)" data-dfn-type="argument" data-export id="dom-ad-initad-creativedata-envdata-creativedata"><code><c- g>creativeData</c-></code><a class="self-link" href="#dom-ad-initad-creativedata-envdata-creativedata"></a></dfn>, <a class="n" data-link-type="idl-name" href="#dictdef-environmentdata" id="ref-for-dictdef-environmentdata①"><c- n>EnvironmentData</c-></a> <dfn class="idl-code" data-dfn-for="Ad/initAd(creativeData, envData)" data-dfn-type="argument" data-export id="dom-ad-initad-creativedata-envdata-envdata"><code><c- g>envData</c-></code><a class="self-link" href="#dom-ad-initad-creativedata-envdata-envdata"></a></dfn>);
  <c- b>void</c-> <dfn class="idl-code" data-dfn-for="Ad" data-dfn-type="method" data-export data-lt="startAd()" id="dom-ad-startad"><code><c- g>startAd</c-></code><a class="self-link" href="#dom-ad-startad"></a></dfn>();
  <c- b>void</c-> <dfn class="dfn-paneled idl-code" data-dfn-for="Ad" data-dfn-type="method" data-export data-lt="stopAd()" id="dom-ad-stopad"><code><c- g>stopAd</c-></code></dfn>();
  <c- b>void</c-> <dfn class="idl-code" data-dfn-for="Ad" data-dfn-type="method" data-export data-lt="skipAd()" id="dom-ad-skipad"><code><c- g>skipAd</c-></code><a class="self-link" href="#dom-ad-skipad"></a></dfn>();
  <c- b>void</c-> <dfn class="idl-code" data-dfn-for="Ad" data-dfn-type="method" data-export data-lt="resizeAd(width, height, viewMode)" id="dom-ad-resizead"><code><c- g>resizeAd</c-></code><a class="self-link" href="#dom-ad-resizead"></a></dfn>(<a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-float" id="ref-for-idl-float③"><c- b>float</c-></a> <dfn class="idl-code" data-dfn-for="Ad/resizeAd(width, height, viewMode)" data-dfn-type="argument" data-export id="dom-ad-resizead-width-height-viewmode-width"><code><c- g>width</c-></code><a class="self-link" href="#dom-ad-resizead-width-height-viewmode-width"></a></dfn>, <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-float" id="ref-for-idl-float④"><c- b>float</c-></a> <dfn class="idl-code" data-dfn-for="Ad/resizeAd(width, height, viewMode)" data-dfn-type="argument" data-export id="dom-ad-resizead-width-height-viewmode-height"><code><c- g>height</c-></code><a class="self-link" href="#dom-ad-resizead-width-height-viewmode-height"></a></dfn>, <a class="n" data-link-type="idl-name"><c- n>ViewMode</c-></a> <dfn class="idl-code" data-dfn-for="Ad/resizeAd(width, height, viewMode)" data-dfn-type="argument" data-export id="dom-ad-resizead-width-height-viewmode-viewmode"><code><c- g>viewMode</c-></code><a class="self-link" href="#dom-ad-resizead-width-height-viewmode-viewmode"></a></dfn>);
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-float" id="ref-for-idl-float⑤"><c- b>float</c-></a> <dfn class="idl-code" data-dfn-for="Ad" data-dfn-type="attribute" data-export data-readonly data-type="float" id="dom-ad-adwidth"><code><c- g>adWidth</c-></code><a class="self-link" href="#dom-ad-adwidth"></a></dfn>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-float" id="ref-for-idl-float⑥"><c- b>float</c-></a> <dfn class="idl-code" data-dfn-for="Ad" data-dfn-type="attribute" data-export data-readonly data-type="float" id="dom-ad-adheight"><code><c- g>adHeight</c-></code><a class="self-link" href="#dom-ad-adheight"></a></dfn>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-float" id="ref-for-idl-float⑦"><c- b>float</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="Ad" data-dfn-type="attribute" data-export data-readonly data-type="float" id="dom-ad-adduration"><code><c- g>adDuration</c-></code></dfn>;
};
</pre>
   <dl>
    <dt data-md><code class="idl"><a data-link-type="idl" href="#dom-ad-handshakeversion" id="ref-for-dom-ad-handshakeversion">handshakeVersion()</a></code>
    <dd data-md>
     <p>Negotiates version support between the player and ad. The player passes <code class="idl"><a data-link-type="idl" href="#dom-ad-handshakeversion-supportedversion-supportedversion" id="ref-for-dom-ad-handshakeversion-supportedversion-supportedversion">supportedVersion</a></code> set to the highest
version it supports. <code class="idl"><a data-link-type="idl">handshakeVersion</a></code> returns the version it supports.</p>
   </dl>
   <p class="issue" id="issue-f43489d6"><a class="self-link" href="#issue-f43489d6"></a> consider passing <code>supportedVersion</code> on the <code class="idl"><a data-link-type="idl" href="#dom-window-getsivicad" id="ref-for-dom-window-getsivicad">getSIVICAd()</a></code> function
call, so the ad can respond with an object that matches the requested API</p>
   <dl>
    <dt data-md><code class="idl"><a data-link-type="idl" href="#dom-ad-adduration" id="ref-for-dom-ad-adduration">adDuration</a></code>
    <dd data-md>
     <p>The full duration of the ad experience, including video and extended features</p>
   </dl>
   <h3 class="heading settled" data-level="8.2" id="errors"><span class="secno">8.2. </span><span class="content">Error Handling and Timeouts</span><a class="self-link" href="#errors"></a></h3>
   <p>If the media cannot be played the player should terminate the ad and fire an error using the standard VAST errors.</p>
   <p>If either the interactive ad or player wants to terminate with an error the player should fire a 902 error. In cases where this is not possible like live server side ad insertion the player should remove the ad overlay and continue tracking quartiles and completion.</p>
   <p>The ad or player should pass a specific error code to indicate why it errored out. The ad can also hand back a string with extra details about the error.</p>
   <h4 class="heading settled" data-level="8.2.1" id="error-codes"><span class="secno">8.2.1. </span><span class="content">Error Codes</span><a class="self-link" href="#error-codes"></a></h4>
    This table indicates defined SIVIC error codes the ad may fire: 
   <dl>
    <dt data-md><dfn data-dfn-type="dfn" data-noexport id="1101">1101<a class="self-link" href="#1101"></a></dfn>
    <dd data-md>
     <p>Resources could not be loaded. The SIVIC ad tried to load resources but failed.</p>
    <dt data-md><dfn data-dfn-type="dfn" data-noexport id="1102">1102<a class="self-link" href="#1102"></a></dfn>
    <dd data-md>
     <p>Incorrect interface passed from player. The video proxy interface or slot were not
	in concordance with the SIVIC spec.</p>
    <dt data-md><dfn data-dfn-type="dfn" data-noexport id="1103">1103<a class="self-link" href="#1103"></a></dfn>
    <dd data-md>
     <p>Playback area not usable by ad. The dimensions the ad needed
	were not what it received.</p>
    <dt data-md><dfn data-dfn-type="dfn" data-noexport id="1104">1104<a class="self-link" href="#1104"></a></dfn>
    <dd data-md>
     <p>Wrong handshake version.</p>
    <dt data-md><dfn data-dfn-type="dfn" data-noexport id="1105">1105<a class="self-link" href="#1105"></a></dfn>
    <dd data-md>
     <p>Ad not playable for a technical reason on this site.</p>
    <dt data-md><dfn data-dfn-type="dfn" data-noexport id="1106">1106<a class="self-link" href="#1106"></a></dfn>
    <dd data-md>
     <p>Request for expand not honored. The ad requested to expand but the
	player did not allow it.</p>
    <dt data-md><dfn data-dfn-type="dfn" data-noexport id="1107">1107<a class="self-link" href="#1107"></a></dfn>
    <dd data-md>
     <p>Request for pause not honored. The ad requested pause but the player
	did not pause.</p>
    <dt data-md><dfn data-dfn-type="dfn" data-noexport id="1108">1108<a class="self-link" href="#1108"></a></dfn>
    <dd data-md>
     <p>Play mode not adequate for ad. The ad requires playback control but
	the player is not giving control. This error should only fire if the
	VAST for the ad specified that it needs playback control.</p>
    <dt data-md><dfn data-dfn-type="dfn" data-noexport id="1009">1009<a class="self-link" href="#1009"></a></dfn>
    <dd data-md>
     <p>Ad internal error. The ad had an error not related to any external dependencies.</p>
    <dt data-md><dfn data-dfn-type="dfn" data-noexport id="1010">1010<a class="self-link" href="#1010"></a></dfn>
    <dd data-md>
     <p>Device not supported. The ad could not play or render on the device.</p>
    <dt data-md><dfn data-dfn-type="dfn" data-noexport id="1199">1199<a class="self-link" href="#1199"></a></dfn>
    <dd data-md>
     <p>Player cababilities not adequate for ad. Catchall error if the ad
	could not be more specific.</p>
   </dl>
   <p>This table indicates defined SIVIC error codes the player may fire:</p>
   <dl>
    <dt data-md><dfn data-dfn-type="dfn" data-noexport id="1201">1201<a class="self-link" href="#1201"></a></dfn>
    <dd data-md>
     <p>Uncaught error. The SIVIC ad threw and exception it did not catch.</p>
    <dt data-md><dfn data-dfn-type="dfn" data-noexport id="1202">1202<a class="self-link" href="#1202"></a></dfn>
    <dd data-md>
     <p>Wrong handshake version.</p>
   </dl>
   <h3 class="heading settled" data-level="8.3" id="ad-completion"><span class="secno">8.3. </span><span class="content">Ad Completion</span><a class="self-link" href="#ad-completion"></a></h3>
   <h2 class="heading settled" data-level="9" id="security"><span class="secno">9. </span><span class="content">Security</span><a class="self-link" href="#security"></a></h2>
   <h2 class="heading settled" data-level="10" id="examples"><span class="secno">10. </span><span class="content">Examples</span><a class="self-link" href="#examples"></a></h2>
   <h2 class="heading settled" data-level="11" id="lang-specific"><span class="secno">11. </span><span class="content">Language-Specific Implementation Details</span><a class="self-link" href="#lang-specific"></a></h2>
   <h2 class="heading settled" data-level="12" id="terminology"><span class="secno">12. </span><span class="content">Terminology</span><a class="self-link" href="#terminology"></a></h2>
   <dl>
    <dt data-md><dfn data-dfn-type="dfn" data-noexport id="sivic-vast">SIVIC VAST<a class="self-link" href="#sivic-vast"></a></dfn>
    <dd data-md>
     <p>The VAST document that contains the SIVIC ad unit components.</p>
    <dt data-md><dfn data-dfn-type="dfn" data-noexport id="sivic-ad-unit">SIVIC Ad Unit<a class="self-link" href="#sivic-ad-unit"></a></dfn>
    <dd data-md>
     <p>The SIVIC ad video and the SIVIC ad creative.</p>
    <dt data-md><dfn data-dfn-type="dfn" data-noexport id="sivic-video">SIVIC Video<a class="self-link" href="#sivic-video"></a></dfn>
    <dd data-md>
     <p>The SIVIC ad video component if it’s a progressively downloaded video file.</p>
    <dt data-md><dfn data-dfn-type="dfn" data-noexport id="sivic-video-stream">SIVIC Video Stream<a class="self-link" href="#sivic-video-stream"></a></dfn>
    <dd data-md>
     <p>The SIVIC ad video component if it’s SSAI video.</p>
    <dt data-md><dfn data-dfn-type="dfn" data-noexport id="sivic-live-video-stream">SIVIC Live Video Stream<a class="self-link" href="#sivic-live-video-stream"></a></dfn>
    <dd data-md>
     <p>The SIVIC ad video component if live streaming video.</p>
    <dt data-md><dfn data-dfn-type="dfn" data-noexport id="sivic-creative">SIVIC Creative<a class="self-link" href="#sivic-creative"></a></dfn>
    <dd data-md>
     <p>The SIVIC ad creative component (html doc and assets) that overlays the SIVIC
ad video.</p>
    <dt data-md><dfn data-dfn-type="dfn" data-noexport id="sivic-secondary-video">SIVIC Secondary Video<a class="self-link" href="#sivic-secondary-video"></a></dfn>
    <dd data-md>
     <p>Video assets that are loaded as part of the SIVIC creative and not the
primary video.</p>
    <dt data-md><dfn data-dfn-type="dfn" data-noexport id="content-video">Content Video<a class="self-link" href="#content-video"></a></dfn>
    <dd data-md>
     <p>Any reference to video that is NOT a component or asset of the ad unit.</p>
   </dl>
  </main>
  <div data-fill-with="conformance">
   <h2 class="no-ref no-num heading settled" id="conformance"><span class="content"> Conformance</span><a class="self-link" href="#conformance"></a></h2>
   <p> Conformance requirements are expressed with a combination of descriptive assertions and RFC 2119 terminology.
            The key words “MUST”, “MUST NOT”, “REQUIRED”, “SHALL”, “SHALL NOT”, “SHOULD”, “SHOULD NOT”, “RECOMMENDED”, “MAY”, and “OPTIONAL”
            in the normative parts of this document
            are to be interpreted as described in RFC 2119.
            However, for readability,
            these words do not appear in all uppercase letters in this specification. </p>
   <p> All of the text of this specification is normative
            except sections explicitly marked as non-normative, examples, and notes. <a data-link-type="biblio" href="#biblio-rfc2119">[RFC2119]</a> </p>
   <p> Examples in this specification are introduced with the words “for example”
            or are set apart from the normative text with <code>class="example"</code>, like this: </p>
   <div class="example" id="example-example"><a class="self-link" href="#example-example"></a> This is an example of an informative example. </div>
   <p> Informative notes begin with the word “Note”
            and are set apart from the normative text with <code>class="note"</code>, like this: </p>
   <p class="note" role="note"> Note, this is an informative note. </p>
  </div>
<script>
(function() {
  "use strict";
  var collapseSidebarText = '<span aria-hidden="true">←</span> '
                          + '<span>Collapse Sidebar</span>';
  var expandSidebarText   = '<span aria-hidden="true">→</span> '
                          + '<span>Pop Out Sidebar</span>';
  var tocJumpText         = '<span aria-hidden="true">↑</span> '
                          + '<span>Jump to Table of Contents</span>';

  var sidebarMedia = window.matchMedia('screen and (min-width: 78em)');
  var autoToggle   = function(e){ toggleSidebar(e.matches) };
  if(sidebarMedia.addListener) {
    sidebarMedia.addListener(autoToggle);
  }

  function toggleSidebar(on) {
    if (on == undefined) {
      on = !document.body.classList.contains('toc-sidebar');
    }

    /* Don’t scroll to compensate for the ToC if we’re above it already. */
    var headY = 0;
    var head = document.querySelector('.head');
    if (head) {
      // terrible approx of "top of ToC"
      headY += head.offsetTop + head.offsetHeight;
    }
    var skipScroll = window.scrollY < headY;

    var toggle = document.getElementById('toc-toggle');
    var tocNav = document.getElementById('toc');
    if (on) {
      var tocHeight = tocNav.offsetHeight;
      document.body.classList.add('toc-sidebar');
      document.body.classList.remove('toc-inline');
      toggle.innerHTML = collapseSidebarText;
      if (!skipScroll) {
        window.scrollBy(0, 0 - tocHeight);
      }
      tocNav.focus();
      sidebarMedia.addListener(autoToggle); // auto-collapse when out of room
    }
    else {
      document.body.classList.add('toc-inline');
      document.body.classList.remove('toc-sidebar');
      toggle.innerHTML = expandSidebarText;
      if (!skipScroll) {
        window.scrollBy(0, tocNav.offsetHeight);
      }
      if (toggle.matches(':hover')) {
        /* Unfocus button when not using keyboard navigation,
           because I don’t know where else to send the focus. */
        toggle.blur();
      }
    }
  }

  function createSidebarToggle() {
    /* Create the sidebar toggle in JS; it shouldn’t exist when JS is off. */
    var toggle = document.createElement('a');
      /* This should probably be a button, but appearance isn’t standards-track.*/
    toggle.id = 'toc-toggle';
    toggle.class = 'toc-toggle';
    toggle.href = '#toc';
    toggle.innerHTML = collapseSidebarText;

    sidebarMedia.addListener(autoToggle);
    var toggler = function(e) {
      e.preventDefault();
      sidebarMedia.removeListener(autoToggle); // persist explicit off states
      toggleSidebar();
      return false;
    }
    toggle.addEventListener('click', toggler, false);


    /* Get <nav id=toc-nav>, or make it if we don’t have one. */
    var tocNav = document.getElementById('toc-nav');
    if (!tocNav) {
      tocNav = document.createElement('p');
      tocNav.id = 'toc-nav';
      /* Prepend for better keyboard navigation */
      document.body.insertBefore(tocNav, document.body.firstChild);
    }
    /* While we’re at it, make sure we have a Jump to Toc link. */
    var tocJump = document.getElementById('toc-jump');
    if (!tocJump) {
      tocJump = document.createElement('a');
      tocJump.id = 'toc-jump';
      tocJump.href = '#toc';
      tocJump.innerHTML = tocJumpText;
      tocNav.appendChild(tocJump);
    }

    tocNav.appendChild(toggle);
  }

  var toc = document.getElementById('toc');
  if (toc) {
    createSidebarToggle();
    toggleSidebar(sidebarMedia.matches);

    /* If the sidebar has been manually opened and is currently overlaying the text
       (window too small for the MQ to add the margin to body),
       then auto-close the sidebar once you click on something in there. */
    toc.addEventListener('click', function(e) {
      if(e.target.tagName.toLowerCase() == "a" && document.body.classList.contains('toc-sidebar') && !sidebarMedia.matches) {
        toggleSidebar(false);
      }
    }, false);
  }
  else {
    console.warn("Can’t find Table of Contents. Please use <nav id='toc'> around the ToC.");
  }

  /* Wrap tables in case they overflow */
  var tables = document.querySelectorAll(':not(.overlarge) > table.data, :not(.overlarge) > table.index');
  var numTables = tables.length;
  for (var i = 0; i < numTables; i++) {
    var table = tables[i];
    var wrapper = document.createElement('div');
    wrapper.className = 'overlarge';
    table.parentNode.insertBefore(wrapper, table);
    wrapper.appendChild(table);
  }

})();
</script>
  <h2 class="no-num no-ref heading settled" id="index"><span class="content">Index</span><a class="self-link" href="#index"></a></h2>
  <h3 class="no-num no-ref heading settled" id="index-defined-here"><span class="content">Terms defined by this specification</span><a class="self-link" href="#index-defined-here"></a></h3>
  <ul class="index">
   <li><a href="#1009">1009</a><span>, in §8.2.1</span>
   <li><a href="#1010">1010</a><span>, in §8.2.1</span>
   <li><a href="#1101">1101</a><span>, in §8.2.1</span>
   <li><a href="#1102">1102</a><span>, in §8.2.1</span>
   <li><a href="#1103">1103</a><span>, in §8.2.1</span>
   <li><a href="#1104">1104</a><span>, in §8.2.1</span>
   <li><a href="#1105">1105</a><span>, in §8.2.1</span>
   <li><a href="#1106">1106</a><span>, in §8.2.1</span>
   <li><a href="#1107">1107</a><span>, in §8.2.1</span>
   <li><a href="#1108">1108</a><span>, in §8.2.1</span>
   <li><a href="#1199">1199</a><span>, in §8.2.1</span>
   <li><a href="#1201">1201</a><span>, in §8.2.1</span>
   <li><a href="#1202">1202</a><span>, in §8.2.1</span>
   <li><a href="#ad">Ad</a><span>, in §8.1.2</span>
   <li><a href="#dom-ad-adduration">adDuration</a><span>, in §8.1.2</span>
   <li><a href="#dom-skippablestate-adhandles">"adHandles"</a><span>, in §6.4.2</span>
   <li><a href="#dom-ad-adheight">adHeight</a><span>, in §8.1.2</span>
   <li><a href="#dom-creativedata-adid">adId</a><span>, in §6.4.2</span>
   <li><a href="#dom-creativedata-adparameters">adParameters</a><span>, in §6.4.2</span>
   <li><a href="#dom-creativedata-adservingid">adServingId</a><span>, in §6.4.2</span>
   <li><a href="#dom-ad-adwidth">adWidth</a><span>, in §8.1.2</span>
   <li><a href="#dom-environmentdata-appid">appId</a><span>, in §6.4.2</span>
   <li><a href="#dom-message-args">args</a><span>, in §5.3</span>
   <li><a href="#dom-creativedata-clickthruurl">clickThruUrl</a><span>, in §6.4.2</span>
   <li><a href="#content-video">Content Video</a><span>, in §12</span>
   <li>
    CreativeData
    <ul>
     <li><a href="#dictdef-creativedata">(dictionary)</a><span>, in §6.4.2</span>
     <li><a href="#dom-initparameters-creativedata">dict-member for initParameters</a><span>, in §6.4.2</span>
    </ul>
   <li>
    creativeDimensions
    <ul>
     <li><a href="#dictdef-creativedimensions">(dictionary)</a><span>, in §6.4.1</span>
     <li><a href="#dom-environmentdata-creativedimensions">dict-member for EnvironmentData</a><span>, in §6.4.2</span>
     <li><a href="#dom-resizeparameters-creativedimensions">dict-member for resizeParameters</a><span>, in §6.4.1</span>
    </ul>
   <li><a href="#dom-creativedata-creativeid">creativeId</a><span>, in §6.4.2</span>
   <li><a href="#message-deserialize">deserialize</a><span>, in §5.1.2</span>
   <li><a href="#dom-environmentdata-deviceid">deviceId</a><span>, in §6.4.2</span>
   <li>
    EnvironmentData
    <ul>
     <li><a href="#dictdef-environmentdata">(dictionary)</a><span>, in §6.4.2</span>
     <li><a href="#dom-initparameters-environmentdata">dict-member for initParameters</a><span>, in §6.4.2</span>
    </ul>
   <li>
    errorCode
    <ul>
     <li><a href="#dom-resolvemessageargsvalue-errorcode">dict-member for ResolveMessageArgsValue</a><span>, in §5.3.2</span>
     <li><a href="#dom-trackingerrorargs-errorcode">dict-member for TrackingErrorArgs</a><span>, in §6.1.1</span>
    </ul>
   <li><a href="#message-establish-a-new-session">establish a new session</a><span>, in §5.2.1</span>
   <li>
    fullScreen
    <ul>
     <li><a href="#dom-environmentdata-fullscreen">dict-member for EnvironmentData</a><span>, in §6.4.2</span>
     <li><a href="#dom-resizeparameters-fullscreen">dict-member for resizeParameters</a><span>, in §6.4.1</span>
    </ul>
   <li><a href="#dom-environmentdata-fullscreenallowed">fullscreenAllowed</a><span>, in §6.4.2</span>
   <li><a href="#dom-window-getsivicad">getSIVICAd()</a><span>, in §8.1.1</span>
   <li><a href="#message-handle-an-incoming-message">handle an incoming message</a><span>, in §5.2.3</span>
   <li><a href="#dom-ad-handshakeversion">handshakeVersion(supportedVersion)</a><span>, in §8.1.2</span>
   <li>
    height
    <ul>
     <li><a href="#dom-creativedimensions-height">dict-member for creativeDimensions</a><span>, in §6.4.1</span>
     <li><a href="#dom-videodimensions-height">dict-member for videoDimensions</a><span>, in §6.4.1</span>
    </ul>
   <li><a href="#dom-ad-initad">initAd(creativeData, envData)</a><span>, in §8.1.2</span>
   <li><a href="#dictdef-initparameters">initParameters</a><span>, in §6.4.2</span>
   <li><a href="#dictdef-message">Message</a><span>, in §5.3</span>
   <li><a href="#dom-resolvemessageargsvalue-message">message</a><span>, in §5.3.2</span>
   <li>
    messageId
    <ul>
     <li><a href="#dom-message-messageid">dict-member for Message</a><span>, in §5.3</span>
     <li><a href="#dom-resolvemessageargs-messageid">dict-member for ResolveMessageArgs</a><span>, in §5.3.1</span>
    </ul>
   <li>
    mode
    <ul>
     <li><a href="#dom-environmentdata-mode">dict-member for EnvironmentData</a><span>, in §6.4.2</span>
     <li><a href="#dom-resizeparameters-mode">dict-member for resizeParameters</a><span>, in §6.4.1</span>
    </ul>
   <li><a href="#dom-environmentdata-muted">muted</a><span>, in §6.4.2</span>
   <li><a href="#dom-skippablestate-notskippable">"notSkippable"</a><span>, in §6.4.2</span>
   <li><a href="#dom-skippablestate-playerhandles">"playerHandles"</a><span>, in §6.4.2</span>
   <li><a href="#message-transport-properties">properties</a><span>, in §5.1</span>
   <li><a href="#message-receiver">receiver</a><span>, in §5.1</span>
   <li><a href="#message-reject">reject</a><span>, in §5.3.2</span>
   <li><a href="#dom-ad-resizead">resizeAd(width, height, viewMode)</a><span>, in §8.1.2</span>
   <li><a href="#dictdef-resizeparameters">resizeParameters</a><span>, in §6.4.1</span>
   <li><a href="#message-resolve">resolve</a><span>, in §5.3.1</span>
   <li><a href="#dictdef-resolvemessageargs">ResolveMessageArgs</a><span>, in §5.3.1</span>
   <li><a href="#dictdef-resolvemessageargsvalue">ResolveMessageArgsValue</a><span>, in §5.3.2</span>
   <li><a href="#message-send-a-message">send a message</a><span>, in §5.2.2</span>
   <li><a href="#message-send-an-acknowledgement-message">send an acknowledgement message</a><span>, in §5.2.2</span>
   <li><a href="#message-sender">sender</a><span>, in §5.1</span>
   <li><a href="#message-serialize">serialize</a><span>, in §5.1.2</span>
   <li><a href="#message-serialized-message">serialized message</a><span>, in §5.1</span>
   <li><a href="#dom-message-sessionid">sessionId</a><span>, in §5.3</span>
   <li><a href="#message-session-identifier">session identifier</a><span>, in §5.2</span>
   <li><a href="#message-sessions">sessions</a><span>, in §5.2</span>
   <li><a href="#dom-environmentdata-siteurl">siteUrl</a><span>, in §6.4.2</span>
   <li><a href="#sivic-ad-unit">SIVIC Ad Unit</a><span>, in §12</span>
   <li><a href="#sivic-creative">SIVIC Creative</a><span>, in §12</span>
   <li><a href="#sivic-live-video-stream">SIVIC Live Video Stream</a><span>, in §12</span>
   <li><a href="#sivic-secondary-video">SIVIC Secondary Video</a><span>, in §12</span>
   <li><a href="#sivic-vast">SIVIC VAST</a><span>, in §12</span>
   <li><a href="#sivic-video">SIVIC Video</a><span>, in §12</span>
   <li><a href="#sivic-video-stream">SIVIC Video Stream</a><span>, in §12</span>
   <li><a href="#dom-ad-skipad">skipAd()</a><span>, in §8.1.2</span>
   <li><a href="#dom-environmentdata-skippablestate">skippableState</a><span>, in §6.4.2</span>
   <li><a href="#enumdef-skippablestate">SkippableState</a><span>, in §6.4.2</span>
   <li><a href="#dom-ad-startad">startAd()</a><span>, in §8.1.2</span>
   <li><a href="#dom-ad-stopad">stopAd()</a><span>, in §8.1.2</span>
   <li><a href="#dictdef-trackingerrorargs">TrackingErrorArgs</a><span>, in §6.1.1</span>
   <li>
    transitionDuration
    <ul>
     <li><a href="#dom-creativedimensions-transitionduration">dict-member for creativeDimensions</a><span>, in §6.4.1</span>
     <li><a href="#dom-videodimensions-transitionduration">dict-member for videoDimensions</a><span>, in §6.4.1</span>
    </ul>
   <li><a href="#message-transport">transport</a><span>, in §5.1</span>
   <li><a href="#dom-message-type">type</a><span>, in §5.3</span>
   <li><a href="#dom-environmentdata-useragent">useragent</a><span>, in §6.4.2</span>
   <li><a href="#dom-resolvemessageargs-value">value</a><span>, in §5.3.1</span>
   <li><a href="#dom-environmentdata-variabledurationallowed">variableDurationAllowed</a><span>, in §6.4.2</span>
   <li>
    videoDimensions
    <ul>
     <li><a href="#dictdef-videodimensions">(dictionary)</a><span>, in §6.4.1</span>
     <li><a href="#dom-environmentdata-videodimensions">dict-member for EnvironmentData</a><span>, in §6.4.2</span>
     <li><a href="#dom-resizeparameters-videodimensions">dict-member for resizeParameters</a><span>, in §6.4.1</span>
    </ul>
   <li><a href="#dom-environmentdata-volume">volume</a><span>, in §6.4.2</span>
   <li>
    width
    <ul>
     <li><a href="#dom-creativedimensions-width">dict-member for creativeDimensions</a><span>, in §6.4.1</span>
     <li><a href="#dom-videodimensions-width">dict-member for videoDimensions</a><span>, in §6.4.1</span>
    </ul>
   <li>
    x
    <ul>
     <li><a href="#dom-creativedimensions-x">dict-member for creativeDimensions</a><span>, in §6.4.1</span>
     <li><a href="#dom-videodimensions-x">dict-member for videoDimensions</a><span>, in §6.4.1</span>
    </ul>
   <li>
    y
    <ul>
     <li><a href="#dom-creativedimensions-y">dict-member for creativeDimensions</a><span>, in §6.4.1</span>
     <li><a href="#dom-videodimensions-y">dict-member for videoDimensions</a><span>, in §6.4.1</span>
    </ul>
  </ul>
  <aside class="dfn-panel" data-for="term-for-window">
   <a href="https://html.spec.whatwg.org/multipage/window-object.html#window">https://html.spec.whatwg.org/multipage/window-object.html#window</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-window">8.1.1. Entry Point</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-the-iframe-element">
   <a href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#the-iframe-element">https://html.spec.whatwg.org/multipage/iframe-embed-object.html#the-iframe-element</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-the-iframe-element">5. Messaging Protocol</a>
    <li><a href="#ref-for-the-iframe-element①">5.1.1. postMessage Transport</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-idl-DOMString">
   <a href="https://heycam.github.io/webidl/#idl-DOMString">https://heycam.github.io/webidl/#idl-DOMString</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-idl-DOMString">5.1.2. Message Serialization</a>
    <li><a href="#ref-for-idl-DOMString①">5.3. Message Data Structure</a> <a href="#ref-for-idl-DOMString②">(2)</a>
    <li><a href="#ref-for-idl-DOMString③">5.3.2. reject messages</a>
    <li><a href="#ref-for-idl-DOMString④">6.1.1. SIVIC:Tracking:error</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-idl-promise">
   <a href="https://heycam.github.io/webidl/#idl-promise">https://heycam.github.io/webidl/#idl-promise</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-idl-promise">5.2.1. Establishing a new session</a> <a href="#ref-for-idl-promise①">(2)</a>
    <li><a href="#ref-for-idl-promise②">5.2.2. Sending messages</a> <a href="#ref-for-idl-promise③">(2)</a> <a href="#ref-for-idl-promise④">(3)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-SameObject">
   <a href="https://heycam.github.io/webidl/#SameObject">https://heycam.github.io/webidl/#SameObject</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-SameObject">8.1.1. Entry Point</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-idl-boolean">
   <a href="https://heycam.github.io/webidl/#idl-boolean">https://heycam.github.io/webidl/#idl-boolean</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-idl-boolean">6.4.1. SIVIC:Player:resize</a>
    <li><a href="#ref-for-idl-boolean①">6.4.2. SIVIC:Player:init</a> <a href="#ref-for-idl-boolean②">(2)</a> <a href="#ref-for-idl-boolean③">(3)</a> <a href="#ref-for-idl-boolean④">(4)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-idl-float">
   <a href="https://heycam.github.io/webidl/#idl-float">https://heycam.github.io/webidl/#idl-float</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-idl-float">6.4.1. SIVIC:Player:resize</a> <a href="#ref-for-idl-float①">(2)</a>
    <li><a href="#ref-for-idl-float②">6.4.2. SIVIC:Player:init</a>
    <li><a href="#ref-for-idl-float③">8.1.2. Ad Interface</a> <a href="#ref-for-idl-float④">(2)</a> <a href="#ref-for-idl-float⑤">(3)</a> <a href="#ref-for-idl-float⑥">(4)</a> <a href="#ref-for-idl-float⑦">(5)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-idl-unsigned-long">
   <a href="https://heycam.github.io/webidl/#idl-unsigned-long">https://heycam.github.io/webidl/#idl-unsigned-long</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-idl-unsigned-long">5.3. Message Data Structure</a>
    <li><a href="#ref-for-idl-unsigned-long①">5.3.1. resolve messages</a>
    <li><a href="#ref-for-idl-unsigned-long②">5.3.2. reject messages</a>
   </ul>
  </aside>
  <h3 class="no-num no-ref heading settled" id="index-defined-elsewhere"><span class="content">Terms defined by reference</span><a class="self-link" href="#index-defined-elsewhere"></a></h3>
  <ul class="index">
   <li>
    <a data-link-type="biblio">[HTML]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-window" style="color:initial">Window</span>
     <li><span class="dfn-paneled" id="term-for-the-iframe-element" style="color:initial">iframe</span>
    </ul>
   <li>
    <a data-link-type="biblio">[WebIDL]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-idl-DOMString" style="color:initial">DOMString</span>
     <li><span class="dfn-paneled" id="term-for-idl-promise" style="color:initial">Promise</span>
     <li><span class="dfn-paneled" id="term-for-SameObject" style="color:initial">SameObject</span>
     <li><span class="dfn-paneled" id="term-for-idl-boolean" style="color:initial">boolean</span>
     <li><span class="dfn-paneled" id="term-for-idl-float" style="color:initial">float</span>
     <li><span class="dfn-paneled" id="term-for-idl-unsigned-long" style="color:initial">unsigned long</span>
    </ul>
  </ul>
  <h2 class="no-num no-ref heading settled" id="references"><span class="content">References</span><a class="self-link" href="#references"></a></h2>
  <h3 class="no-num no-ref heading settled" id="normative"><span class="content">Normative References</span><a class="self-link" href="#normative"></a></h3>
  <dl>
   <dt id="biblio-html">[HTML]
   <dd>Anne van Kesteren; et al. <a href="https://html.spec.whatwg.org/multipage/">HTML Standard</a>. Living Standard. URL: <a href="https://html.spec.whatwg.org/multipage/">https://html.spec.whatwg.org/multipage/</a>
   <dt id="biblio-rfc2119">[RFC2119]
   <dd>S. Bradner. <a href="https://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>. March 1997. Best Current Practice. URL: <a href="https://tools.ietf.org/html/rfc2119">https://tools.ietf.org/html/rfc2119</a>
   <dt id="biblio-webidl">[WebIDL]
   <dd>Cameron McCormack; Boris Zbarsky; Tobie Langel. <a href="https://heycam.github.io/webidl/">Web IDL</a>. 15 December 2016. ED. URL: <a href="https://heycam.github.io/webidl/">https://heycam.github.io/webidl/</a>
  </dl>
  <h2 class="no-num no-ref heading settled" id="idl-index"><span class="content">IDL Index</span><a class="self-link" href="#idl-index"></a></h2>
<pre class="idl highlight def"><c- b>dictionary</c-> <a href="#dictdef-message"><code><c- g>Message</c-></code></a> {
  <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-DOMString" id="ref-for-idl-DOMString①①"><c- b>DOMString</c-></a> <a data-type="DOMString " href="#dom-message-sessionid"><code><c- g>sessionId</c-></code></a>;
  <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-unsigned-long" id="ref-for-idl-unsigned-long③"><c- b>unsigned</c-> <c- b>long</c-></a> <a data-type="unsigned long " href="#dom-message-messageid"><code><c- g>messageId</c-></code></a>;
  <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-DOMString" id="ref-for-idl-DOMString②①"><c- b>DOMString</c-></a> <a data-type="DOMString " href="#dom-message-type"><code><c- g>type</c-></code></a>;
  <c- b>any</c-> <a data-type="any " href="#dom-message-args"><code><c- g>args</c-></code></a>;
};

<c- b>dictionary</c-> <a href="#dictdef-resolvemessageargs"><code><c- g>ResolveMessageArgs</c-></code></a> {
  <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-unsigned-long" id="ref-for-idl-unsigned-long①①"><c- b>unsigned</c-> <c- b>long</c-></a> <a data-type="unsigned long " href="#dom-resolvemessageargs-messageid"><code><c- g>messageId</c-></code></a>;
  <c- b>any</c-> <a data-type="any " href="#dom-resolvemessageargs-value"><code><c- g>value</c-></code></a>;
};

<c- b>dictionary</c-> <a href="#dictdef-resolvemessageargsvalue"><code><c- g>ResolveMessageArgsValue</c-></code></a> {
  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-unsigned-long" id="ref-for-idl-unsigned-long②①"><c- b>unsigned</c-> <c- b>long</c-></a> <a data-type="unsigned long " href="#dom-resolvemessageargsvalue-errorcode"><code><c- g>errorCode</c-></code></a>;
  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-DOMString" id="ref-for-idl-DOMString③①"><c- b>DOMString</c-></a> <a data-type="DOMString " href="#dom-resolvemessageargsvalue-message"><code><c- g>message</c-></code></a>;
};

<c- b>dictionary</c-> <a href="#dictdef-trackingerrorargs"><code><c- g>TrackingErrorArgs</c-></code></a> {
  <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-DOMString" id="ref-for-idl-DOMString④①"><c- b>DOMString</c-></a> <a data-type="DOMString " href="#dom-trackingerrorargs-errorcode"><code><c- g>errorCode</c-></code></a>;
};

<c- b>dictionary</c-> <a href="#dictdef-resizeparameters"><code><c- g>resizeParameters</c-></code></a> {
  <c- b>required</c-> <a class="n" data-link-type="idl-name" href="#dictdef-videodimensions" id="ref-for-dictdef-videodimensions②"><c- n>videoDimensions</c-></a> <a data-type="videoDimensions " href="#dom-resizeparameters-videodimensions"><code><c- g>videoDimensions</c-></code></a>;
  <c- b>required</c-> <a class="n" data-link-type="idl-name" href="#dictdef-creativedimensions" id="ref-for-dictdef-creativedimensions②"><c- n>creativeDimensions</c-></a> <a data-type="creativeDimensions " href="#dom-resizeparameters-creativedimensions"><code><c- g>creativeDimensions</c-></code></a>;
  <c- b>required</c-> <a class="n" data-link-type="idl-name"><c- n>string</c-></a> <a data-type="string " href="#dom-resizeparameters-mode"><code><c- g>mode</c-></code></a>;
  <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-boolean" id="ref-for-idl-boolean⑤"><c- b>boolean</c-></a> <a data-type="boolean " href="#dom-resizeparameters-fullscreen"><code><c- g>fullScreen</c-></code></a>;
};

<c- b>dictionary</c-> <a href="#dictdef-videodimensions"><code><c- g>videoDimensions</c-></code></a> {
  <c- b>required</c-> <a class="n" data-link-type="idl-name"><c- n>int</c-></a> <a data-type="int " href="#dom-videodimensions-x"><code><c- g>x</c-></code></a>;
  <c- b>required</c-> <a class="n" data-link-type="idl-name"><c- n>int</c-></a> <a data-type="int " href="#dom-videodimensions-y"><code><c- g>y</c-></code></a>;
  <c- b>required</c-> <a class="n" data-link-type="idl-name"><c- n>int</c-></a> <a data-type="int " href="#dom-videodimensions-width"><code><c- g>width</c-></code></a>;
  <c- b>required</c-> <a class="n" data-link-type="idl-name"><c- n>int</c-></a> <a data-type="int " href="#dom-videodimensions-height"><code><c- g>height</c-></code></a>;
  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-float" id="ref-for-idl-float⑧"><c- b>float</c-></a> <a data-type="float " href="#dom-videodimensions-transitionduration"><code><c- g>transitionDuration</c-></code></a>;
};

<c- b>dictionary</c-> <a href="#dictdef-creativedimensions"><code><c- g>creativeDimensions</c-></code></a> {
  <c- b>required</c-> <a class="n" data-link-type="idl-name"><c- n>int</c-></a> <a data-type="int " href="#dom-creativedimensions-x"><code><c- g>x</c-></code></a>;
  <c- b>required</c-> <a class="n" data-link-type="idl-name"><c- n>int</c-></a> <a data-type="int " href="#dom-creativedimensions-y"><code><c- g>y</c-></code></a>;
  <c- b>required</c-> <a class="n" data-link-type="idl-name"><c- n>int</c-></a> <a data-type="int " href="#dom-creativedimensions-width"><code><c- g>width</c-></code></a>;
  <c- b>required</c-> <a class="n" data-link-type="idl-name"><c- n>int</c-></a> <a data-type="int " href="#dom-creativedimensions-height"><code><c- g>height</c-></code></a>;
  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-float" id="ref-for-idl-float①①"><c- b>float</c-></a> <a data-type="float " href="#dom-creativedimensions-transitionduration"><code><c- g>transitionDuration</c-></code></a>;
};

<c- b>dictionary</c-> <a href="#dictdef-initparameters"><code><c- g>initParameters</c-></code></a> {
  <c- b>required</c-> <a class="n" data-link-type="idl-name" href="#dictdef-environmentdata" id="ref-for-dictdef-environmentdata②"><c- n>EnvironmentData</c-></a> <a data-type="EnvironmentData " href="#dom-initparameters-environmentdata"><code><c- g>EnvironmentData</c-></code></a>;
  <c- b>required</c-> <a class="n" data-link-type="idl-name" href="#dictdef-creativedata" id="ref-for-dictdef-creativedata②"><c- n>CreativeData</c-></a> <a data-type="CreativeData " href="#dom-initparameters-creativedata"><code><c- g>CreativeData</c-></code></a>;
};

<c- b>dictionary</c-> <a href="#dictdef-creativedata"><code><c- g>CreativeData</c-></code></a> {
  <c- b>required</c-> <a class="n" data-link-type="idl-name"><c- n>string</c-></a> <a data-type="string " href="#dom-creativedata-adparameters"><code><c- g>adParameters</c-></code></a>;
  <a class="n" data-link-type="idl-name"><c- n>string</c-></a> <a data-type="string " href="#dom-creativedata-adid"><code><c- g>adId</c-></code></a>;
  <a class="n" data-link-type="idl-name"><c- n>string</c-></a> <a data-type="string " href="#dom-creativedata-creativeid"><code><c- g>creativeId</c-></code></a>;
  <a class="n" data-link-type="idl-name"><c- n>string</c-></a> <a data-type="string " href="#dom-creativedata-adservingid"><code><c- g>adServingId</c-></code></a>;
  <a class="n" data-link-type="idl-name"><c- n>string</c-></a> <a data-type="string " href="#dom-creativedata-clickthruurl"><code><c- g>clickThruUrl</c-></code></a>;
};

<c- b>dictionary</c-> <a href="#dictdef-environmentdata"><code><c- g>EnvironmentData</c-></code></a> {
  <c- b>required</c-> <a class="n" data-link-type="idl-name" href="#dictdef-videodimensions" id="ref-for-dictdef-videodimensions①①"><c- n>videoDimensions</c-></a> <a data-type="videoDimensions " href="#dom-environmentdata-videodimensions"><code><c- g>videoDimensions</c-></code></a>;
  <c- b>required</c-> <a class="n" data-link-type="idl-name" href="#dictdef-creativedimensions" id="ref-for-dictdef-creativedimensions①①"><c- n>creativeDimensions</c-></a> <a data-type="creativeDimensions " href="#dom-environmentdata-creativedimensions"><code><c- g>creativeDimensions</c-></code></a>;
  <c- b>required</c-> <a class="n" data-link-type="idl-name"><c- n>string</c-></a> <a data-type="string " href="#dom-environmentdata-mode"><code><c- g>mode</c-></code></a>;
  <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-boolean" id="ref-for-idl-boolean①①"><c- b>boolean</c-></a> <a data-type="boolean " href="#dom-environmentdata-fullscreen"><code><c- g>fullScreen</c-></code></a>;
  <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-boolean" id="ref-for-idl-boolean②①"><c- b>boolean</c-></a> <a data-type="boolean " href="#dom-environmentdata-fullscreenallowed"><code><c- g>fullscreenAllowed</c-></code></a>;
  <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-boolean" id="ref-for-idl-boolean③①"><c- b>boolean</c-></a> <a data-type="boolean " href="#dom-environmentdata-variabledurationallowed"><code><c- g>variableDurationAllowed</c-></code></a>;
  <c- b>required</c-> <a class="n" data-link-type="idl-name" href="#enumdef-skippablestate" id="ref-for-enumdef-skippablestate②"><c- n>SkippableState</c-></a> <a data-type="SkippableState " href="#dom-environmentdata-skippablestate"><code><c- g>skippableState</c-></code></a>;
  <a class="n" data-link-type="idl-name"><c- n>string</c-></a> <a data-type="string " href="#dom-environmentdata-siteurl"><code><c- g>siteUrl</c-></code></a>;
  <a class="n" data-link-type="idl-name"><c- n>string</c-></a> <a data-type="string " href="#dom-environmentdata-appid"><code><c- g>appId</c-></code></a>;
  <a class="n" data-link-type="idl-name"><c- n>string</c-></a> <a data-type="string " href="#dom-environmentdata-useragent"><code><c- g>useragent</c-></code></a>;
  <a class="n" data-link-type="idl-name"><c- n>string</c-></a> <a data-type="string " href="#dom-environmentdata-deviceid"><code><c- g>deviceId</c-></code></a>;
  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-boolean" id="ref-for-idl-boolean④①"><c- b>boolean</c-></a> <a data-type="boolean " href="#dom-environmentdata-muted"><code><c- g>muted</c-></code></a>;
  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-float" id="ref-for-idl-float②①"><c- b>float</c-></a> <a data-type="float " href="#dom-environmentdata-volume"><code><c- g>volume</c-></code></a>;
};

<c- b>enum</c-> <a href="#enumdef-skippablestate"><code><c- g>SkippableState</c-></code></a> {<a href="#dom-skippablestate-playerhandles"><code><c- s>"playerHandles"</c-></code></a>, <a href="#dom-skippablestate-adhandles"><code><c- s>"adHandles"</c-></code></a>, <a href="#dom-skippablestate-notskippable"><code><c- s>"notSkippable"</c-></code></a>};

<c- b>partial</c-> <c- b>interface</c-> <c- b>mixin</c-> <a class="idl-code" data-link-type="interface" href="https://html.spec.whatwg.org/multipage/window-object.html#window" id="ref-for-window①"><c- g>Window</c-></a> {
  [<a class="idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#SameObject" id="ref-for-SameObject①"><c- g>SameObject</c-></a>] <a class="n" data-link-type="idl-name" href="#ad" id="ref-for-ad①"><c- n>Ad</c-></a> <a href="#dom-window-getsivicad"><code><c- g>getSIVICAd</c-></code></a>();
};

<c- b>interface</c-> <a href="#ad"><code><c- g>Ad</c-></code></a> {
  <a class="n" data-link-type="idl-name"><c- n>string</c-></a> <a href="#dom-ad-handshakeversion"><code><c- g>handshakeVersion</c-></code></a>(<a class="n" data-link-type="idl-name"><c- n>string</c-></a> <a href="#dom-ad-handshakeversion-supportedversion-supportedversion"><code><c- g>supportedVersion</c-></code></a>);
  <c- b>void</c-> <a href="#dom-ad-initad"><code><c- g>initAd</c-></code></a>(<a class="n" data-link-type="idl-name" href="#dictdef-creativedata" id="ref-for-dictdef-creativedata①①"><c- n>CreativeData</c-></a> <a href="#dom-ad-initad-creativedata-envdata-creativedata"><code><c- g>creativeData</c-></code></a>, <a class="n" data-link-type="idl-name" href="#dictdef-environmentdata" id="ref-for-dictdef-environmentdata①①"><c- n>EnvironmentData</c-></a> <a href="#dom-ad-initad-creativedata-envdata-envdata"><code><c- g>envData</c-></code></a>);
  <c- b>void</c-> <a href="#dom-ad-startad"><code><c- g>startAd</c-></code></a>();
  <c- b>void</c-> <a href="#dom-ad-stopad"><code><c- g>stopAd</c-></code></a>();
  <c- b>void</c-> <a href="#dom-ad-skipad"><code><c- g>skipAd</c-></code></a>();
  <c- b>void</c-> <a href="#dom-ad-resizead"><code><c- g>resizeAd</c-></code></a>(<a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-float" id="ref-for-idl-float③①"><c- b>float</c-></a> <a href="#dom-ad-resizead-width-height-viewmode-width"><code><c- g>width</c-></code></a>, <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-float" id="ref-for-idl-float④①"><c- b>float</c-></a> <a href="#dom-ad-resizead-width-height-viewmode-height"><code><c- g>height</c-></code></a>, <a class="n" data-link-type="idl-name"><c- n>ViewMode</c-></a> <a href="#dom-ad-resizead-width-height-viewmode-viewmode"><code><c- g>viewMode</c-></code></a>);
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-float" id="ref-for-idl-float⑤①"><c- b>float</c-></a> <a data-readonly data-type="float" href="#dom-ad-adwidth"><code><c- g>adWidth</c-></code></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-float" id="ref-for-idl-float⑥①"><c- b>float</c-></a> <a data-readonly data-type="float" href="#dom-ad-adheight"><code><c- g>adHeight</c-></code></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-float" id="ref-for-idl-float⑦①"><c- b>float</c-></a> <a data-readonly data-type="float" href="#dom-ad-adduration"><code><c- g>adDuration</c-></code></a>;
};

</pre>
  <h2 class="no-num no-ref heading settled" id="issues-index"><span class="content">Issues Index</span><a class="self-link" href="#issues-index"></a></h2>
  <div style="counter-reset:issue">
   <div class="issue"> the diagram above will need to be revised to account for SSAI and
non-SSAI scenarios<a href="#issue-f49d752f"> ↵ </a></div>
   <div class="issue"> add link to final location of reference implementation<a href="#issue-a2fd907b"> ↵ </a></div>
   <div class="issue"> should we also include video element location and size here?<a href="#issue-a3715b66"> ↵ </a></div>
   <div class="issue"> useragent needs some definition or a link to where how this should be populated.<a href="#issue-ba704354"> ↵ </a></div>
   <div class="issue"> These codes need to be defined.<a href="#issue-c8f72188"> ↵ </a></div>
   <div class="issue"> can width / height coordination not be done through the iframe width
height, which would not require any API?<a href="#issue-6ed90d5c"> ↵ </a></div>
   <div class="issue"> should the player not also resize the video slot?<a href="#issue-eea3696d"> ↵ </a></div>
   <div class="issue"> clarify the value of the <code>duration</code> property as the current text
does not seem to make much sense<a href="#issue-75380958"> ↵ </a></div>
   <div class="issue"> consider passing <code>supportedVersion</code> on the <code class="idl"><a data-link-type="idl" href="#dom-window-getsivicad">getSIVICAd()</a></code> function
call, so the ad can respond with an object that matches the requested API<a href="#issue-f43489d6"> ↵ </a></div>
  </div>
  <aside class="dfn-panel" data-for="message-transport">
   <b><a href="#message-transport">#message-transport</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-message-transport">5.1. Transport Layer</a> <a href="#ref-for-message-transport①">(2)</a> <a href="#ref-for-message-transport②">(3)</a>
    <li><a href="#ref-for-message-transport③">5.1.1. postMessage Transport</a> <a href="#ref-for-message-transport④">(2)</a>
    <li><a href="#ref-for-message-transport⑤">5.2. Session Layer</a>
    <li><a href="#ref-for-message-transport⑥">5.2.2. Sending messages</a>
    <li><a href="#ref-for-message-transport⑦">5.2.3. Receiving messages</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="message-serialized-message">
   <b><a href="#message-serialized-message">#message-serialized-message</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-message-serialized-message">5.1. Transport Layer</a> <a href="#ref-for-message-serialized-message①">(2)</a> <a href="#ref-for-message-serialized-message②">(3)</a> <a href="#ref-for-message-serialized-message③">(4)</a> <a href="#ref-for-message-serialized-message④">(5)</a> <a href="#ref-for-message-serialized-message⑤">(6)</a>
    <li><a href="#ref-for-message-serialized-message⑥">5.1.2. Message Serialization</a> <a href="#ref-for-message-serialized-message⑦">(2)</a> <a href="#ref-for-message-serialized-message⑧">(3)</a> <a href="#ref-for-message-serialized-message⑨">(4)</a> <a href="#ref-for-message-serialized-message①⓪">(5)</a> <a href="#ref-for-message-serialized-message①①">(6)</a>
    <li><a href="#ref-for-message-serialized-message①②">5.2.3. Receiving messages</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="message-sender">
   <b><a href="#message-sender">#message-sender</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-message-sender">5.1. Transport Layer</a> <a href="#ref-for-message-sender①">(2)</a> <a href="#ref-for-message-sender②">(3)</a>
    <li><a href="#ref-for-message-sender③">5.1.2. Message Serialization</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="message-receiver">
   <b><a href="#message-receiver">#message-receiver</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-message-receiver">5.1. Transport Layer</a> <a href="#ref-for-message-receiver①">(2)</a> <a href="#ref-for-message-receiver②">(3)</a> <a href="#ref-for-message-receiver③">(4)</a>
    <li><a href="#ref-for-message-receiver④">5.1.2. Message Serialization</a> <a href="#ref-for-message-receiver⑤">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="message-transport-properties">
   <b><a href="#message-transport-properties">#message-transport-properties</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-message-transport-properties">5.1.1. postMessage Transport</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="message-deserialize">
   <b><a href="#message-deserialize">#message-deserialize</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-message-deserialize">5.1.2. Message Serialization</a> <a href="#ref-for-message-deserialize①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="message-sessions">
   <b><a href="#message-sessions">#message-sessions</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-message-sessions">5.2. Session Layer</a> <a href="#ref-for-message-sessions①">(2)</a>
    <li><a href="#ref-for-message-sessions②">5.2.1. Establishing a new session</a>
    <li><a href="#ref-for-message-sessions③">5.2.2. Sending messages</a> <a href="#ref-for-message-sessions④">(2)</a> <a href="#ref-for-message-sessions⑤">(3)</a>
    <li><a href="#ref-for-message-sessions⑥">5.2.3. Receiving messages</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="message-session-identifier">
   <b><a href="#message-session-identifier">#message-session-identifier</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-message-session-identifier">5.2. Session Layer</a>
    <li><a href="#ref-for-message-session-identifier①">5.2.1. Establishing a new session</a> <a href="#ref-for-message-session-identifier②">(2)</a> <a href="#ref-for-message-session-identifier③">(3)</a>
    <li><a href="#ref-for-message-session-identifier④">5.2.2. Sending messages</a> <a href="#ref-for-message-session-identifier⑤">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="message-establish-a-new-session">
   <b><a href="#message-establish-a-new-session">#message-establish-a-new-session</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-message-establish-a-new-session">5.2.1. Establishing a new session</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="message-send-a-message">
   <b><a href="#message-send-a-message">#message-send-a-message</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-message-send-a-message">5.2.2. Sending messages</a> <a href="#ref-for-message-send-a-message①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="message-send-an-acknowledgement-message">
   <b><a href="#message-send-an-acknowledgement-message">#message-send-an-acknowledgement-message</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-message-send-an-acknowledgement-message">5.2.1. Establishing a new session</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dictdef-message">
   <b><a href="#dictdef-message">#dictdef-message</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dictdef-message">5.1.2. Message Serialization</a> <a href="#ref-for-dictdef-message①">(2)</a> <a href="#ref-for-dictdef-message②">(3)</a> <a href="#ref-for-dictdef-message③">(4)</a>
    <li><a href="#ref-for-dictdef-message④">5.2.2. Sending messages</a>
    <li><a href="#ref-for-dictdef-message⑤">5.3. Message Data Structure</a> <a href="#ref-for-dictdef-message⑥">(2)</a> <a href="#ref-for-dictdef-message⑦">(3)</a> <a href="#ref-for-dictdef-message⑧">(4)</a> <a href="#ref-for-dictdef-message⑨">(5)</a> <a href="#ref-for-dictdef-message①⓪">(6)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-message-sessionid">
   <b><a href="#dom-message-sessionid">#dom-message-sessionid</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-message-sessionid">5.2.3. Receiving messages</a>
    <li><a href="#ref-for-dom-message-sessionid①">5.3. Message Data Structure</a> <a href="#ref-for-dom-message-sessionid②">(2)</a> <a href="#ref-for-dom-message-sessionid③">(3)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-message-messageid">
   <b><a href="#dom-message-messageid">#dom-message-messageid</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-message-messageid">5.3. Message Data Structure</a> <a href="#ref-for-dom-message-messageid①">(2)</a>
    <li><a href="#ref-for-dom-message-messageid②">5.3.1. resolve messages</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-message-type">
   <b><a href="#dom-message-type">#dom-message-type</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-message-type">5.2.3. Receiving messages</a> <a href="#ref-for-dom-message-type①">(2)</a> <a href="#ref-for-dom-message-type②">(3)</a>
    <li><a href="#ref-for-dom-message-type③">5.3. Message Data Structure</a> <a href="#ref-for-dom-message-type④">(2)</a>
    <li><a href="#ref-for-dom-message-type⑤">5.3.1. resolve messages</a>
    <li><a href="#ref-for-dom-message-type⑥">5.3.2. reject messages</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-message-args">
   <b><a href="#dom-message-args">#dom-message-args</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-message-args">5.2.3. Receiving messages</a> <a href="#ref-for-dom-message-args①">(2)</a> <a href="#ref-for-dom-message-args②">(3)</a>
    <li><a href="#ref-for-dom-message-args③">5.3. Message Data Structure</a> <a href="#ref-for-dom-message-args④">(2)</a> <a href="#ref-for-dom-message-args⑤">(3)</a>
    <li><a href="#ref-for-dom-message-args⑥">5.3.1. resolve messages</a>
    <li><a href="#ref-for-dom-message-args⑦">5.3.2. reject messages</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dictdef-resolvemessageargs">
   <b><a href="#dictdef-resolvemessageargs">#dictdef-resolvemessageargs</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dictdef-resolvemessageargs">5.3.1. resolve messages</a>
    <li><a href="#ref-for-dictdef-resolvemessageargs①">5.3.2. reject messages</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-resolvemessageargs-messageid">
   <b><a href="#dom-resolvemessageargs-messageid">#dom-resolvemessageargs-messageid</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-resolvemessageargs-messageid">5.2.3. Receiving messages</a>
    <li><a href="#ref-for-dom-resolvemessageargs-messageid①">5.3.1. resolve messages</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-resolvemessageargs-value">
   <b><a href="#dom-resolvemessageargs-value">#dom-resolvemessageargs-value</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-resolvemessageargs-value">5.2.3. Receiving messages</a> <a href="#ref-for-dom-resolvemessageargs-value①">(2)</a>
    <li><a href="#ref-for-dom-resolvemessageargs-value②">5.3.1. resolve messages</a>
    <li><a href="#ref-for-dom-resolvemessageargs-value③">5.3.2. reject messages</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-trackingerrorargs-errorcode">
   <b><a href="#dom-trackingerrorargs-errorcode">#dom-trackingerrorargs-errorcode</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-trackingerrorargs-errorcode">6.1.1. SIVIC:Tracking:error</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dictdef-resizeparameters">
   <b><a href="#dictdef-resizeparameters">#dictdef-resizeparameters</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dictdef-resizeparameters">6.6.7. SIVIC:Creative:requestResize</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-resizeparameters-videodimensions">
   <b><a href="#dom-resizeparameters-videodimensions">#dom-resizeparameters-videodimensions</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-resizeparameters-videodimensions">6.4.1. SIVIC:Player:resize</a> <a href="#ref-for-dom-resizeparameters-videodimensions①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-resizeparameters-creativedimensions">
   <b><a href="#dom-resizeparameters-creativedimensions">#dom-resizeparameters-creativedimensions</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-resizeparameters-creativedimensions">6.4.1. SIVIC:Player:resize</a> <a href="#ref-for-dom-resizeparameters-creativedimensions①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-resizeparameters-mode">
   <b><a href="#dom-resizeparameters-mode">#dom-resizeparameters-mode</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-resizeparameters-mode">6.4.1. SIVIC:Player:resize</a>
    <li><a href="#ref-for-dom-resizeparameters-mode①">6.4.2. SIVIC:Player:init</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-resizeparameters-fullscreen">
   <b><a href="#dom-resizeparameters-fullscreen">#dom-resizeparameters-fullscreen</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-resizeparameters-fullscreen">6.4.1. SIVIC:Player:resize</a>
    <li><a href="#ref-for-dom-resizeparameters-fullscreen①">6.4.2. SIVIC:Player:init</a>
    <li><a href="#ref-for-dom-resizeparameters-fullscreen②">7.2.2. Ad Resizing and Fullscreen</a> <a href="#ref-for-dom-resizeparameters-fullscreen③">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dictdef-videodimensions">
   <b><a href="#dictdef-videodimensions">#dictdef-videodimensions</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dictdef-videodimensions">6.4.1. SIVIC:Player:resize</a>
    <li><a href="#ref-for-dictdef-videodimensions①">6.4.2. SIVIC:Player:init</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-videodimensions-x">
   <b><a href="#dom-videodimensions-x">#dom-videodimensions-x</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-videodimensions-x">6.4.1. SIVIC:Player:resize</a> <a href="#ref-for-dom-videodimensions-x①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-videodimensions-y">
   <b><a href="#dom-videodimensions-y">#dom-videodimensions-y</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-videodimensions-y">6.4.1. SIVIC:Player:resize</a> <a href="#ref-for-dom-videodimensions-y①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-videodimensions-width">
   <b><a href="#dom-videodimensions-width">#dom-videodimensions-width</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-videodimensions-width">6.4.1. SIVIC:Player:resize</a> <a href="#ref-for-dom-videodimensions-width①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-videodimensions-height">
   <b><a href="#dom-videodimensions-height">#dom-videodimensions-height</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-videodimensions-height">6.4.1. SIVIC:Player:resize</a> <a href="#ref-for-dom-videodimensions-height①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-videodimensions-transitionduration">
   <b><a href="#dom-videodimensions-transitionduration">#dom-videodimensions-transitionduration</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-videodimensions-transitionduration">6.4.1. SIVIC:Player:resize</a> <a href="#ref-for-dom-videodimensions-transitionduration①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dictdef-creativedimensions">
   <b><a href="#dictdef-creativedimensions">#dictdef-creativedimensions</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dictdef-creativedimensions">6.4.1. SIVIC:Player:resize</a>
    <li><a href="#ref-for-dictdef-creativedimensions①">6.4.2. SIVIC:Player:init</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-initparameters-environmentdata">
   <b><a href="#dom-initparameters-environmentdata">#dom-initparameters-environmentdata</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-initparameters-environmentdata">6.4.2. SIVIC:Player:init</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-initparameters-creativedata">
   <b><a href="#dom-initparameters-creativedata">#dom-initparameters-creativedata</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-initparameters-creativedata">6.4.2. SIVIC:Player:init</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dictdef-creativedata">
   <b><a href="#dictdef-creativedata">#dictdef-creativedata</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dictdef-creativedata">6.4.2. SIVIC:Player:init</a>
    <li><a href="#ref-for-dictdef-creativedata①">8.1.2. Ad Interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-creativedata-adparameters">
   <b><a href="#dom-creativedata-adparameters">#dom-creativedata-adparameters</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-creativedata-adparameters">6.4.2. SIVIC:Player:init</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-creativedata-adid">
   <b><a href="#dom-creativedata-adid">#dom-creativedata-adid</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-creativedata-adid">6.4.2. SIVIC:Player:init</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-creativedata-creativeid">
   <b><a href="#dom-creativedata-creativeid">#dom-creativedata-creativeid</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-creativedata-creativeid">6.4.2. SIVIC:Player:init</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-creativedata-adservingid">
   <b><a href="#dom-creativedata-adservingid">#dom-creativedata-adservingid</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-creativedata-adservingid">6.4.2. SIVIC:Player:init</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-creativedata-clickthruurl">
   <b><a href="#dom-creativedata-clickthruurl">#dom-creativedata-clickthruurl</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-creativedata-clickthruurl">6.4.2. SIVIC:Player:init</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dictdef-environmentdata">
   <b><a href="#dictdef-environmentdata">#dictdef-environmentdata</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dictdef-environmentdata">6.4.2. SIVIC:Player:init</a>
    <li><a href="#ref-for-dictdef-environmentdata①">8.1.2. Ad Interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-environmentdata-videodimensions">
   <b><a href="#dom-environmentdata-videodimensions">#dom-environmentdata-videodimensions</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-environmentdata-videodimensions">6.4.2. SIVIC:Player:init</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-environmentdata-creativedimensions">
   <b><a href="#dom-environmentdata-creativedimensions">#dom-environmentdata-creativedimensions</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-environmentdata-creativedimensions">6.4.2. SIVIC:Player:init</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-environmentdata-fullscreenallowed">
   <b><a href="#dom-environmentdata-fullscreenallowed">#dom-environmentdata-fullscreenallowed</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-environmentdata-fullscreenallowed">6.4.2. SIVIC:Player:init</a>
    <li><a href="#ref-for-dom-environmentdata-fullscreenallowed①">7.2.2. Ad Resizing and Fullscreen</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-environmentdata-variabledurationallowed">
   <b><a href="#dom-environmentdata-variabledurationallowed">#dom-environmentdata-variabledurationallowed</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-environmentdata-variabledurationallowed">6.4.2. SIVIC:Player:init</a> <a href="#ref-for-dom-environmentdata-variabledurationallowed①">(2)</a>
    <li><a href="#ref-for-dom-environmentdata-variabledurationallowed②">7.2.1. Ad Pause</a>
    <li><a href="#ref-for-dom-environmentdata-variabledurationallowed③">7.3.3. Ad Extends Beyond Video Completion</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-environmentdata-skippablestate">
   <b><a href="#dom-environmentdata-skippablestate">#dom-environmentdata-skippablestate</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-environmentdata-skippablestate">6.4.2. SIVIC:Player:init</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-environmentdata-siteurl">
   <b><a href="#dom-environmentdata-siteurl">#dom-environmentdata-siteurl</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-environmentdata-siteurl">6.4.2. SIVIC:Player:init</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-environmentdata-appid">
   <b><a href="#dom-environmentdata-appid">#dom-environmentdata-appid</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-environmentdata-appid">6.4.2. SIVIC:Player:init</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-environmentdata-useragent">
   <b><a href="#dom-environmentdata-useragent">#dom-environmentdata-useragent</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-environmentdata-useragent">6.4.2. SIVIC:Player:init</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-environmentdata-deviceid">
   <b><a href="#dom-environmentdata-deviceid">#dom-environmentdata-deviceid</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-environmentdata-deviceid">6.4.2. SIVIC:Player:init</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-environmentdata-muted">
   <b><a href="#dom-environmentdata-muted">#dom-environmentdata-muted</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-environmentdata-muted">6.4.2. SIVIC:Player:init</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-environmentdata-volume">
   <b><a href="#dom-environmentdata-volume">#dom-environmentdata-volume</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-environmentdata-volume">6.4.2. SIVIC:Player:init</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="enumdef-skippablestate">
   <b><a href="#enumdef-skippablestate">#enumdef-skippablestate</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-enumdef-skippablestate">6.4.2. SIVIC:Player:init</a> <a href="#ref-for-enumdef-skippablestate①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-skippablestate-playerhandles">
   <b><a href="#dom-skippablestate-playerhandles">#dom-skippablestate-playerhandles</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-skippablestate-playerhandles">6.4.2. SIVIC:Player:init</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-skippablestate-adhandles">
   <b><a href="#dom-skippablestate-adhandles">#dom-skippablestate-adhandles</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-skippablestate-adhandles">6.4.2. SIVIC:Player:init</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-skippablestate-notskippable">
   <b><a href="#dom-skippablestate-notskippable">#dom-skippablestate-notskippable</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-skippablestate-notskippable">6.4.2. SIVIC:Player:init</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-window-getsivicad">
   <b><a href="#dom-window-getsivicad">#dom-window-getsivicad</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-window-getsivicad">8.1.2. Ad Interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="ad">
   <b><a href="#ad">#ad</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-ad">8.1.1. Entry Point</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-ad-handshakeversion">
   <b><a href="#dom-ad-handshakeversion">#dom-ad-handshakeversion</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-ad-handshakeversion">8.1.2. Ad Interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-ad-handshakeversion-supportedversion-supportedversion">
   <b><a href="#dom-ad-handshakeversion-supportedversion-supportedversion">#dom-ad-handshakeversion-supportedversion-supportedversion</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-ad-handshakeversion-supportedversion-supportedversion">8.1.2. Ad Interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-ad-stopad">
   <b><a href="#dom-ad-stopad">#dom-ad-stopad</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-ad-stopad">4.7. Video Player Requirements</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-ad-adduration">
   <b><a href="#dom-ad-adduration">#dom-ad-adduration</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-ad-adduration">8.1.2. Ad Interface</a>
   </ul>
  </aside>
<script>/* script-var-click-highlighting */

    document.addEventListener("click", e=>{
        if(e.target.nodeName == "VAR") {
            highlightSameAlgoVars(e.target);
        }
    });
    {
        const indexCounts = new Map();
        const indexNames = new Map();
        function highlightSameAlgoVars(v) {
            // Find the algorithm container.
            let algoContainer = null;
            let searchEl = v;
            while(algoContainer == null && searchEl != document.body) {
                searchEl = searchEl.parentNode;
                if(searchEl.hasAttribute("data-algorithm")) {
                    algoContainer = searchEl;
                }
            }

            // Not highlighting document-global vars,
            // too likely to be unrelated.
            if(algoContainer == null) return;

            const algoName = algoContainer.getAttribute("data-algorithm");
            const varName = getVarName(v);
            const addClass = !v.classList.contains("selected");
            let highlightClass = null;
            if(addClass) {
                const index = chooseHighlightIndex(algoName, varName);
                indexCounts.get(algoName)[index] += 1;
                indexNames.set(algoName+"///"+varName, index);
                highlightClass = nameFromIndex(index);
            } else {
                const index = previousHighlightIndex(algoName, varName);
                indexCounts.get(algoName)[index] -= 1;
                highlightClass = nameFromIndex(index);
            }

            // Find all same-name vars, and toggle their class appropriately.
            for(const el of algoContainer.querySelectorAll("var")) {
                if(getVarName(el) == varName) {
                    el.classList.toggle("selected", addClass);
                    el.classList.toggle(highlightClass, addClass);
                }
            }
        }
        function getVarName(el) {
            return el.textContent.replace(/(\s| )+/, " ").trim();
        }
        function chooseHighlightIndex(algoName, varName) {
            let indexes = null;
            if(indexCounts.has(algoName)) {
                indexes = indexCounts.get(algoName);
            } else {
                // 7 classes right now
                indexes = [0,0,0,0,0,0,0];
                indexCounts.set(algoName, indexes);
            }

            // If the element was recently unclicked,
            // *and* that color is still unclaimed,
            // give it back the same color.
            const lastIndex = previousHighlightIndex(algoName, varName);
            if(indexes[lastIndex] === 0) return lastIndex;

            // Find the earliest index with the lowest count.
            const minCount = Math.min.apply(null, indexes);
            let index = null;
            for(var i = 0; i < indexes.length; i++) {
                if(indexes[i] == minCount) {
                    return i;
                }
            }
        }
        function previousHighlightIndex(algoName, varName) {
            return indexNames.get(algoName+"///"+varName);
        }
        function nameFromIndex(index) {
            return "selected" + index;
        }
    }
    </script>
<script>/* script-dfn-panel */

document.body.addEventListener("click", function(e) {
    var queryAll = function(sel) { return [].slice.call(document.querySelectorAll(sel)); }
    // Find the dfn element or panel, if any, that was clicked on.
    var el = e.target;
    var target;
    var hitALink = false;
    while(el.parentElement) {
        if(el.tagName == "A") {
            // Clicking on a link in a <dfn> shouldn't summon the panel
            hitALink = true;
        }
        if(el.classList.contains("dfn-paneled")) {
            target = "dfn";
            break;
        }
        if(el.classList.contains("dfn-panel")) {
            target = "dfn-panel";
            break;
        }
        el = el.parentElement;
    }
    if(target != "dfn-panel") {
        // Turn off any currently "on" or "activated" panels.
        queryAll(".dfn-panel.on, .dfn-panel.activated").forEach(function(el){
            el.classList.remove("on");
            el.classList.remove("activated");
        });
    }
    if(target == "dfn" && !hitALink) {
        // open the panel
        var dfnPanel = document.querySelector(".dfn-panel[data-for='" + el.id + "']");
        if(dfnPanel) {
            dfnPanel.classList.add("on");
            var rect = el.getBoundingClientRect();
            dfnPanel.style.left = window.scrollX + rect.right + 5 + "px";
            dfnPanel.style.top = window.scrollY + rect.top + "px";
            var panelRect = dfnPanel.getBoundingClientRect();
            var panelWidth = panelRect.right - panelRect.left;
            if(panelRect.right > document.body.scrollWidth && (rect.left - (panelWidth + 5)) > 0) {
                // Reposition, because the panel is overflowing
                dfnPanel.style.left = window.scrollX + rect.left - (panelWidth + 5) + "px";
            }
        } else {
            console.log("Couldn't find .dfn-panel[data-for='" + el.id + "']");
        }
    } else if(target == "dfn-panel") {
        // Switch it to "activated" state, which pins it.
        el.classList.add("activated");
        el.style.left = null;
        el.style.top = null;
    }

});
</script>